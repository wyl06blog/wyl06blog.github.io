import{r as Er,_ as gt,a as lt,o as At,b as Xt,c as $,d as Rt,e as b,f as ft,m as Sr,u as xt,g as Tr,h as X,w as Ce,v as Rr,t as ut,F as It,i as Bt,j as tt,n as wt,k as Ir,l as Mt,p as Ot,q as ee,s as Lr,x as ce,T as Kt,y as Wt,z as Ht,A as Vt,B as bt,C as Pr,D as wr,E as ze,G as kr}from"./framework.Y2lEOXmY.js";const Vr="/assets/bgm.DuMj4eqY.mp3";var He={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},ge={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},_r=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],$t={CSS:{},springs:{}};function _t(s,e,v){return Math.min(Math.max(s,e),v)}function zt(s,e){return s.indexOf(e)>-1}function ae(s,e){return s.apply(null,e)}var J={arr:function(s){return Array.isArray(s)},obj:function(s){return zt(Object.prototype.toString.call(s),"Object")},pth:function(s){return J.obj(s)&&s.hasOwnProperty("totalLength")},svg:function(s){return s instanceof SVGElement},inp:function(s){return s instanceof HTMLInputElement},dom:function(s){return s.nodeType||J.svg(s)},str:function(s){return typeof s=="string"},fnc:function(s){return typeof s=="function"},und:function(s){return typeof s>"u"},nil:function(s){return J.und(s)||s===null},hex:function(s){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(s)},rgb:function(s){return/^rgb/.test(s)},hsl:function(s){return/^hsl/.test(s)},col:function(s){return J.hex(s)||J.rgb(s)||J.hsl(s)},key:function(s){return!He.hasOwnProperty(s)&&!ge.hasOwnProperty(s)&&s!=="targets"&&s!=="keyframes"}};function je(s){var e=/\(([^)]+)\)/.exec(s);return e?e[1].split(",").map(function(v){return parseFloat(v)}):[]}function be(s,e){var v=je(s),a=_t(J.und(v[0])?1:v[0],.1,100),t=_t(J.und(v[1])?100:v[1],.1,100),n=_t(J.und(v[2])?10:v[2],.1,100),r=_t(J.und(v[3])?0:v[3],.1,100),i=Math.sqrt(t/a),u=n/(2*Math.sqrt(t*a)),h=u<1?i*Math.sqrt(1-u*u):0,d=1,c=u<1?(u*i+-r)/h:-r+i;function o(p){var f=e?e*p/1e3:p;return u<1?f=Math.exp(-f*u*i)*(d*Math.cos(h*f)+c*Math.sin(h*f)):f=(d+c*f)*Math.exp(-f*i),p===0||p===1?p:1-f}function l(){var p=$t.springs[s];if(p)return p;for(var f=1/6,m=0,C=0;;)if(m+=f,o(m)===1){if(C++,C>=16)break}else C=0;var y=m*f*1e3;return $t.springs[s]=y,y}return e?o:l}function Fr(s){return s===void 0&&(s=10),function(e){return Math.ceil(_t(e,1e-6,1)*s)*(1/s)}}var Dr=function(){var s=11,e=1/(s-1);function v(d,c){return 1-3*c+3*d}function a(d,c){return 3*c-6*d}function t(d){return 3*d}function n(d,c,o){return((v(c,o)*d+a(c,o))*d+t(c))*d}function r(d,c,o){return 3*v(c,o)*d*d+2*a(c,o)*d+t(c)}function i(d,c,o,l,p){var f,m,C=0;do m=c+(o-c)/2,f=n(m,l,p)-d,f>0?o=m:c=m;while(Math.abs(f)>1e-7&&++C<10);return m}function u(d,c,o,l){for(var p=0;p<4;++p){var f=r(c,o,l);if(f===0)return c;var m=n(c,o,l)-d;c-=m/f}return c}function h(d,c,o,l){if(!(0<=d&&d<=1&&0<=o&&o<=1))return;var p=new Float32Array(s);if(d!==c||o!==l)for(var f=0;f<s;++f)p[f]=n(f*e,d,o);function m(C){for(var y=0,w=1,T=s-1;w!==T&&p[w]<=C;++w)y+=e;--w;var S=(C-p[w])/(p[w+1]-p[w]),x=y+S*e,M=r(x,d,o);return M>=.001?u(C,x,d,o):M===0?x:i(C,y,y+e,d,o)}return function(C){return d===c&&o===l||C===0||C===1?C:n(m(C),c,l)}}return h}(),Je=function(){var s={linear:function(){return function(a){return a}}},e={Sine:function(){return function(a){return 1-Math.cos(a*Math.PI/2)}},Expo:function(){return function(a){return a?Math.pow(2,10*a-10):0}},Circ:function(){return function(a){return 1-Math.sqrt(1-a*a)}},Back:function(){return function(a){return a*a*(3*a-2)}},Bounce:function(){return function(a){for(var t,n=4;a<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-a,2)}},Elastic:function(a,t){a===void 0&&(a=1),t===void 0&&(t=.5);var n=_t(a,1,10),r=_t(t,.1,2);return function(i){return i===0||i===1?i:-n*Math.pow(2,10*(i-1))*Math.sin((i-1-r/(Math.PI*2)*Math.asin(1/n))*(Math.PI*2)/r)}}},v=["Quad","Cubic","Quart","Quint"];return v.forEach(function(a,t){e[a]=function(){return function(n){return Math.pow(n,t+2)}}}),Object.keys(e).forEach(function(a){var t=e[a];s["easeIn"+a]=t,s["easeOut"+a]=function(n,r){return function(i){return 1-t(n,r)(1-i)}},s["easeInOut"+a]=function(n,r){return function(i){return i<.5?t(n,r)(i*2)/2:1-t(n,r)(i*-2+2)/2}},s["easeOutIn"+a]=function(n,r){return function(i){return i<.5?(1-t(n,r)(1-i*2))/2:(t(n,r)(i*2-1)+1)/2}}}),s}();function ye(s,e){if(J.fnc(s))return s;var v=s.split("(")[0],a=Je[v],t=je(s);switch(v){case"spring":return be(s,e);case"cubicBezier":return ae(Dr,t);case"steps":return ae(Fr,t);default:return ae(a,t)}}function qe(s){try{var e=document.querySelectorAll(s);return e}catch{return}}function re(s,e){for(var v=s.length,a=arguments.length>=2?arguments[1]:void 0,t=[],n=0;n<v;n++)if(n in s){var r=s[n];e.call(a,r,n,s)&&t.push(r)}return t}function ne(s){return s.reduce(function(e,v){return e.concat(J.arr(v)?ne(v):v)},[])}function _e(s){return J.arr(s)?s:(J.str(s)&&(s=qe(s)||s),s instanceof NodeList||s instanceof HTMLCollection?[].slice.call(s):[s])}function xe(s,e){return s.some(function(v){return v===e})}function Ae(s){var e={};for(var v in s)e[v]=s[v];return e}function de(s,e){var v=Ae(s);for(var a in s)v[a]=e.hasOwnProperty(a)?e[a]:s[a];return v}function ie(s,e){var v=Ae(s);for(var a in e)v[a]=J.und(s[a])?e[a]:s[a];return v}function Or(s){var e=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(s);return e?"rgba("+e[1]+",1)":s}function Br(s){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,v=s.replace(e,function(i,u,h,d){return u+u+h+h+d+d}),a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(v),t=parseInt(a[1],16),n=parseInt(a[2],16),r=parseInt(a[3],16);return"rgba("+t+","+n+","+r+",1)"}function Nr(s){var e=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(s)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(s),v=parseInt(e[1],10)/360,a=parseInt(e[2],10)/100,t=parseInt(e[3],10)/100,n=e[4]||1;function r(o,l,p){return p<0&&(p+=1),p>1&&(p-=1),p<1/6?o+(l-o)*6*p:p<1/2?l:p<2/3?o+(l-o)*(2/3-p)*6:o}var i,u,h;if(a==0)i=u=h=t;else{var d=t<.5?t*(1+a):t+a-t*a,c=2*t-d;i=r(c,d,v+1/3),u=r(c,d,v),h=r(c,d,v-1/3)}return"rgba("+i*255+","+u*255+","+h*255+","+n+")"}function Ur(s){if(J.rgb(s))return Or(s);if(J.hex(s))return Br(s);if(J.hsl(s))return Nr(s)}function Nt(s){var e=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(s);if(e)return e[1]}function Yr(s){if(zt(s,"translate")||s==="perspective")return"px";if(zt(s,"rotate")||zt(s,"skew"))return"deg"}function fe(s,e){return J.fnc(s)?s(e.target,e.id,e.total):s}function Ft(s,e){return s.getAttribute(e)}function Ee(s,e,v){var a=Nt(e);if(xe([v,"deg","rad","turn"],a))return e;var t=$t.CSS[e+v];if(!J.und(t))return t;var n=100,r=document.createElement(s.tagName),i=s.parentNode&&s.parentNode!==document?s.parentNode:document.body;i.appendChild(r),r.style.position="absolute",r.style.width=n+v;var u=n/r.offsetWidth;i.removeChild(r);var h=u*parseFloat(e);return $t.CSS[e+v]=h,h}function Qe(s,e,v){if(e in s.style){var a=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t=s.style[e]||getComputedStyle(s).getPropertyValue(a)||"0";return v?Ee(s,t,v):t}}function Se(s,e){if(J.dom(s)&&!J.inp(s)&&(!J.nil(Ft(s,e))||J.svg(s)&&s[e]))return"attribute";if(J.dom(s)&&xe(_r,e))return"transform";if(J.dom(s)&&e!=="transform"&&Qe(s,e))return"css";if(s[e]!=null)return"object"}function Ke(s){if(J.dom(s)){for(var e=s.style.transform||"",v=/(\w+)\(([^)]*)\)/g,a=new Map,t;t=v.exec(e);)a.set(t[1],t[2]);return a}}function Wr(s,e,v,a){var t=zt(e,"scale")?1:0+Yr(e),n=Ke(s).get(e)||t;return v&&(v.transforms.list.set(e,n),v.transforms.last=e),a?Ee(s,n,a):n}function Te(s,e,v,a){switch(Se(s,e)){case"transform":return Wr(s,e,a,v);case"css":return Qe(s,e,v);case"attribute":return Ft(s,e);default:return s[e]||0}}function Re(s,e){var v=/^(\*=|\+=|-=)/.exec(s);if(!v)return s;var a=Nt(s)||0,t=parseFloat(e),n=parseFloat(s.replace(v[0],""));switch(v[0][0]){case"+":return t+n+a;case"-":return t-n+a;case"*":return t*n+a}}function $e(s,e){if(J.col(s))return Ur(s);if(/\s/g.test(s))return s;var v=Nt(s),a=v?s.substr(0,s.length-v.length):s;return e?a+e:a}function Ie(s,e){return Math.sqrt(Math.pow(e.x-s.x,2)+Math.pow(e.y-s.y,2))}function Zr(s){return Math.PI*2*Ft(s,"r")}function Gr(s){return Ft(s,"width")*2+Ft(s,"height")*2}function Xr(s){return Ie({x:Ft(s,"x1"),y:Ft(s,"y1")},{x:Ft(s,"x2"),y:Ft(s,"y2")})}function tr(s){for(var e=s.points,v=0,a,t=0;t<e.numberOfItems;t++){var n=e.getItem(t);t>0&&(v+=Ie(a,n)),a=n}return v}function zr(s){var e=s.points;return tr(s)+Ie(e.getItem(e.numberOfItems-1),e.getItem(0))}function er(s){if(s.getTotalLength)return s.getTotalLength();switch(s.tagName.toLowerCase()){case"circle":return Zr(s);case"rect":return Gr(s);case"line":return Xr(s);case"polyline":return tr(s);case"polygon":return zr(s)}}function Hr(s){var e=er(s);return s.setAttribute("stroke-dasharray",e),e}function jr(s){for(var e=s.parentNode;J.svg(e)&&J.svg(e.parentNode);)e=e.parentNode;return e}function rr(s,e){var v=e||{},a=v.el||jr(s),t=a.getBoundingClientRect(),n=Ft(a,"viewBox"),r=t.width,i=t.height,u=v.viewBox||(n?n.split(" "):[0,0,r,i]);return{el:a,viewBox:u,x:u[0]/1,y:u[1]/1,w:r,h:i,vW:u[2],vH:u[3]}}function br(s,e){var v=J.str(s)?qe(s)[0]:s,a=e||100;return function(t){return{property:t,el:v,svg:rr(v),totalLength:er(v)*(a/100)}}}function Jr(s,e,v){function a(d){d===void 0&&(d=0);var c=e+d>=1?e+d:0;return s.el.getPointAtLength(c)}var t=rr(s.el,s.svg),n=a(),r=a(-1),i=a(1),u=v?1:t.w/t.vW,h=v?1:t.h/t.vH;switch(s.property){case"x":return(n.x-t.x)*u;case"y":return(n.y-t.y)*h;case"angle":return Math.atan2(i.y-r.y,i.x-r.x)*180/Math.PI}}function Fe(s,e){var v=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,a=$e(J.pth(s)?s.totalLength:s,e)+"";return{original:a,numbers:a.match(v)?a.match(v).map(Number):[0],strings:J.str(s)||e?a.split(v):[]}}function Le(s){var e=s?ne(J.arr(s)?s.map(_e):_e(s)):[];return re(e,function(v,a,t){return t.indexOf(v)===a})}function nr(s){var e=Le(s);return e.map(function(v,a){return{target:v,id:a,total:e.length,transforms:{list:Ke(v)}}})}function qr(s,e){var v=Ae(e);if(/^spring/.test(v.easing)&&(v.duration=be(v.easing)),J.arr(s)){var a=s.length,t=a===2&&!J.obj(s[0]);t?s={value:s}:J.fnc(e.duration)||(v.duration=e.duration/a)}var n=J.arr(s)?s:[s];return n.map(function(r,i){var u=J.obj(r)&&!J.pth(r)?r:{value:r};return J.und(u.delay)&&(u.delay=i?0:e.delay),J.und(u.endDelay)&&(u.endDelay=i===n.length-1?e.endDelay:0),u}).map(function(r){return ie(r,v)})}function Qr(s){for(var e=re(ne(s.map(function(n){return Object.keys(n)})),function(n){return J.key(n)}).reduce(function(n,r){return n.indexOf(r)<0&&n.push(r),n},[]),v={},a=function(n){var r=e[n];v[r]=s.map(function(i){var u={};for(var h in i)J.key(h)?h==r&&(u.value=i[h]):u[h]=i[h];return u})},t=0;t<e.length;t++)a(t);return v}function Kr(s,e){var v=[],a=e.keyframes;a&&(e=ie(Qr(a),e));for(var t in e)J.key(t)&&v.push({name:t,tweens:qr(e[t],s)});return v}function $r(s,e){var v={};for(var a in s){var t=fe(s[a],e);J.arr(t)&&(t=t.map(function(n){return fe(n,e)}),t.length===1&&(t=t[0])),v[a]=t}return v.duration=parseFloat(v.duration),v.delay=parseFloat(v.delay),v}function tn(s,e){var v;return s.tweens.map(function(a){var t=$r(a,e),n=t.value,r=J.arr(n)?n[1]:n,i=Nt(r),u=Te(e.target,s.name,i,e),h=v?v.to.original:u,d=J.arr(n)?n[0]:h,c=Nt(d)||Nt(u),o=i||c;return J.und(r)&&(r=h),t.from=Fe(d,o),t.to=Fe(Re(r,d),o),t.start=v?v.end:0,t.end=t.start+t.delay+t.duration+t.endDelay,t.easing=ye(t.easing,t.duration),t.isPath=J.pth(n),t.isPathTargetInsideSVG=t.isPath&&J.svg(e.target),t.isColor=J.col(t.from.original),t.isColor&&(t.round=1),v=t,t})}var ir={css:function(s,e,v){return s.style[e]=v},attribute:function(s,e,v){return s.setAttribute(e,v)},object:function(s,e,v){return s[e]=v},transform:function(s,e,v,a,t){if(a.list.set(e,v),e===a.last||t){var n="";a.list.forEach(function(r,i){n+=i+"("+r+") "}),s.style.transform=n}}};function ar(s,e){var v=nr(s);v.forEach(function(a){for(var t in e){var n=fe(e[t],a),r=a.target,i=Nt(n),u=Te(r,t,i,a),h=i||Nt(u),d=Re($e(n,h),u),c=Se(r,t);ir[c](r,t,d,a.transforms,!0)}})}function en(s,e){var v=Se(s.target,e.name);if(v){var a=tn(e,s),t=a[a.length-1];return{type:v,property:e.name,animatable:s,tweens:a,duration:t.end,delay:a[0].delay,endDelay:t.endDelay}}}function rn(s,e){return re(ne(s.map(function(v){return e.map(function(a){return en(v,a)})})),function(v){return!J.und(v)})}function sr(s,e){var v=s.length,a=function(n){return n.timelineOffset?n.timelineOffset:0},t={};return t.duration=v?Math.max.apply(Math,s.map(function(n){return a(n)+n.duration})):e.duration,t.delay=v?Math.min.apply(Math,s.map(function(n){return a(n)+n.delay})):e.delay,t.endDelay=v?t.duration-Math.max.apply(Math,s.map(function(n){return a(n)+n.duration-n.endDelay})):e.endDelay,t}var De=0;function nn(s){var e=de(He,s),v=de(ge,s),a=Kr(v,s),t=nr(s.targets),n=rn(t,a),r=sr(n,v),i=De;return De++,ie(e,{id:i,children:[],animatables:t,animations:n,duration:r.duration,delay:r.delay,endDelay:r.endDelay})}var kt=[],or=function(){var s;function e(){!s&&(!Oe()||!et.suspendWhenDocumentHidden)&&kt.length>0&&(s=requestAnimationFrame(v))}function v(t){for(var n=kt.length,r=0;r<n;){var i=kt[r];i.paused?(kt.splice(r,1),n--):(i.tick(t),r++)}s=r>0?requestAnimationFrame(v):void 0}function a(){et.suspendWhenDocumentHidden&&(Oe()?s=cancelAnimationFrame(s):(kt.forEach(function(t){return t._onDocumentVisibility()}),or()))}return typeof document<"u"&&document.addEventListener("visibilitychange",a),e}();function Oe(){return!!document&&document.hidden}function et(s){s===void 0&&(s={});var e=0,v=0,a=0,t,n=0,r=null;function i(y){var w=window.Promise&&new Promise(function(T){return r=T});return y.finished=w,w}var u=nn(s);i(u);function h(){var y=u.direction;y!=="alternate"&&(u.direction=y!=="normal"?"normal":"reverse"),u.reversed=!u.reversed,t.forEach(function(w){return w.reversed=u.reversed})}function d(y){return u.reversed?u.duration-y:y}function c(){e=0,v=d(u.currentTime)*(1/et.speed)}function o(y,w){w&&w.seek(y-w.timelineOffset)}function l(y){if(u.reversePlayback)for(var T=n;T--;)o(y,t[T]);else for(var w=0;w<n;w++)o(y,t[w])}function p(y){for(var w=0,T=u.animations,S=T.length;w<S;){var x=T[w],M=x.animatable,A=x.tweens,P=A.length-1,R=A[P];P&&(R=re(A,function(k){return y<k.end})[0]||R);for(var D=_t(y-R.start-R.delay,0,R.duration)/R.duration,I=isNaN(D)?1:R.easing(D),V=R.to.strings,N=R.round,L=[],g=R.to.numbers.length,E=void 0,F=0;F<g;F++){var _=void 0,G=R.to.numbers[F],Y=R.from.numbers[F]||0;R.isPath?_=Jr(R.value,I*G,R.isPathTargetInsideSVG):_=Y+I*(G-Y),N&&(R.isColor&&F>2||(_=Math.round(_*N)/N)),L.push(_)}var Z=V.length;if(!Z)E=L[0];else{E=V[0];for(var W=0;W<Z;W++){V[W];var U=V[W+1],O=L[W];isNaN(O)||(U?E+=O+U:E+=O+" ")}}ir[x.type](M.target,x.property,E,M.transforms),x.currentValue=E,w++}}function f(y){u[y]&&!u.passThrough&&u[y](u)}function m(){u.remaining&&u.remaining!==!0&&u.remaining--}function C(y){var w=u.duration,T=u.delay,S=w-u.endDelay,x=d(y);u.progress=_t(x/w*100,0,100),u.reversePlayback=x<u.currentTime,t&&l(x),!u.began&&u.currentTime>0&&(u.began=!0,f("begin")),!u.loopBegan&&u.currentTime>0&&(u.loopBegan=!0,f("loopBegin")),x<=T&&u.currentTime!==0&&p(0),(x>=S&&u.currentTime!==w||!w)&&p(w),x>T&&x<S?(u.changeBegan||(u.changeBegan=!0,u.changeCompleted=!1,f("changeBegin")),f("change"),p(x)):u.changeBegan&&(u.changeCompleted=!0,u.changeBegan=!1,f("changeComplete")),u.currentTime=_t(x,0,w),u.began&&f("update"),y>=w&&(v=0,m(),u.remaining?(e=a,f("loopComplete"),u.loopBegan=!1,u.direction==="alternate"&&h()):(u.paused=!0,u.completed||(u.completed=!0,f("loopComplete"),f("complete"),!u.passThrough&&"Promise"in window&&(r(),i(u)))))}return u.reset=function(){var y=u.direction;u.passThrough=!1,u.currentTime=0,u.progress=0,u.paused=!0,u.began=!1,u.loopBegan=!1,u.changeBegan=!1,u.completed=!1,u.changeCompleted=!1,u.reversePlayback=!1,u.reversed=y==="reverse",u.remaining=u.loop,t=u.children,n=t.length;for(var w=n;w--;)u.children[w].reset();(u.reversed&&u.loop!==!0||y==="alternate"&&u.loop===1)&&u.remaining++,p(u.reversed?u.duration:0)},u._onDocumentVisibility=c,u.set=function(y,w){return ar(y,w),u},u.tick=function(y){a=y,e||(e=a),C((a+(v-e))*et.speed)},u.seek=function(y){C(d(y))},u.pause=function(){u.paused=!0,c()},u.play=function(){u.paused&&(u.completed&&u.reset(),u.paused=!1,kt.push(u),c(),or())},u.reverse=function(){h(),u.completed=!u.reversed,c()},u.restart=function(){u.reset(),u.play()},u.remove=function(y){var w=Le(y);hr(w,u)},u.reset(),u.autoplay&&u.play(),u}function Be(s,e){for(var v=e.length;v--;)xe(s,e[v].animatable.target)&&e.splice(v,1)}function hr(s,e){var v=e.animations,a=e.children;Be(s,v);for(var t=a.length;t--;){var n=a[t],r=n.animations;Be(s,r),!r.length&&!n.children.length&&a.splice(t,1)}!v.length&&!a.length&&e.pause()}function an(s){for(var e=Le(s),v=kt.length;v--;){var a=kt[v];hr(e,a)}}function sn(s,e){e===void 0&&(e={});var v=e.direction||"normal",a=e.easing?ye(e.easing):null,t=e.grid,n=e.axis,r=e.from||0,i=r==="first",u=r==="center",h=r==="last",d=J.arr(s),c=parseFloat(d?s[0]:s),o=d?parseFloat(s[1]):0,l=Nt(d?s[1]:s)||0,p=e.start||0+(d?c:0),f=[],m=0;return function(C,y,w){if(i&&(r=0),u&&(r=(w-1)/2),h&&(r=w-1),!f.length){for(var T=0;T<w;T++){if(!t)f.push(Math.abs(r-T));else{var S=u?(t[0]-1)/2:r%t[0],x=u?(t[1]-1)/2:Math.floor(r/t[0]),M=T%t[0],A=Math.floor(T/t[0]),P=S-M,R=x-A,D=Math.sqrt(P*P+R*R);n==="x"&&(D=-P),n==="y"&&(D=-R),f.push(D)}m=Math.max.apply(Math,f)}a&&(f=f.map(function(V){return a(V/m)*m})),v==="reverse"&&(f=f.map(function(V){return n?V<0?V*-1:-V:Math.abs(m-V)}))}var I=d?(o-c)/m:c;return p+I*(Math.round(f[y]*100)/100)+l}}function on(s){s===void 0&&(s={});var e=et(s);return e.duration=0,e.add=function(v,a){var t=kt.indexOf(e),n=e.children;t>-1&&kt.splice(t,1);function r(o){o.passThrough=!0}for(var i=0;i<n.length;i++)r(n[i]);var u=ie(v,de(ge,s));u.targets=u.targets||s.targets;var h=e.duration;u.autoplay=!1,u.direction=e.direction,u.timelineOffset=J.und(a)?h:Re(a,h),r(e),e.seek(u.timelineOffset);var d=et(u);r(d),n.push(d);var c=sr(n,s);return e.delay=c.delay,e.endDelay=c.endDelay,e.duration=c.duration,e.seek(0),e.reset(),e.autoplay&&e.play(),e},e}et.version="3.2.1";et.speed=1;et.suspendWhenDocumentHidden=!0;et.running=kt;et.remove=an;et.get=Te;et.set=ar;et.convertPx=Ee;et.path=br;et.setDashoffset=Hr;et.stagger=sn;et.timeline=on;et.easing=ye;et.penner=Je;et.random=function(s,e){return Math.floor(Math.random()*(e-s+1))+s};const hn=Er({selectedPosts:[],currTag:"",currPost:{id:0,title:"",content:"",href:"",create:0,update:0,tags:[],wordCount:0,cover:"",excerpt:"",pinned:!1},currPage:1,searchDialog:!1,splashLoading:!0,fireworksEnabled:!0,SpinePlayerEnabled:!0,showDropdownMenu:!1,darkMode:"system"});function Lt(){return{state:hn}}const ln=["innerHTML"],un={__name:"Splash",setup(s){const e=lt(`<svg viewBox="0 0 1728 1117" preserveAspectRatio="xMinYMin slice" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_2_5)">
<g class="triangle-group">
<path d="M606 -123L1061 666H151L606 -123Z"/>
<path d="M190.15 144L67.3 -68.94L313 -68.94L190.15 144Z"/>
<path d="M1424.17 339L1249.35 35.97L1599 35.97L1424.17 339Z"/>
<path d="M-96.7 513.333L-216.4 305.853H23L-96.7 513.333Z"/>
<path d="M502.825 603.83L391 410L614.65 410L502.825 603.83Z"/>
<path d="M1228.45 648.333L1048.9 337.113L1408 337.113L1228.45 648.333Z"/>
<path d="M246.375 925.667L96.75 666.317H396L246.375 925.667Z"/>
<path d="M606.375 1048.45L504 871L708.75 871L606.375 1048.45Z"/>
<path d="M1376.5 960L1219 687H1534L1376.5 960Z"/>
<path d="M365.395 170L503.791 409.885H227L365.395 170Z"/>
<path d="M1049.36 337L1198.71 595.886H900L1049.36 337Z"/>
<path d="M1248.81 36L1340.61 195.132H1157L1248.81 36Z"/>
<path d="M503.99 680.333L614.981 872.716H393L503.99 680.333Z"/>
<path d="M870.433 698.333L997.866 919.218H743L870.433 698.333Z"/>
<path d="M1419.1 487L1534.2 686.508H1304L1419.1 487Z"/>
<path d="M312.914 809L445.828 1039.38H180L312.914 809Z"/>
<path d="M1225.51 1053.67L1368.01 1300.68H1083L1225.51 1053.67Z"/>
<path d="M1550.51 792L1693.01 1039.01H1408L1550.51 792Z"/>
</g>
<g id="breathingParts">
<path class="circle-path" fill-rule="evenodd" clip-rule="evenodd" d="M864 769C979.98 769 1074 674.98 1074 559C1074 443.02 979.98 349 864 349C748.02 349 654 443.02 654 559C654 674.98 748.02 769 864 769ZM864 749.909C969.436 749.909 1054.91 664.436 1054.91 559C1054.91 453.564 969.436 368.091 864 368.091C758.564 368.091 673.091 453.564 673.091 559C673.091 664.436 758.564 749.909 864 749.909Z"/>
<path class="led-path" class="led-path" d="M934.636 392.273H792.727L757.091 447H970.909L934.636 392.273Z"/>
<path class="led-path" d="M969.636 450.182H897.727L934.636 504.273L969.636 450.182Z"/>
<path class="led-path" d="M792.091 500.455L828.364 447L900.909 555.182L863.364 609.273L792.091 500.455Z"/>
<path class="led-path" d="M900.909 667.182L865.909 612.455L903.5 558.364L973.455 667.182L937.818 721.909H796.545L760.273 667.182L796.545 612.455L832.818 667.182H900.909Z"/>
</g>
<defs>
  <filter id="glow">
    <feGaussianBlur stdDeviation="4" result="blur"/>
    <feFlood class="glow-color" flood-opacity="2.5"/>
    <feComposite in2="blur" operator="in"/>
    <feComposite in="SourceGraphic"/>
  </filter>
</defs>
</svg>
`),v=lt(!0),{state:a}=Lt(),t=()=>{et({targets:"#breathingParts",opacity:[.3,1],easing:"easeInOutSine",duration:500,direction:"alternate",loop:!0})},n=()=>{et({targets:".splash-container",opacity:0,duration:500,easing:"easeInOutQuad",complete:()=>{v.value=!1}}),a.splashLoading=!1},r=i=>{i.preventDefault()};return At(()=>{t(),window.addEventListener("wheel",r,{passive:!1}),setTimeout(()=>{n(),window.removeEventListener("wheel",r)},Math.floor(Math.random()*300)+1200)}),Xt(()=>{window.removeEventListener("wheel",r)}),(i,u)=>v.value?(b(),$("div",{key:0,class:"splash-container",innerHTML:e.value},null,8,ln)):Rt("",!0)}},cn=gt(un,[["__scopeId","data-v-0f16c3a5"]]),dn="data:image/svg+xml,%3csvg%20width='96'%20height='97'%20viewBox='0%200%2096%2097'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0%203L10%2013L17%2019.5L39.5%2042L28.5%2057.5L22.5%2066.5L3.5%2096.5L28%2071L35%2063.5L48.5%2048.5L74%2068L81%2072.5L95.5%2081L83.5%2069L78%2063.5L53.5%2041L64.5%2025L69.5%2017.5L79.5%200L65%2014L58.5%2020.5L46%2034L19.5%2015.5L12%2010.5L0%203Z'%20fill='%23128AFA'/%3e%3cpath%20d='M57.5%2081.5C68.7%2081.5%2075%2078.5%2081%2072.5L74%2068C61.3607%2079.6749%2043%2068.5%2035%2063.5L28%2071C37%2078.5%2051.3333%2081.5%2057.5%2081.5Z'%20fill='%232B2B2B'/%3e%3cpath%20d='M87.5%2053.5C87.5%2036%2075%2022.5%2069.5%2017.5L64.5%2025C83.7%2043.8%2081.6667%2058.3333%2078%2063.5L83.5%2069C87%2064.5%2087.5%2056%2087.5%2053.5Z'%20fill='%232B2B2B'/%3e%3cpath%20d='M34%202.5C21%202.5%2015%207.5%2012%2010.5L19.5%2015.5C33.5%204.3%2051.6667%2014.3333%2058.5%2020.5L65%2014C57%208.5%2047%202.5%2034%202.5Z'%20fill='%232B2B2B'/%3e%3cpath%20d='M5%2030.5C5%2048.9%2017.5%2061.5%2022.5%2066.5L28.5%2057.5C24%2052.5%2011.5%2040%2017%2019.5L10%2013C6%2018.6%204.66667%2027.5%205%2030.5Z'%20fill='%232B2B2B'/%3e%3c/svg%3e",jt=JSON.parse('[{"id":1,"title":"关于我","content":"\\n关于我\\n\\n---\\n\\n关于我","href":"posts/about.html","create":1758499200000,"update":1758502933590,"tags":["about"],"wordCount":6,"excerpt":"\\n关于我\\n\\n","pinned":true},{"id":2,"title":"资源示例（请在tags中加入resources）","content":"\\n资源示例（请在tags中加入resources）\\n\\n---\\n\\n资源示例（请在tags中加入resources）","href":"posts/resource.html","create":1758499200000,"update":1758503110794,"tags":["resources"],"wordCount":22,"excerpt":"\\n资源示例（请在tags中加入resources）\\n\\n","pinned":true}]'),fn="ENTRIES",lr="KEYS",ur="VALUES",Ct="";class se{constructor(e,v){const a=e._tree,t=Array.from(a.keys());this.set=e,this._type=v,this._path=t.length>0?[{node:a,keys:t}]:[]}next(){const e=this.dive();return this.backtrack(),e}dive(){if(this._path.length===0)return{done:!0,value:void 0};const{node:e,keys:v}=Zt(this._path);if(Zt(v)===Ct)return{done:!1,value:this.result()};const a=e.get(Zt(v));return this._path.push({node:a,keys:Array.from(a.keys())}),this.dive()}backtrack(){if(this._path.length===0)return;const e=Zt(this._path).keys;e.pop(),!(e.length>0)&&(this._path.pop(),this.backtrack())}key(){return this.set._prefix+this._path.map(({keys:e})=>Zt(e)).filter(e=>e!==Ct).join("")}value(){return Zt(this._path).node.get(Ct)}result(){switch(this._type){case ur:return this.value();case lr:return this.key();default:return[this.key(),this.value()]}}[Symbol.iterator](){return this}}const Zt=s=>s[s.length-1],vn=(s,e,v)=>{const a=new Map;if(e===void 0)return a;const t=e.length+1,n=t+v,r=new Uint8Array(n*t).fill(v+1);for(let i=0;i<t;++i)r[i]=i;for(let i=1;i<n;++i)r[i*t]=i;return cr(s,e,v,a,r,1,t,""),a},cr=(s,e,v,a,t,n,r,i)=>{const u=n*r;t:for(const h of s.keys())if(h===Ct){const d=t[u-1];d<=v&&a.set(i,[s.get(h),d])}else{let d=n;for(let c=0;c<h.length;++c,++d){const o=h[c],l=r*d,p=l-r;let f=t[l];const m=Math.max(0,d-v-1),C=Math.min(r-1,d+v);for(let y=m;y<C;++y){const w=o!==e[y],T=t[p+y]+ +w,S=t[p+y+1]+1,x=t[l+y]+1,M=t[l+y+1]=Math.min(T,S,x);M<f&&(f=M)}if(f>v)continue t}cr(s.get(h),e,v,a,t,d,r,i+h)}};class Yt{constructor(e=new Map,v=""){this._size=void 0,this._tree=e,this._prefix=v}atPrefix(e){if(!e.startsWith(this._prefix))throw new Error("Mismatched prefix");const[v,a]=te(this._tree,e.slice(this._prefix.length));if(v===void 0){const[t,n]=Pe(a);for(const r of t.keys())if(r!==Ct&&r.startsWith(n)){const i=new Map;return i.set(r.slice(n.length),t.get(r)),new Yt(i,e)}}return new Yt(v,e)}clear(){this._size=void 0,this._tree.clear()}delete(e){return this._size=void 0,pn(this._tree,e)}entries(){return new se(this,fn)}forEach(e){for(const[v,a]of this)e(v,a,this)}fuzzyGet(e,v){return vn(this._tree,e,v)}get(e){const v=ve(this._tree,e);return v!==void 0?v.get(Ct):void 0}has(e){const v=ve(this._tree,e);return v!==void 0&&v.has(Ct)}keys(){return new se(this,lr)}set(e,v){if(typeof e!="string")throw new Error("key must be a string");return this._size=void 0,oe(this._tree,e).set(Ct,v),this}get size(){if(this._size)return this._size;this._size=0;const e=this.entries();for(;!e.next().done;)this._size+=1;return this._size}update(e,v){if(typeof e!="string")throw new Error("key must be a string");this._size=void 0;const a=oe(this._tree,e);return a.set(Ct,v(a.get(Ct))),this}fetch(e,v){if(typeof e!="string")throw new Error("key must be a string");this._size=void 0;const a=oe(this._tree,e);let t=a.get(Ct);return t===void 0&&a.set(Ct,t=v()),t}values(){return new se(this,ur)}[Symbol.iterator](){return this.entries()}static from(e){const v=new Yt;for(const[a,t]of e)v.set(a,t);return v}static fromObject(e){return Yt.from(Object.entries(e))}}const te=(s,e,v=[])=>{if(e.length===0||s==null)return[s,v];for(const a of s.keys())if(a!==Ct&&e.startsWith(a))return v.push([s,a]),te(s.get(a),e.slice(a.length),v);return v.push([s,e]),te(void 0,"",v)},ve=(s,e)=>{if(e.length===0||s==null)return s;for(const v of s.keys())if(v!==Ct&&e.startsWith(v))return ve(s.get(v),e.slice(v.length))},oe=(s,e)=>{const v=e.length;t:for(let a=0;s&&a<v;){for(const n of s.keys())if(n!==Ct&&e[a]===n[0]){const r=Math.min(v-a,n.length);let i=1;for(;i<r&&e[a+i]===n[i];)++i;const u=s.get(n);if(i===n.length)s=u;else{const h=new Map;h.set(n.slice(i),u),s.set(e.slice(a,a+i),h),s.delete(n),s=h}a+=i;continue t}const t=new Map;return s.set(e.slice(a),t),t}return s},pn=(s,e)=>{const[v,a]=te(s,e);if(v!==void 0){if(v.delete(Ct),v.size===0)dr(a);else if(v.size===1){const[t,n]=v.entries().next().value;fr(a,t,n)}}},dr=s=>{if(s.length===0)return;const[e,v]=Pe(s);if(e.delete(v),e.size===0)dr(s.slice(0,-1));else if(e.size===1){const[a,t]=e.entries().next().value;a!==Ct&&fr(s.slice(0,-1),a,t)}},fr=(s,e,v)=>{if(s.length===0)return;const[a,t]=Pe(s);a.set(t+e,v),a.delete(t)},Pe=s=>s[s.length-1],we="or",vr="and",mn="and_not";class Gt{constructor(e){if((e==null?void 0:e.fields)==null)throw new Error('MiniSearch: option "fields" must be provided');const v=e.autoVacuum==null||e.autoVacuum===!0?ue:e.autoVacuum;this._options={...le,...e,autoVacuum:v,searchOptions:{...Ne,...e.searchOptions||{}},autoSuggestOptions:{...xn,...e.autoSuggestOptions||{}}},this._index=new Yt,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=me,this.addFields(this._options.fields)}add(e){const{extractField:v,stringifyField:a,tokenize:t,processTerm:n,fields:r,idField:i}=this._options,u=v(e,i);if(u==null)throw new Error(`MiniSearch: document does not have ID field "${i}"`);if(this._idToShortId.has(u))throw new Error(`MiniSearch: duplicate ID ${u}`);const h=this.addDocumentId(u);this.saveStoredFields(h,e);for(const d of r){const c=v(e,d);if(c==null)continue;const o=t(a(c,d),d),l=this._fieldIds[d],p=new Set(o).size;this.addFieldLength(h,l,this._documentCount-1,p);for(const f of o){const m=n(f,d);if(Array.isArray(m))for(const C of m)this.addTerm(l,h,C);else m&&this.addTerm(l,h,m)}}}addAll(e){for(const v of e)this.add(v)}addAllAsync(e,v={}){const{chunkSize:a=10}=v,t={chunk:[],promise:Promise.resolve()},{chunk:n,promise:r}=e.reduce(({chunk:i,promise:u},h,d)=>(i.push(h),(d+1)%a===0?{chunk:[],promise:u.then(()=>new Promise(c=>setTimeout(c,0))).then(()=>this.addAll(i))}:{chunk:i,promise:u}),t);return r.then(()=>this.addAll(n))}remove(e){const{tokenize:v,processTerm:a,extractField:t,stringifyField:n,fields:r,idField:i}=this._options,u=t(e,i);if(u==null)throw new Error(`MiniSearch: document does not have ID field "${i}"`);const h=this._idToShortId.get(u);if(h==null)throw new Error(`MiniSearch: cannot remove document with ID ${u}: it is not in the index`);for(const d of r){const c=t(e,d);if(c==null)continue;const o=v(n(c,d),d),l=this._fieldIds[d],p=new Set(o).size;this.removeFieldLength(h,l,this._documentCount,p);for(const f of o){const m=a(f,d);if(Array.isArray(m))for(const C of m)this.removeTerm(l,h,C);else m&&this.removeTerm(l,h,m)}}this._storedFields.delete(h),this._documentIds.delete(h),this._idToShortId.delete(u),this._fieldLength.delete(h),this._documentCount-=1}removeAll(e){if(e)for(const v of e)this.remove(v);else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new Yt,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}}discard(e){const v=this._idToShortId.get(e);if(v==null)throw new Error(`MiniSearch: cannot discard document with ID ${e}: it is not in the index`);this._idToShortId.delete(e),this._documentIds.delete(v),this._storedFields.delete(v),(this._fieldLength.get(v)||[]).forEach((a,t)=>{this.removeFieldLength(v,t,this._documentCount,a)}),this._fieldLength.delete(v),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()}maybeAutoVacuum(){if(this._options.autoVacuum===!1)return;const{minDirtFactor:e,minDirtCount:v,batchSize:a,batchWait:t}=this._options.autoVacuum;this.conditionalVacuum({batchSize:a,batchWait:t},{minDirtCount:v,minDirtFactor:e})}discardAll(e){const v=this._options.autoVacuum;try{this._options.autoVacuum=!1;for(const a of e)this.discard(a)}finally{this._options.autoVacuum=v}this.maybeAutoVacuum()}replace(e){const{idField:v,extractField:a}=this._options,t=a(e,v);this.discard(t),this.add(e)}vacuum(e={}){return this.conditionalVacuum(e)}conditionalVacuum(e,v){return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&v,this._enqueuedVacuum!=null?this._enqueuedVacuum:(this._enqueuedVacuum=this._currentVacuum.then(()=>{const a=this._enqueuedVacuumConditions;return this._enqueuedVacuumConditions=me,this.performVacuuming(e,a)}),this._enqueuedVacuum)):this.vacuumConditionsMet(v)===!1?Promise.resolve():(this._currentVacuum=this.performVacuuming(e),this._currentVacuum)}async performVacuuming(e,v){const a=this._dirtCount;if(this.vacuumConditionsMet(v)){const t=e.batchSize||pe.batchSize,n=e.batchWait||pe.batchWait;let r=1;for(const[i,u]of this._index){for(const[h,d]of u)for(const[c]of d)this._documentIds.has(c)||(d.size<=1?u.delete(h):d.delete(c));this._index.get(i).size===0&&this._index.delete(i),r%t===0&&await new Promise(h=>setTimeout(h,n)),r+=1}this._dirtCount-=a}await null,this._currentVacuum=this._enqueuedVacuum,this._enqueuedVacuum=null}vacuumConditionsMet(e){if(e==null)return!0;let{minDirtCount:v,minDirtFactor:a}=e;return v=v||ue.minDirtCount,a=a||ue.minDirtFactor,this.dirtCount>=v&&this.dirtFactor>=a}get isVacuuming(){return this._currentVacuum!=null}get dirtCount(){return this._dirtCount}get dirtFactor(){return this._dirtCount/(1+this._documentCount+this._dirtCount)}has(e){return this._idToShortId.has(e)}getStoredFields(e){const v=this._idToShortId.get(e);if(v!=null)return this._storedFields.get(v)}search(e,v={}){const{searchOptions:a}=this._options,t={...a,...v},n=this.executeQuery(e,v),r=[];for(const[i,{score:u,terms:h,match:d}]of n){const c=h.length||1,o={id:this._documentIds.get(i),score:u*c,terms:Object.keys(d),queryTerms:h,match:d};Object.assign(o,this._storedFields.get(i)),(t.filter==null||t.filter(o))&&r.push(o)}return e===Gt.wildcard&&t.boostDocument==null||r.sort(Ye),r}autoSuggest(e,v={}){v={...this._options.autoSuggestOptions,...v};const a=new Map;for(const{score:n,terms:r}of this.search(e,v)){const i=r.join(" "),u=a.get(i);u!=null?(u.score+=n,u.count+=1):a.set(i,{score:n,terms:r,count:1})}const t=[];for(const[n,{score:r,terms:i,count:u}]of a)t.push({suggestion:n,terms:i,score:r/u});return t.sort(Ye),t}get documentCount(){return this._documentCount}get termCount(){return this._index.size}static loadJSON(e,v){if(v==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(e),v)}static async loadJSONAsync(e,v){if(v==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJSAsync(JSON.parse(e),v)}static getDefault(e){if(le.hasOwnProperty(e))return he(le,e);throw new Error(`MiniSearch: unknown option "${e}"`)}static loadJS(e,v){const{index:a,documentIds:t,fieldLength:n,storedFields:r,serializationVersion:i}=e,u=this.instantiateMiniSearch(e,v);u._documentIds=Jt(t),u._fieldLength=Jt(n),u._storedFields=Jt(r);for(const[h,d]of u._documentIds)u._idToShortId.set(d,h);for(const[h,d]of a){const c=new Map;for(const o of Object.keys(d)){let l=d[o];i===1&&(l=l.ds),c.set(parseInt(o,10),Jt(l))}u._index.set(h,c)}return u}static async loadJSAsync(e,v){const{index:a,documentIds:t,fieldLength:n,storedFields:r,serializationVersion:i}=e,u=this.instantiateMiniSearch(e,v);u._documentIds=await qt(t),u._fieldLength=await qt(n),u._storedFields=await qt(r);for(const[d,c]of u._documentIds)u._idToShortId.set(c,d);let h=0;for(const[d,c]of a){const o=new Map;for(const l of Object.keys(c)){let p=c[l];i===1&&(p=p.ds),o.set(parseInt(l,10),await qt(p))}++h%1e3===0&&await pr(0),u._index.set(d,o)}return u}static instantiateMiniSearch(e,v){const{documentCount:a,nextId:t,fieldIds:n,averageFieldLength:r,dirtCount:i,serializationVersion:u}=e;if(u!==1&&u!==2)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");const h=new Gt(v);return h._documentCount=a,h._nextId=t,h._idToShortId=new Map,h._fieldIds=n,h._avgFieldLength=r,h._dirtCount=i||0,h._index=new Yt,h}executeQuery(e,v={}){if(e===Gt.wildcard)return this.executeWildcardQuery(v);if(typeof e!="string"){const o={...v,...e,queries:void 0},l=e.queries.map(p=>this.executeQuery(p,o));return this.combineResults(l,o.combineWith)}const{tokenize:a,processTerm:t,searchOptions:n}=this._options,r={tokenize:a,processTerm:t,...n,...v},{tokenize:i,processTerm:u}=r,c=i(e).flatMap(o=>u(o)).filter(o=>!!o).map(yn(r)).map(o=>this.executeQuerySpec(o,r));return this.combineResults(c,r.combineWith)}executeQuerySpec(e,v){const a={...this._options.searchOptions,...v},t=(a.fields||this._options.fields).reduce((f,m)=>({...f,[m]:he(a.boost,m)||1}),{}),{boostDocument:n,weights:r,maxFuzzy:i,bm25:u}=a,{fuzzy:h,prefix:d}={...Ne.weights,...r},c=this._index.get(e.term),o=this.termResults(e.term,e.term,1,e.termBoost,c,t,n,u);let l,p;if(e.prefix&&(l=this._index.atPrefix(e.term)),e.fuzzy){const f=e.fuzzy===!0?.2:e.fuzzy,m=f<1?Math.min(i,Math.round(e.term.length*f)):f;m&&(p=this._index.fuzzyGet(e.term,m))}if(l)for(const[f,m]of l){const C=f.length-e.term.length;if(!C)continue;p==null||p.delete(f);const y=d*f.length/(f.length+.3*C);this.termResults(e.term,f,y,e.termBoost,m,t,n,u,o)}if(p)for(const f of p.keys()){const[m,C]=p.get(f);if(!C)continue;const y=h*f.length/(f.length+C);this.termResults(e.term,f,y,e.termBoost,m,t,n,u,o)}return o}executeWildcardQuery(e){const v=new Map,a={...this._options.searchOptions,...e};for(const[t,n]of this._documentIds){const r=a.boostDocument?a.boostDocument(n,"",this._storedFields.get(t)):1;v.set(t,{score:r,terms:[],match:{}})}return v}combineResults(e,v=we){if(e.length===0)return new Map;const a=v.toLowerCase(),t=Mn[a];if(!t)throw new Error(`Invalid combination operator: ${v}`);return e.reduce(t)||new Map}toJSON(){const e=[];for(const[v,a]of this._index){const t={};for(const[n,r]of a)t[n]=Object.fromEntries(r);e.push([v,t])}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:e,serializationVersion:2}}termResults(e,v,a,t,n,r,i,u,h=new Map){if(n==null)return h;for(const d of Object.keys(r)){const c=r[d],o=this._fieldIds[d],l=n.get(o);if(l==null)continue;let p=l.size;const f=this._avgFieldLength[o];for(const m of l.keys()){if(!this._documentIds.has(m)){this.removeTerm(o,m,v),p-=1;continue}const C=i?i(this._documentIds.get(m),v,this._storedFields.get(m)):1;if(!C)continue;const y=l.get(m),w=this._fieldLength.get(m)[o],T=gn(y,p,this._documentCount,w,f,u),S=a*t*c*C*T,x=h.get(m);if(x){x.score+=S,An(x.terms,e);const M=he(x.match,v);M?M.push(d):x.match[v]=[d]}else h.set(m,{score:S,terms:[e],match:{[v]:[d]}})}}return h}addTerm(e,v,a){const t=this._index.fetch(a,We);let n=t.get(e);if(n==null)n=new Map,n.set(v,1),t.set(e,n);else{const r=n.get(v);n.set(v,(r||0)+1)}}removeTerm(e,v,a){if(!this._index.has(a)){this.warnDocumentChanged(v,e,a);return}const t=this._index.fetch(a,We),n=t.get(e);n==null||n.get(v)==null?this.warnDocumentChanged(v,e,a):n.get(v)<=1?n.size<=1?t.delete(e):n.delete(v):n.set(v,n.get(v)-1),this._index.get(a).size===0&&this._index.delete(a)}warnDocumentChanged(e,v,a){for(const t of Object.keys(this._fieldIds))if(this._fieldIds[t]===v){this._options.logger("warn",`MiniSearch: document with ID ${this._documentIds.get(e)} has changed before removal: term "${a}" was not present in field "${t}". Removing a document after it has changed can corrupt the index!`,"version_conflict");return}}addDocumentId(e){const v=this._nextId;return this._idToShortId.set(e,v),this._documentIds.set(v,e),this._documentCount+=1,this._nextId+=1,v}addFields(e){for(let v=0;v<e.length;v++)this._fieldIds[e[v]]=v}addFieldLength(e,v,a,t){let n=this._fieldLength.get(e);n==null&&this._fieldLength.set(e,n=[]),n[v]=t;const i=(this._avgFieldLength[v]||0)*a+t;this._avgFieldLength[v]=i/(a+1)}removeFieldLength(e,v,a,t){if(a===1){this._avgFieldLength[v]=0;return}const n=this._avgFieldLength[v]*a-t;this._avgFieldLength[v]=n/(a-1)}saveStoredFields(e,v){const{storeFields:a,extractField:t}=this._options;if(a==null||a.length===0)return;let n=this._storedFields.get(e);n==null&&this._storedFields.set(e,n={});for(const r of a){const i=t(v,r);i!==void 0&&(n[r]=i)}}}Gt.wildcard=Symbol("*");const he=(s,e)=>Object.prototype.hasOwnProperty.call(s,e)?s[e]:void 0,Mn={[we]:(s,e)=>{for(const v of e.keys()){const a=s.get(v);if(a==null)s.set(v,e.get(v));else{const{score:t,terms:n,match:r}=e.get(v);a.score=a.score+t,a.match=Object.assign(a.match,r),Ue(a.terms,n)}}return s},[vr]:(s,e)=>{const v=new Map;for(const a of e.keys()){const t=s.get(a);if(t==null)continue;const{score:n,terms:r,match:i}=e.get(a);Ue(t.terms,r),v.set(a,{score:t.score+n,terms:t.terms,match:Object.assign(t.match,i)})}return v},[mn]:(s,e)=>{for(const v of e.keys())s.delete(v);return s}},Cn={k:1.2,b:.7,d:.5},gn=(s,e,v,a,t,n)=>{const{k:r,b:i,d:u}=n;return Math.log(1+(v-e+.5)/(e+.5))*(u+s*(r+1)/(s+r*(1-i+i*a/t)))},yn=s=>(e,v,a)=>{const t=typeof s.fuzzy=="function"?s.fuzzy(e,v,a):s.fuzzy||!1,n=typeof s.prefix=="function"?s.prefix(e,v,a):s.prefix===!0,r=typeof s.boostTerm=="function"?s.boostTerm(e,v,a):1;return{term:e,fuzzy:t,prefix:n,termBoost:r}},le={idField:"id",extractField:(s,e)=>s[e],stringifyField:(s,e)=>s.toString(),tokenize:s=>s.split(En),processTerm:s=>s.toLowerCase(),fields:void 0,searchOptions:void 0,storeFields:[],logger:(s,e)=>{typeof(console==null?void 0:console[s])=="function"&&console[s](e)},autoVacuum:!0},Ne={combineWith:we,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:Cn},xn={combineWith:vr,prefix:(s,e,v)=>e===v.length-1},pe={batchSize:1e3,batchWait:10},me={minDirtFactor:.1,minDirtCount:20},ue={...pe,...me},An=(s,e)=>{s.includes(e)||s.push(e)},Ue=(s,e)=>{for(const v of e)s.includes(v)||s.push(v)},Ye=({score:s},{score:e})=>e-s,We=()=>new Map,Jt=s=>{const e=new Map;for(const v of Object.keys(s))e.set(parseInt(v,10),s[v]);return e},qt=async s=>{const e=new Map;let v=0;for(const a of Object.keys(s))e.set(parseInt(a,10),s[a]),++v%1e3===0&&await pr(0);return e},pr=s=>new Promise(e=>setTimeout(e,s)),En=/[\n\r\p{Z}\p{P}]+/u,Sn={class:"search-dialog"},Tn={class:"dialog-content"},Rn={class:"search-list"},In=["href"],Ln=ft({__name:"Search-Dialog",props:{modelValue:{},modelModifiers:{}},emits:Sr(["closeDialog"],["update:modelValue"]),setup(s,{emit:e}){const v=e,a=()=>{const c=document.querySelector(".search-dialog");c&&(c.classList.add("hide-dialog"),setTimeout(()=>{v("closeDialog")},200))},t=xt().site.value.base,n=new Gt({fields:["title","content"],storeFields:["title","href"],searchOptions:{fuzzy:.3}});n.addAll(jt);const r=Tr(s,"modelValue"),i=lt([]),u=lt("这里空空的");let h=null;function d(){u.value="搜索中……",h&&clearTimeout(h),h=setTimeout(()=>{i.value=n.search(r.value||"").slice(0,5),i.value.length?u.value="搜到了~":u.value="这里空空的"},500)}return At(()=>{const c=document.querySelector(".search-dialog");c&&c.classList.add("show-dialog")}),(c,o)=>(b(),$("div",Sn,[X("div",{class:"dialog-cover",onClick:a}),X("div",Tn,[X("button",{type:"button",class:"close-btn",onClick:a},"×"),o[1]||(o[1]=X("span",{class:"title"},"搜索",-1)),Ce(X("input",{type:"text",name:"",id:"search-input",placeholder:"请输入关键字","onUpdate:modelValue":o[0]||(o[0]=l=>r.value=l),onInput:d},null,544),[[Rr,r.value]]),X("ul",Rn,[X("span",null,ut(u.value),1),(b(!0),$(It,null,Bt(i.value,l=>(b(),$("li",{onClick:a},[X("a",{href:tt(t)+l.href},ut(l.title),9,In)]))),256))])])]))}}),Pn=gt(Ln,[["__scopeId","data-v-a7758603"]]),wn=ft({__name:"Music-Control",setup(s){const e=lt(!1),v=lt(null),a=()=>{v.value&&(e.value?v.value.pause():v.value.play().catch(t=>console.log("播放失败: ",t)),e.value=!e.value)};return At(()=>{v.value=document.getElementById("background-music"),v.value&&(v.value.volume=.3,v.value.pause())}),(t,n)=>(b(),$("span",{class:"music-control",onClick:a},[X("i",{class:wt(e.value?"iconfont icon-continue continue":"iconfont icon-stop stop")},null,2)]))}}),kn=gt(wn,[["__scopeId","data-v-70b0ea5d"]]),Vn=ft({__name:"Search-Button",setup(s){const{state:e}=Lt(),v=()=>{e.searchDialog=!0,e.showDropdownMenu=!1};return(a,t)=>(b(),$("span",{class:"iconfont icon-search search",onClick:v}))}}),_n=gt(Vn,[["__scopeId","data-v-20d33856"]]),Fn={class:"toggle-container"},Dn={class:"theme-select"},On={class:"select-wrapper"},Bn={class:"label"},Nn=["id","checked","onChange"],Un=["for"],Yn=ft({__name:"ToggleSwitch",setup(s){const{state:e}=Lt(),v=lt("system"),a={fireworksEnabled:"烟花",SpinePlayerEnabled:"Spine"};let t,n;At(()=>{const h=localStorage.getItem("darkMode");v.value=h||"system",t=window.matchMedia("(prefers-color-scheme: dark)"),n=d=>{if(v.value==="system"){const c=d.matches?"dark":"light";document.documentElement.setAttribute("theme",c),e.darkMode=c}},v.value==="system"&&(n(t),t.addEventListener("change",n)),u(v.value),Object.keys(a).forEach(d=>{const c=localStorage.getItem(d);c!==null&&(e[d]=JSON.parse(c))})});const r=()=>{e.darkMode=v.value,localStorage.setItem("darkMode",v.value),v.value==="system"?(n(t),t.addEventListener("change",n)):t.removeEventListener("change",n),u(v.value)},i=h=>{const d=e[h];e[h]=!d,localStorage.setItem(h,JSON.stringify(!d))},u=h=>{let d=h;h==="system"&&(d=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),document.documentElement.setAttribute("theme",d),e.darkMode=d};return(h,d)=>(b(),$("div",Fn,[X("div",Dn,[d[3]||(d[3]=X("span",{class:"label"},"主题",-1)),X("div",On,[Ce(X("select",{"onUpdate:modelValue":d[0]||(d[0]=c=>v.value=c),onChange:r},[...d[1]||(d[1]=[X("option",{value:"light"},"Arona",-1),X("option",{value:"dark"},"Plana",-1),X("option",{value:"system"},"System",-1)])],544),[[Ir,v.value]]),d[2]||(d[2]=X("span",{class:"select-arrow"},"▼",-1))])]),(b(),$(It,null,Bt(a,(c,o)=>X("div",{key:o,class:"toggle-item"},[X("span",Bn,ut(c),1),X("input",{type:"checkbox",id:o,checked:tt(e)[o],onChange:l=>i(o)},null,40,Nn),X("label",{for:o,class:"toggleSwitch"},null,8,Un)])),64))]))}}),Wn=gt(Yn,[["__scopeId","data-v-642c3c29"]]),Zn={class:"menu-content"},Gn={class:"first-row"},Xn=ft({__name:"Dropdown-Menu",setup(s){const{state:e}=Lt(),v=lt(null),a=t=>{const n=t.target,r=document.querySelector(".hamburger");r&&r.contains(n)||v.value&&!v.value.contains(n)&&e.showDropdownMenu&&(e.showDropdownMenu=!1)};return At(()=>{document.addEventListener("click",a)}),Xt(()=>{document.removeEventListener("click",a)}),(t,n)=>(b(),$("div",{class:"dropdown-menu",ref_key:"dropdownMenu",ref:v},[X("div",Zn,[X("div",Gn,[Mt(kn),Mt(_n)]),Mt(Wn)])],512))}}),zn=gt(Xn,[["__scopeId","data-v-448e3e95"]]),Hn={class:"logo"},jn={class:"menu"},bn=["href","onClick"],Jn=ft({__name:"index",setup(s){const e=xt().site.value.base,a=xt().theme.value.menuList,{state:t}=Lt(),n=()=>{t.searchDialog=!1},r=()=>{t.showDropdownMenu=!t.showDropdownMenu},i=()=>{t.currPage=1},u=h=>{h===""&&i(),h==="tags/"&&(i(),t.currTag="")};return(h,d)=>(b(),$(It,null,[X("header",{class:wt([{postViewer:tt(t).currPost.href},"container"])},[X("nav",null,[X("span",Hn,[X("img",{onDragstart:d[0]||(d[0]=ee(()=>{},["prevent"])),src:dn,alt:""},null,32)]),X("span",jn,[X("ul",null,[(b(!0),$(It,null,Bt(tt(a),c=>(b(),$("li",null,[X("a",{href:tt(e)+c.url,onClick:o=>u(c.url)},ut(c.name),9,bn)]))),256))])]),X("div",{class:wt(["hamburger",{active:tt(t).showDropdownMenu}]),onClick:r},[...d[1]||(d[1]=[X("span",{class:"line"},null,-1),X("span",{class:"line"},null,-1),X("span",{class:"line"},null,-1)])],2),Mt(zn,{showMenu:tt(t).showDropdownMenu},null,8,["showMenu"])])],2),tt(t).searchDialog?(b(),Ot(Pn,{key:0,onCloseDialog:n})):Rt("",!0)],64))}}),qn=gt(Jn,[["__scopeId","data-v-81072a44"]]),Qn="/assets/banner_video.a3M91JR5.mp4",Kn={key:0,autoplay:"",muted:"",loop:"",class:"bg-video"},$n={key:1,class:"bg-img"},ti=ft({__name:"Banner",setup(s){const v=xt().theme.value.videoBanner,{state:a}=Lt();class t{constructor(){this.K=1,this.F=15,this.speed=.1,this.noise=30,this.phase=0,this.devicePixelRatio=window.devicePixelRatio||1,this.width=this.devicePixelRatio*window.innerWidth,this.height=this.devicePixelRatio*100,this.MAX=this.height/2,this.canvas=document.getElementById("wave"),this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.width=this.width/this.devicePixelRatio+"px",this.canvas.style.height=this.height/this.devicePixelRatio+"px",this.ctx=this.canvas.getContext("2d"),this.run=!1,this.animationFrameID=null}_globalAttenuationFn(h){return Math.pow(this.K*4/(this.K*4+Math.pow(h,4)),this.K*2)}_drawLine(h,d,c,o,l){this.ctx.moveTo(0,0),this.ctx.beginPath(),this.ctx.strokeStyle=d,this.ctx.lineWidth=c||1,l=l||this.F,o=o*this.MAX||this.noise;for(let p=-this.K;p<=this.K;p+=.01){p=parseFloat(p.toFixed(2));const f=this.width*((p+this.K)/(this.K*2)),m=this.height/2+o*Math.pow(Math.sin(p*10*h),1)*Math.sin(l*p-this.phase);this.ctx.lineTo(f,m)}this.ctx.lineTo(this.width,this.height),this.ctx.lineTo(0,this.height),this.ctx.fillStyle=d,this.ctx.fill()}_clear(){this.ctx.globalCompositeOperation="destination-out",this.ctx.fillRect(0,0,this.width,this.height),this.ctx.globalCompositeOperation="source-over"}_draw(){if(!this.run)return;this.phase=(this.phase+this.speed)%(Math.PI*64),this._clear();const h=getComputedStyle(document.documentElement).getPropertyValue("--wave-color1").trim(),d=getComputedStyle(document.documentElement).getPropertyValue("--wave-color2").trim();this._drawLine(.5,h,1,.35,6),this._drawLine(1,d,1,.25,6),this.animationFrameID=requestAnimationFrame(this._draw.bind(this))}start(){this.phase=0,this.run=!0,this._draw()}stop(){this.run=!1,this._clear(),this.animationFrameID!==null&&(cancelAnimationFrame(this.animationFrameID),this.animationFrameID=null)}setNoise(h){this.noise=Math.min(h,1)*this.MAX}setSpeed(h){this.speed=h}set(h,d){this.setNoise(h),this.setSpeed(d)}}let n=null;function r(){n&&n.stop(),n=new t,n.setSpeed(.01),n.start()}function i(u,h){let d;return function(){clearTimeout(d),d=window.setTimeout(()=>{u()},h)}}return At(()=>{r(),window.addEventListener("resize",i(()=>{n&&n.stop(),r()},100))}),(u,h)=>(b(),$("div",{class:wt(["banner",{postViewer:tt(a).currPost.href,loadingComplete:!tt(a).splashLoading}])},[Lr(u.$slots,"default",{},void 0),h[1]||(h[1]=X("canvas",{id:"wave"},null,-1)),tt(v)?(b(),$("video",Kn,[...h[0]||(h[0]=[X("source",{src:Qn,type:"video/mp4"},null,-1)])])):(b(),$("div",$n))],2))}}),ei=gt(ti,[["__scopeId","data-v-408df750"]]),ri="/assets/avatar.D0Ez12Zu.webp",ni={class:"welcome-text"},ii={class:"name"},ai={class:"motto"},si=["href"],Ze=30,oi=ft({__name:"Welcome-Box",setup(s){const e=xt().theme.value,v=e.name,a=e.welcomeText,t=e.motto,n=e.social,r=lt(null),i=lt(0),u=lt(0),h=lt(0),d=C=>{r.value&&window.requestAnimationFrame(()=>{const y=r.value.getBoundingClientRect();i.value=(C.clientX-y.x-y.width/2)/Ze,u.value=-(C.clientY-y.y-y.height/2)/Ze,h.value=Math.floor(c(C.clientY-y.y-y.height/2,C.clientX-y.x-y.width/2))})},c=(C,y)=>{let T=Math.atan2(y,C)*(180/Math.PI);return T<0&&(T+=360),T},o=()=>{u.value=i.value=h.value=0};let l=0;const p=lt(""),f=t[Math.floor(Math.random()*t.length)],m=()=>{l<f.length&&(p.value+=f[l],l++,setTimeout(m,Math.random()*150+50))};return At(()=>{m()}),(C,y)=>(b(),$("div",{class:"welcome-box",ref_key:"welcomeBoxRef",ref:r,onMousemove:d,onMouseleave:o,style:ce({transform:`rotateY(${i.value}deg) rotateX(${u.value}deg)`})},[X("span",ni,ut(tt(a)),1),Mt(Kt,{name:"fade",appear:""},{default:Wt(()=>[X("div",{class:"info-box",style:ce({background:`linear-gradient(${h.value}deg, var(--infobox-background-initial), var(--infobox-background-final))`})},[X("img",{onDragstart:y[0]||(y[0]=ee(()=>{},["prevent"])),src:ri,alt:"",class:"avatar"},null,32),X("span",ii,ut(tt(v)),1),X("span",ai,[Ht(ut(p.value)+" ",1),y[1]||(y[1]=X("span",{class:"pointer"},null,-1))]),X("ul",null,[(b(!0),$(It,null,Bt(tt(n),w=>(b(),$("li",{key:w.url},[X("a",{href:w.url,target:"_blank",rel:"noopener noreferrer"},[X("i",{class:wt(`iconfont icon-${w.icon} social`)},null,2)],8,si)]))),128))])],4)]),_:1})],36))}}),hi=gt(oi,[["__scopeId","data-v-ea281406"]]),li={class:"container posts-content"},ui={key:0,class:"pinned"},ci={class:"post-header"},di={key:0,class:"cover-container"},fi=["src","alt"],vi={class:"header-content"},pi={class:"title"},mi={key:0,class:"title-dot"},Mi={class:"name"},Ci=["href"],gi={class:"meta-info-bar"},yi={class:"time-info"},xi={datetime:""},Ai={class:"wordcount seperator"},Ei={class:"tags"},Si=["href","onClick"],Ti={class:"excerpt"},Ri={key:0,class:"pagination"},Ii=["disabled"],Li={class:"page-numbers"},Pi={key:0,class:"ellipsis"},wi=["onClick"],ki={key:1,class:"ellipsis"},Vi=["disabled"],Qt=3,_i=ft({__name:"Posts-List",setup(s){const{state:e}=Lt(),{page:v}=xt(),a=xt().site.value.base;function t(f){const m=new Date(f);return new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"}).format(m)}const n=Vt(()=>v.value.filePath==="index.md"?jt:v.value.filePath==="tags/index.md"?e.selectedPosts:[]),r=lt(5),i=Vt({get:()=>e.currPage,set:f=>e.currPage=f});At(()=>{u(),window.addEventListener("popstate",()=>{u()})});function u(){const m=new URLSearchParams(window.location.search).get("page");m&&!isNaN(parseInt(m))&&parseInt(m)>0&&parseInt(m)<=p.value?e.currPage=parseInt(m):e.currPage=1}function h(f){if(f<1||f>p.value)return;e.currPage=f;const m=new URL(window.location.href);f>1?m.searchParams.set("page",f.toString()):m.searchParams.delete("page");const C=m.searchParams.get("tag");C&&m.searchParams.set("tag",C),window.history.pushState({},"",m.toString())}const d=Vt(()=>{if(p.value<=7)return Array.from({length:p.value-2},(C,y)=>y+2).filter(C=>C>1&&C<p.value);let f=Math.max(2,i.value-Math.floor(Qt/2)),m=Math.min(p.value-1,f+Qt-1);return m-f<Qt-1&&(f=Math.max(2,m-Qt+1)),Array.from({length:m-f+1},(C,y)=>f+y)}),c=Vt(()=>p.value>7&&d.value[0]>2),o=Vt(()=>p.value>7&&d.value[d.value.length-1]<p.value-1),l=Vt(()=>n.value.slice((i.value-1)*r.value,i.value*r.value)),p=Vt(()=>Math.ceil(n.value.length/r.value)||1);return bt(()=>e.selectedPosts,()=>{const m=new URLSearchParams(window.location.search).get("page"),C=Math.ceil(e.selectedPosts.length/r.value)||1;if((!m||i.value>C)&&(i.value=1,m)){const y=new URL(window.location.href);y.searchParams.delete("page"),window.history.pushState({},"",y.toString())}}),(f,m)=>(b(),$("div",li,[Mt(Pr,{class:"posts-list",name:"list",tag:"div"},{default:Wt(()=>[(b(!0),$(It,null,Bt(l.value,C=>(b(),$("article",{class:"post",key:C.href},[C.pinned?(b(),$("span",ui)):Rt("",!0),X("header",ci,[C.cover?(b(),$("div",di,[X("img",{src:C.cover,class:"cover-image",alt:C.title+"-cover",loading:"lazy"},null,8,fi)])):Rt("",!0),X("div",vi,[X("div",pi,[C.cover?Rt("",!0):(b(),$("div",mi)),X("h1",Mi,[X("a",{href:tt(a)+C.href},ut(C.title),9,Ci)])]),X("div",gi,[m[4]||(m[4]=X("span",{class:"iconfont icon-time time"},null,-1)),X("div",yi,[X("time",xi,ut(t(C.create)),1)]),X("div",Ai,"约"+ut(C.wordCount)+"字",1)]),X("ul",Ei,[(b(!0),$(It,null,Bt(C.tags,y=>(b(),$("li",null,[X("a",{href:`${tt(a)}tags/`,onClick:w=>tt(e).currTag=y},[m[5]||(m[5]=X("i",{class:"iconfont icon-tag"},null,-1)),Ht(" "+ut(y),1)],8,Si)]))),256))]),X("div",Ti,[X("p",null,ut(C.excerpt),1)])])])]))),128))]),_:1}),p.value!=1?(b(),$("div",Ri,[X("button",{disabled:i.value===1,class:wt({hide:i.value===1}),id:"up",onClick:m[0]||(m[0]=C=>h(i.value-1))},[...m[6]||(m[6]=[X("i",{class:"iconfont icon-arrow"},null,-1)])],10,Ii),X("div",Li,[X("button",{class:wt(["page-number",{active:i.value===1}]),onClick:m[1]||(m[1]=C=>h(1))}," 1 ",2),c.value?(b(),$("span",Pi,"...")):Rt("",!0),(b(!0),$(It,null,Bt(d.value,C=>(b(),$("button",{key:C,class:wt(["page-number",{active:i.value===C}]),onClick:y=>h(C)},ut(C),11,wi))),128)),o.value?(b(),$("span",ki,"...")):Rt("",!0),p.value>1?(b(),$("button",{key:2,class:wt(["page-number",{active:i.value===p.value}]),onClick:m[2]||(m[2]=C=>h(p.value))},ut(p.value),3)):Rt("",!0)]),X("button",{disabled:i.value>=p.value,class:wt({hide:i.value>=p.value}),id:"next",onClick:m[3]||(m[3]=C=>h(i.value+1))},[...m[7]||(m[7]=[X("i",{class:"iconfont icon-arrow"},null,-1)])],10,Vi)])):Rt("",!0)]))}}),Fi=gt(_i,[["__scopeId","data-v-fbbd1fe0"]]),Di={class:"tags"},Oi=["onClick"],Bi=ft({__name:"Tags",setup(s){const e=lt(null),v={},{state:a}=Lt(),t=r=>{e.value=r,a.selectedPosts=v[r]||[],a.currTag=r;const i=new URL(window.location.href);r&&r.trim()!==""?i.searchParams.set("tag",r):i.searchParams.delete("tag");const u=i.searchParams.get("page");(!u||u==="1")&&i.searchParams.delete("page"),window.history.pushState({},"",i.toString())};for(const r of jt)if(r.tags)for(const i of r.tags)v[i]||(v[i]=[]),v[i].push(r);function n(){if(typeof window<"u"){const i=new URLSearchParams(window.location.search).get("tag");if(i&&v[i])return i}return a.currTag||""}return At(()=>{const r=n();r?t(r):a.currTag&&t(a.currTag),window.addEventListener("popstate",()=>{const i=n();i!==e.value&&t(i)})}),bt(()=>a.currTag,r=>{r!==e.value&&t(r)}),Xt(()=>{t("")}),(r,i)=>(b(),$("ul",Di,[(b(),$(It,null,Bt(v,(u,h)=>X("li",{class:wt(["item",{active:e.value===h}])},[X("a",{href:"javascript:void(0)",onClick:d=>t(h)},[i[0]||(i[0]=X("i",{class:"iconfont icon-tag"},null,-1)),Ht(" "+ut(h),1)],8,Oi)],2)),64))]))}}),Ni=gt(Bi,[["__scopeId","data-v-b7d2eedc"]]);function Ui(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var mr={exports:{}},Mr={exports:{}};(function(){var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e={rotl:function(v,a){return v<<a|v>>>32-a},rotr:function(v,a){return v<<32-a|v>>>a},endian:function(v){if(v.constructor==Number)return e.rotl(v,8)&16711935|e.rotl(v,24)&4278255360;for(var a=0;a<v.length;a++)v[a]=e.endian(v[a]);return v},randomBytes:function(v){for(var a=[];v>0;v--)a.push(Math.floor(Math.random()*256));return a},bytesToWords:function(v){for(var a=[],t=0,n=0;t<v.length;t++,n+=8)a[n>>>5]|=v[t]<<24-n%32;return a},wordsToBytes:function(v){for(var a=[],t=0;t<v.length*32;t+=8)a.push(v[t>>>5]>>>24-t%32&255);return a},bytesToHex:function(v){for(var a=[],t=0;t<v.length;t++)a.push((v[t]>>>4).toString(16)),a.push((v[t]&15).toString(16));return a.join("")},hexToBytes:function(v){for(var a=[],t=0;t<v.length;t+=2)a.push(parseInt(v.substr(t,2),16));return a},bytesToBase64:function(v){for(var a=[],t=0;t<v.length;t+=3)for(var n=v[t]<<16|v[t+1]<<8|v[t+2],r=0;r<4;r++)t*8+r*6<=v.length*8?a.push(s.charAt(n>>>6*(3-r)&63)):a.push("=");return a.join("")},base64ToBytes:function(v){v=v.replace(/[^A-Z0-9+\/]/ig,"");for(var a=[],t=0,n=0;t<v.length;n=++t%4)n!=0&&a.push((s.indexOf(v.charAt(t-1))&Math.pow(2,-2*n+8)-1)<<n*2|s.indexOf(v.charAt(t))>>>6-n*2);return a}};Mr.exports=e})();var Yi=Mr.exports,Me={utf8:{stringToBytes:function(s){return Me.bin.stringToBytes(unescape(encodeURIComponent(s)))},bytesToString:function(s){return decodeURIComponent(escape(Me.bin.bytesToString(s)))}},bin:{stringToBytes:function(s){for(var e=[],v=0;v<s.length;v++)e.push(s.charCodeAt(v)&255);return e},bytesToString:function(s){for(var e=[],v=0;v<s.length;v++)e.push(String.fromCharCode(s[v]));return e.join("")}}},Ge=Me;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Wi=function(s){return s!=null&&(Cr(s)||Zi(s)||!!s._isBuffer)};function Cr(s){return!!s.constructor&&typeof s.constructor.isBuffer=="function"&&s.constructor.isBuffer(s)}function Zi(s){return typeof s.readFloatLE=="function"&&typeof s.slice=="function"&&Cr(s.slice(0,0))}(function(){var s=Yi,e=Ge.utf8,v=Wi,a=Ge.bin,t=function(n,r){n.constructor==String?r&&r.encoding==="binary"?n=a.stringToBytes(n):n=e.stringToBytes(n):v(n)?n=Array.prototype.slice.call(n,0):!Array.isArray(n)&&n.constructor!==Uint8Array&&(n=n.toString());for(var i=s.bytesToWords(n),u=n.length*8,h=1732584193,d=-271733879,c=-1732584194,o=271733878,l=0;l<i.length;l++)i[l]=(i[l]<<8|i[l]>>>24)&16711935|(i[l]<<24|i[l]>>>8)&4278255360;i[u>>>5]|=128<<u%32,i[(u+64>>>9<<4)+14]=u;for(var p=t._ff,f=t._gg,m=t._hh,C=t._ii,l=0;l<i.length;l+=16){var y=h,w=d,T=c,S=o;h=p(h,d,c,o,i[l+0],7,-680876936),o=p(o,h,d,c,i[l+1],12,-389564586),c=p(c,o,h,d,i[l+2],17,606105819),d=p(d,c,o,h,i[l+3],22,-1044525330),h=p(h,d,c,o,i[l+4],7,-176418897),o=p(o,h,d,c,i[l+5],12,1200080426),c=p(c,o,h,d,i[l+6],17,-1473231341),d=p(d,c,o,h,i[l+7],22,-45705983),h=p(h,d,c,o,i[l+8],7,1770035416),o=p(o,h,d,c,i[l+9],12,-1958414417),c=p(c,o,h,d,i[l+10],17,-42063),d=p(d,c,o,h,i[l+11],22,-1990404162),h=p(h,d,c,o,i[l+12],7,1804603682),o=p(o,h,d,c,i[l+13],12,-40341101),c=p(c,o,h,d,i[l+14],17,-1502002290),d=p(d,c,o,h,i[l+15],22,1236535329),h=f(h,d,c,o,i[l+1],5,-165796510),o=f(o,h,d,c,i[l+6],9,-1069501632),c=f(c,o,h,d,i[l+11],14,643717713),d=f(d,c,o,h,i[l+0],20,-373897302),h=f(h,d,c,o,i[l+5],5,-701558691),o=f(o,h,d,c,i[l+10],9,38016083),c=f(c,o,h,d,i[l+15],14,-660478335),d=f(d,c,o,h,i[l+4],20,-405537848),h=f(h,d,c,o,i[l+9],5,568446438),o=f(o,h,d,c,i[l+14],9,-1019803690),c=f(c,o,h,d,i[l+3],14,-187363961),d=f(d,c,o,h,i[l+8],20,1163531501),h=f(h,d,c,o,i[l+13],5,-1444681467),o=f(o,h,d,c,i[l+2],9,-51403784),c=f(c,o,h,d,i[l+7],14,1735328473),d=f(d,c,o,h,i[l+12],20,-1926607734),h=m(h,d,c,o,i[l+5],4,-378558),o=m(o,h,d,c,i[l+8],11,-2022574463),c=m(c,o,h,d,i[l+11],16,1839030562),d=m(d,c,o,h,i[l+14],23,-35309556),h=m(h,d,c,o,i[l+1],4,-1530992060),o=m(o,h,d,c,i[l+4],11,1272893353),c=m(c,o,h,d,i[l+7],16,-155497632),d=m(d,c,o,h,i[l+10],23,-1094730640),h=m(h,d,c,o,i[l+13],4,681279174),o=m(o,h,d,c,i[l+0],11,-358537222),c=m(c,o,h,d,i[l+3],16,-722521979),d=m(d,c,o,h,i[l+6],23,76029189),h=m(h,d,c,o,i[l+9],4,-640364487),o=m(o,h,d,c,i[l+12],11,-421815835),c=m(c,o,h,d,i[l+15],16,530742520),d=m(d,c,o,h,i[l+2],23,-995338651),h=C(h,d,c,o,i[l+0],6,-198630844),o=C(o,h,d,c,i[l+7],10,1126891415),c=C(c,o,h,d,i[l+14],15,-1416354905),d=C(d,c,o,h,i[l+5],21,-57434055),h=C(h,d,c,o,i[l+12],6,1700485571),o=C(o,h,d,c,i[l+3],10,-1894986606),c=C(c,o,h,d,i[l+10],15,-1051523),d=C(d,c,o,h,i[l+1],21,-2054922799),h=C(h,d,c,o,i[l+8],6,1873313359),o=C(o,h,d,c,i[l+15],10,-30611744),c=C(c,o,h,d,i[l+6],15,-1560198380),d=C(d,c,o,h,i[l+13],21,1309151649),h=C(h,d,c,o,i[l+4],6,-145523070),o=C(o,h,d,c,i[l+11],10,-1120210379),c=C(c,o,h,d,i[l+2],15,718787259),d=C(d,c,o,h,i[l+9],21,-343485551),h=h+y>>>0,d=d+w>>>0,c=c+T>>>0,o=o+S>>>0}return s.endian([h,d,c,o])};t._ff=function(n,r,i,u,h,d,c){var o=n+(r&i|~r&u)+(h>>>0)+c;return(o<<d|o>>>32-d)+r},t._gg=function(n,r,i,u,h,d,c){var o=n+(r&u|i&~u)+(h>>>0)+c;return(o<<d|o>>>32-d)+r},t._hh=function(n,r,i,u,h,d,c){var o=n+(r^i^u)+(h>>>0)+c;return(o<<d|o>>>32-d)+r},t._ii=function(n,r,i,u,h,d,c){var o=n+(i^(r|~u))+(h>>>0)+c;return(o<<d|o>>>32-d)+r},t._blocksize=16,t._digestsize=16,mr.exports=function(n,r){if(n==null)throw new Error("Illegal argument "+n);var i=s.wordsToBytes(t(n,r));return r&&r.asBytes?i:r&&r.asString?a.bytesToString(i):s.bytesToHex(i)}})();var Gi=mr.exports;const Xi=Ui(Gi),zi={class:"gitalk-container"},Hi=ft({__name:"Gitalk",setup(s){const e=xt().theme.value;return At(()=>{const v={clientID:e.clientID,clientSecret:e.clientSecret,repo:e.repo,owner:e.owner,admin:e.admin,id:Xi(location.pathname).toString(),distractionFreeMode:!1};new Gitalk(v).render("gitalk-container")}),(v,a)=>(b(),$("div",zi,[...a[0]||(a[0]=[X("div",{id:"gitalk-container"},null,-1)])]))}}),ji={class:"view-box container"},bi=ft({__name:"Post-Viewer",setup(s){const e=wr(),a=xt().site.value.base,{state:t}=Lt();function n(){let i=jt.findIndex(u=>u.href===e.path.replace(a,""));t.currPost=jt[i]}At(()=>{n()}),Xt(()=>{t.currPost={id:0,title:"",content:"",href:"",create:0,update:0,tags:[],wordCount:0,cover:"",excerpt:""}}),bt(()=>e.path,()=>{n()});const r=xt().theme.value;return(i,u)=>{const h=ze("content");return b(),$("div",ji,[Mt(h,{class:"content"}),tt(r).clientID?(b(),Ot(Hi,{key:0})):Rt("",!0)])}}}),Ji={class:"post-banner"},qi={class:"title"},Qi={class:"status"},Ki=ft({__name:"Post-InnerBanner",setup(s){const{state:e}=Lt();return(v,a)=>Ce((b(),$("div",Ji,[X("h1",qi,ut(tt(e).currPost.title),1),X("span",Qi,"发布于 "+ut(Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(tt(e).currPost.create)))+" | 约"+ut(tt(e).currPost.wordCount)+"字",1)],512)),[[kr,tt(e).currPost.title]])}}),$i=gt(Ki,[["__scopeId","data-v-8c3a58e5"]]),ta="/assets/NotFound.BbqB1acd.webp",ea={class:"not-found"},ra={class:"band"},na=["href"],ia=ft({__name:"NotFound",setup(s){const e=xt().site.value.base;return(v,a)=>(b(),$("div",ea,[a[0]||(a[0]=X("img",{src:ta,alt:""},null,-1)),a[1]||(a[1]=X("span",null,"页面不存在",-1)),X("span",ra,[X("a",{href:tt(e)},"回到主页",8,na)])]))}}),aa=gt(ia,[["__scopeId","data-v-c594f599"]]),sa="/assets/toTop.DI_oygYQ.svg",Xe="bottom: -25%; right: -25%; opacity: 0;",oa=ft({__name:"ToTop",setup(s){const e=lt(Xe),v=()=>{window.requestAnimationFrame(()=>{window.scrollY>600?e.value="bottom: 50px":e.value=Xe})},a=()=>{window.scrollTo({top:0,behavior:"smooth"})};return At(()=>{window.addEventListener("scroll",v),v()}),Xt(()=>{window.removeEventListener("scroll",v)}),(t,n)=>(b(),$("a",{href:"#",class:"totop",onClick:a,style:ce(e.value),"aria-label":"to-top"},[X("img",{onDragstart:n[0]||(n[0]=ee(()=>{},["prevent"])),src:sa,alt:""},null,32)],4))}}),ha=gt(oa,[["__scopeId","data-v-524d7f6e"]]),la={class:"fireworks"},ua=ft({__name:"Fireworks",setup(s){const{state:e}=Lt();function v(){document.removeEventListener("mousedown",a),window.removeEventListener("resize",t)}let a,t;function n(){v();const r=["102, 167, 221","62, 131, 225","33, 78, 194"],i=["252, 146, 174","202, 180, 190","207, 198, 255"],u={colors:e.darkMode==="dark"?i:r,numberOfParticles:20,orbitRadius:{min:50,max:100},circleRadius:{min:10,max:20},diffuseRadius:{min:50,max:100},animeDuration:{min:900,max:1500}};let h=0,d=0;const c=u.colors,o=document.querySelector(".fireworks"),l=o.getContext("2d");function p(x){x.width=window.innerWidth,x.height=window.innerHeight,x.style.width=`${window.innerWidth}px`,x.style.height=`${window.innerHeight}px`}function f(x){var M,A,P,R;h=x instanceof MouseEvent?x.clientX:((M=x.touches[0])==null?void 0:M.clientX)||((A=x.changedTouches[0])==null?void 0:A.clientX),d=x instanceof MouseEvent?x.clientY:((P=x.touches[0])==null?void 0:P.clientY)||((R=x.changedTouches[0])==null?void 0:R.clientY)}function m(x){const M=et.random(0,360)*Math.PI/180,A=et.random(u.diffuseRadius.min,u.diffuseRadius.max),P=[-1,1][et.random(0,1)]*A;return{x:x.x+P*Math.cos(M),y:x.y+P*Math.sin(M)}}function C(x,M){return{x,y:M,color:`rgba(${c[et.random(0,c.length-1)]},${et.random(.2,.8)})`,radius:et.random(u.circleRadius.min,u.circleRadius.max),angle:et.random(0,360),endPos:m({x,y:M}),draw(){l.save(),l.translate(this.x,this.y),l.rotate(this.angle*Math.PI/180),l.beginPath(),l.moveTo(0,-this.radius),l.lineTo(this.radius*Math.sin(Math.PI/3),this.radius*Math.cos(Math.PI/3)),l.lineTo(-this.radius*Math.sin(Math.PI/3),this.radius*Math.cos(Math.PI/3)),l.closePath(),l.fillStyle=this.color,l.fill(),l.restore()}}}function y(x,M){return{x,y:M,color:e.darkMode==="dark"?"rgb(233, 179, 237)":"rgb(106, 159, 255)",radius:.1,alpha:.5,lineWidth:6,draw(){l.globalAlpha=this.alpha,l.beginPath(),l.arc(this.x,this.y,this.radius,0,2*Math.PI,!0),l.lineWidth=this.lineWidth,l.strokeStyle=this.color,l.stroke(),l.globalAlpha=1}}}function w(x){x.animatables.forEach(M=>{const A=M.target;typeof A.draw=="function"&&A.draw()})}function T(x,M){const A=y(x,M),P=Array.from({length:u.numberOfParticles},()=>C(x,M));et.timeline().add({targets:P,x(R){return R.endPos.x},y(R){return R.endPos.y},radius:0,duration:et.random(u.animeDuration.min,u.animeDuration.max),easing:"easeOutExpo",update:w}).add({targets:A,radius:et.random(u.orbitRadius.min,u.orbitRadius.max),lineWidth:0,alpha:{value:0,easing:"linear",duration:et.random(600,800)},duration:et.random(1200,1800),easing:"easeOutExpo",update:w},0)}const S=et({duration:Number.POSITIVE_INFINITY,update:()=>{l.clearRect(0,0,o.width,o.height)}});t=()=>p(o),a=x=>{S.play(),f(x),T(h,d)},document.addEventListener("mousedown",a),window.addEventListener("resize",t),p(o)}return At(()=>{n()}),bt(()=>e.darkMode,()=>{n()}),Xt(()=>{v()}),(r,i)=>(b(),$("canvas",la))}}),ca=gt(ua,[["__scopeId","data-v-e80c925e"]]),da="data:image/svg+xml,%3csvg%20width='487'%20height='177'%20viewBox='0%200%20487%20177'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M4.5%2086.5L0.5%20154.5H20L71.5%2086.5H55L17%20138L21.5%2086.5H4.5Z'%20fill='%23128AFA'/%3e%3cpath%20d='M73.5%20102.5L53%20154.5H67.5L87.5%20102.5H73.5Z'%20fill='%23128AFA'/%3e%3cpath%20d='M79.5%2088.5L75.5%2098H90L94%2088.5H79.5Z'%20fill='%23128AFA'/%3e%3cpath%20d='M117%2088.5L111.5%20102.5H99.5L95%20114.5H106L95%20143.5C94.3333%20147.167%2094.3%20154.5%2099.5%20154.5H118.5L124%20142.5H113.5C112.167%20142.5%20109.9%20141.8%20111.5%20139C113.1%20136.2%20118.5%20122.167%20121%20115.5H135.5L141%20102.5H126.5L132%2088.5H117Z'%20fill='%23128AFA'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M150%20134.5H187L195.5%20114.5C196.833%20110.833%20197.5%20103.3%20189.5%20102.5C181.5%20101.7%20166.167%20102.167%20159.5%20102.5C156.333%20102.667%20148.9%20105.3%20144.5%20114.5C140.1%20123.7%20135.333%20135.333%20133.5%20140C132.5%20144.833%20132.8%20154.5%20142%20154.5H180L185%20142.5H150C148.667%20141.333%20146.8%20138.1%20150%20134.5ZM177%20123H155C153.8%20119.4%20157.5%20115.833%20159.5%20114.5C164.833%20114%20176%20113.5%20178%20115.5C180%20117.5%20178.167%20121.333%20177%20123Z'%20fill='%23128AFA'/%3e%3cpath%20d='M158%2011L190.5%2026L196.5%2028.5L260%2057.5L196.5%20177L266.5%2060.5L337.5%2089L344%2091.5L353.5%2095L344%2090.5L337.5%2087.5L269.5%2056L278.5%2038.5L279.5%2036.5L296%200.5L275%2034.5L274%2036L263%2052.5L199.5%2027L193%2024.5L158%2011Z'%20fill='%23128AFA'/%3e%3cpath%20d='M428%20102.5H391C388.5%20102.667%20382.6%20104.9%20379%20112.5L374%20123.5C372.5%20127.333%20372.2%20135%20383%20135H399.5C401.333%20136.167%20403.6%20139.2%20398%20142H366.5L361.5%20154.5H401C403.167%20154%20408.3%20151.9%20411.5%20147.5C414.7%20143.1%20416.833%20136.333%20417.5%20133.5C418.667%20129.833%20419.4%20122.5%20413%20122.5H390C388.667%20120.833%20387.5%20117%20393.5%20115H422.5L428%20102.5Z'%20fill='%232B2B2B'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M320.891%20135.442H357.891L366.391%20115.442C367.725%20111.775%20368.391%20104.242%20360.391%20103.442C352.391%20102.642%20337.058%20103.108%20330.391%20103.442C327.225%20103.608%20319.791%20106.242%20315.391%20115.442C310.991%20124.642%20306.225%20136.275%20304.391%20140.942C303.391%20145.775%20303.691%20155.442%20312.891%20155.442H350.891L355.891%20143.442H320.891C319.558%20142.275%20317.691%20139.042%20320.891%20135.442ZM347.891%20123.942H325.891C324.691%20120.342%20328.391%20116.775%20330.391%20115.442C335.725%20114.942%20346.891%20114.442%20348.891%20116.442C350.891%20118.442%20349.058%20122.275%20347.891%20123.942Z'%20fill='%232B2B2B'/%3e%3cpath%20d='M263.5%20154.5L278%20115.5C280.167%20111.5%20286%20103.4%20292%20103C298%20102.6%20307.833%20102.833%20312%20103L308%20114.5L295%20115.5C294%20115.833%20291.6%20117.8%20290%20123C288.4%20128.2%20281.333%20146.167%20278%20154.5H263.5Z'%20fill='%232B2B2B'/%3e%3cpath%20d='M250.5%2098.5L257.5%2086H267C270.167%2086.8333%20276%2090.3%20274%2097.5C272%20104.7%20266.5%20117.5%20264%20123C262.5%20126.833%20256.6%20134.5%20245%20134.5H227.5L235%20121.5H246C247.667%20121.333%20251.3%20120.2%20252.5%20117C253.7%20113.8%20255.333%20109.333%20256%20107.5C256.667%20105.833%20257.6%20102%20256%20100C254.4%2098%20251.667%2098.1667%20250.5%2098.5Z'%20fill='%232B2B2B'/%3e%3cpath%20d='M218.5%2086H237.5L231.5%2098.5H227.5L219.5%20123L203%20154.5H191.5L218.5%2086Z'%20fill='%232B2B2B'/%3e%3cpath%20d='M190.5%2026C164.5%2039.2%20199.667%2067.5%20220.5%2080H225.5C206.5%2071%20185.897%2050.5%20186.5%2041C186.982%2033.4%20193.368%2029.5%20196.5%2028.5L190.5%2026Z'%20fill='%232B2B2B'/%3e%3cpath%20d='M275%2034.5C235.338%2018.7587%20201.934%2020.6892%20193%2024.5L199.5%2027C206.167%2024%20232.4%2020.8%20274%2036L275%2034.5Z'%20fill='%232B2B2B'/%3e%3cpath%20d='M344%2090.5C340.782%2068.5268%20299.404%2045.2411%20279.5%2036.5L278.5%2038.5C326.147%2061.2911%20337.49%2082.0562%20337.5%2087.5L344%2090.5Z'%20fill='%232B2B2B'/%3e%3cpath%20d='M342.5%2096L344%2091.5L337.5%2089C338.7%2090.6%20335.667%2094.3333%20334%2096H342.5Z'%20fill='%232B2B2B'/%3e%3cpath%20d='M486.5%20103H449.5C447%20103.167%20441.1%20105.4%20437.5%20113L432.5%20124C431%20127.833%20430.7%20135.5%20441.5%20135.5H458C459.833%20136.667%20462.1%20139.7%20456.5%20142.5H425L420%20155H459.5C461.667%20154.5%20466.8%20152.4%20470%20148C473.2%20143.6%20475.333%20136.833%20476%20134C477.167%20130.333%20477.9%20123%20471.5%20123H448.5C447.167%20121.333%20446%20117.5%20452%20115.5H481L486.5%20103Z'%20fill='%232B2B2B'/%3e%3c/svg%3e",fa={class:"container"},va={class:"footer-info"},pa=["href"],ma={class:"footer-logo"},Ma=ft({__name:"Footer",setup(s){const e=xt().theme.value,v=e.footerName,a=e.poweredList;return(t,n)=>(b(),$("footer",fa,[X("div",va,[X("span",null,"© "+ut(new Date().getFullYear())+" "+ut(tt(v)),1),n[2]||(n[2]=X("br",null,null,-1)),X("span",null,[n[1]||(n[1]=Ht("Powered by ",-1)),(b(!0),$(It,null,Bt(tt(a),(r,i)=>(b(),$("span",{class:"powered-list",key:r.url},[X("a",{href:r.url},ut(r.name),9,pa),Ht(ut(i<tt(a).length-1?" & ":""),1)]))),128))])]),X("div",ma,[X("img",{onDragstart:n[0]||(n[0]=ee(()=>{},["prevent"])),src:da,alt:"logo-vitepress"},null,32)])]))}}),Ca=gt(Ma,[["__scopeId","data-v-c5526a12"]]);var nt=function(){var s=function(e,v){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=t[n])},s(e,v)};return function(e,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");s(e,v);function a(){this.constructor=e}e.prototype=v===null?Object.create(v):(a.prototype=v.prototype,new a)}}(),B;(function(s){var e=function(){function x(M,A,P){if(M==null)throw new Error("name cannot be null.");if(A==null)throw new Error("timelines cannot be null.");this.name=M,this.timelines=A,this.timelineIds=[];for(var R=0;R<A.length;R++)this.timelineIds[A[R].getPropertyId()]=!0;this.duration=P}return x.prototype.hasTimeline=function(M){return this.timelineIds[M]==!0},x.prototype.apply=function(M,A,P,R,D,I,V,N){if(M==null)throw new Error("skeleton cannot be null.");R&&this.duration!=0&&(P%=this.duration,A>0&&(A%=this.duration));for(var L=this.timelines,g=0,E=L.length;g<E;g++)L[g].apply(M,A,P,D,I,V,N)},x.binarySearch=function(M,A,P){P===void 0&&(P=1);var R=0,D=M.length/P-2;if(D==0)return P;for(var I=D>>>1;;){if(M[(I+1)*P]<=A?R=I+1:D=I,R==D)return(R+1)*P;I=R+D>>>1}},x.linearSearch=function(M,A,P){for(var R=0,D=M.length-P;R<=D;R+=P)if(M[R]>A)return R;return-1},x}();s.Animation=e;var v;(function(x){x[x.setup=0]="setup",x[x.first=1]="first",x[x.replace=2]="replace",x[x.add=3]="add"})(v=s.MixBlend||(s.MixBlend={}));var a;(function(x){x[x.mixIn=0]="mixIn",x[x.mixOut=1]="mixOut"})(a=s.MixDirection||(s.MixDirection={}));var t;(function(x){x[x.rotate=0]="rotate",x[x.translate=1]="translate",x[x.scale=2]="scale",x[x.shear=3]="shear",x[x.attachment=4]="attachment",x[x.color=5]="color",x[x.deform=6]="deform",x[x.event=7]="event",x[x.drawOrder=8]="drawOrder",x[x.ikConstraint=9]="ikConstraint",x[x.transformConstraint=10]="transformConstraint",x[x.pathConstraintPosition=11]="pathConstraintPosition",x[x.pathConstraintSpacing=12]="pathConstraintSpacing",x[x.pathConstraintMix=13]="pathConstraintMix",x[x.twoColor=14]="twoColor"})(t=s.TimelineType||(s.TimelineType={}));var n=function(){function x(M){if(M<=0)throw new Error("frameCount must be > 0: "+M);this.curves=s.Utils.newFloatArray((M-1)*x.BEZIER_SIZE)}return x.prototype.getFrameCount=function(){return this.curves.length/x.BEZIER_SIZE+1},x.prototype.setLinear=function(M){this.curves[M*x.BEZIER_SIZE]=x.LINEAR},x.prototype.setStepped=function(M){this.curves[M*x.BEZIER_SIZE]=x.STEPPED},x.prototype.getCurveType=function(M){var A=M*x.BEZIER_SIZE;if(A==this.curves.length)return x.LINEAR;var P=this.curves[A];return P==x.LINEAR?x.LINEAR:P==x.STEPPED?x.STEPPED:x.BEZIER},x.prototype.setCurve=function(M,A,P,R,D){var I=(-A*2+R)*.03,V=(-P*2+D)*.03,N=((A-R)*3+1)*.006,L=((P-D)*3+1)*.006,g=I*2+N,E=V*2+L,F=A*.3+I+N*.16666667,_=P*.3+V+L*.16666667,G=M*x.BEZIER_SIZE,Y=this.curves;Y[G++]=x.BEZIER;for(var Z=F,W=_,U=G+x.BEZIER_SIZE-1;G<U;G+=2)Y[G]=Z,Y[G+1]=W,F+=g,_+=E,g+=N,E+=L,Z+=F,W+=_},x.prototype.getCurvePercent=function(M,A){A=s.MathUtils.clamp(A,0,1);var P=this.curves,R=M*x.BEZIER_SIZE,D=P[R];if(D==x.LINEAR)return A;if(D==x.STEPPED)return 0;R++;for(var I=0,V=R,N=R+x.BEZIER_SIZE-1;R<N;R+=2)if(I=P[R],I>=A){var L=void 0,g=void 0;return R==V?(L=0,g=0):(L=P[R-2],g=P[R-1]),g+(P[R+1]-g)*(A-L)/(I-L)}var E=P[R-1];return E+(1-E)*(A-I)/(1-I)},x.LINEAR=0,x.STEPPED=1,x.BEZIER=2,x.BEZIER_SIZE=10*2-1,x}();s.CurveTimeline=n;var r=function(x){nt(M,x);function M(A){var P=x.call(this,A)||this;return P.frames=s.Utils.newFloatArray(A<<1),P}return M.prototype.getPropertyId=function(){return(t.rotate<<24)+this.boneIndex},M.prototype.setFrame=function(A,P,R){A<<=1,this.frames[A]=P,this.frames[A+M.ROTATION]=R},M.prototype.apply=function(A,P,R,D,I,V,N){var L=this.frames,g=A.bones[this.boneIndex];if(g.active){if(R<L[0]){switch(V){case v.setup:g.rotation=g.data.rotation;return;case v.first:var E=g.data.rotation-g.rotation;g.rotation+=(E-(16384-(16384.499999999996-E/360|0))*360)*I}return}if(R>=L[L.length-M.ENTRIES]){var F=L[L.length+M.PREV_ROTATION];switch(V){case v.setup:g.rotation=g.data.rotation+F*I;break;case v.first:case v.replace:F+=g.data.rotation-g.rotation,F-=(16384-(16384.499999999996-F/360|0))*360;case v.add:g.rotation+=F*I}return}var _=e.binarySearch(L,R,M.ENTRIES),G=L[_+M.PREV_ROTATION],Y=L[_],Z=this.getCurvePercent((_>>1)-1,1-(R-Y)/(L[_+M.PREV_TIME]-Y)),W=L[_+M.ROTATION]-G;switch(W=G+(W-(16384-(16384.499999999996-W/360|0))*360)*Z,V){case v.setup:g.rotation=g.data.rotation+(W-(16384-(16384.499999999996-W/360|0))*360)*I;break;case v.first:case v.replace:W+=g.data.rotation-g.rotation;case v.add:g.rotation+=(W-(16384-(16384.499999999996-W/360|0))*360)*I}}},M.ENTRIES=2,M.PREV_TIME=-2,M.PREV_ROTATION=-1,M.ROTATION=1,M}(n);s.RotateTimeline=r;var i=function(x){nt(M,x);function M(A){var P=x.call(this,A)||this;return P.frames=s.Utils.newFloatArray(A*M.ENTRIES),P}return M.prototype.getPropertyId=function(){return(t.translate<<24)+this.boneIndex},M.prototype.setFrame=function(A,P,R,D){A*=M.ENTRIES,this.frames[A]=P,this.frames[A+M.X]=R,this.frames[A+M.Y]=D},M.prototype.apply=function(A,P,R,D,I,V,N){var L=this.frames,g=A.bones[this.boneIndex];if(g.active){if(R<L[0]){switch(V){case v.setup:g.x=g.data.x,g.y=g.data.y;return;case v.first:g.x+=(g.data.x-g.x)*I,g.y+=(g.data.y-g.y)*I}return}var E=0,F=0;if(R>=L[L.length-M.ENTRIES])E=L[L.length+M.PREV_X],F=L[L.length+M.PREV_Y];else{var _=e.binarySearch(L,R,M.ENTRIES);E=L[_+M.PREV_X],F=L[_+M.PREV_Y];var G=L[_],Y=this.getCurvePercent(_/M.ENTRIES-1,1-(R-G)/(L[_+M.PREV_TIME]-G));E+=(L[_+M.X]-E)*Y,F+=(L[_+M.Y]-F)*Y}switch(V){case v.setup:g.x=g.data.x+E*I,g.y=g.data.y+F*I;break;case v.first:case v.replace:g.x+=(g.data.x+E-g.x)*I,g.y+=(g.data.y+F-g.y)*I;break;case v.add:g.x+=E*I,g.y+=F*I}}},M.ENTRIES=3,M.PREV_TIME=-3,M.PREV_X=-2,M.PREV_Y=-1,M.X=1,M.Y=2,M}(n);s.TranslateTimeline=i;var u=function(x){nt(M,x);function M(A){return x.call(this,A)||this}return M.prototype.getPropertyId=function(){return(t.scale<<24)+this.boneIndex},M.prototype.apply=function(A,P,R,D,I,V,N){var L=this.frames,g=A.bones[this.boneIndex];if(g.active){if(R<L[0]){switch(V){case v.setup:g.scaleX=g.data.scaleX,g.scaleY=g.data.scaleY;return;case v.first:g.scaleX+=(g.data.scaleX-g.scaleX)*I,g.scaleY+=(g.data.scaleY-g.scaleY)*I}return}var E=0,F=0;if(R>=L[L.length-M.ENTRIES])E=L[L.length+M.PREV_X]*g.data.scaleX,F=L[L.length+M.PREV_Y]*g.data.scaleY;else{var _=e.binarySearch(L,R,M.ENTRIES);E=L[_+M.PREV_X],F=L[_+M.PREV_Y];var G=L[_],Y=this.getCurvePercent(_/M.ENTRIES-1,1-(R-G)/(L[_+M.PREV_TIME]-G));E=(E+(L[_+M.X]-E)*Y)*g.data.scaleX,F=(F+(L[_+M.Y]-F)*Y)*g.data.scaleY}if(I==1)V==v.add?(g.scaleX+=E-g.data.scaleX,g.scaleY+=F-g.data.scaleY):(g.scaleX=E,g.scaleY=F);else{var Z=0,W=0;if(N==a.mixOut)switch(V){case v.setup:Z=g.data.scaleX,W=g.data.scaleY,g.scaleX=Z+(Math.abs(E)*s.MathUtils.signum(Z)-Z)*I,g.scaleY=W+(Math.abs(F)*s.MathUtils.signum(W)-W)*I;break;case v.first:case v.replace:Z=g.scaleX,W=g.scaleY,g.scaleX=Z+(Math.abs(E)*s.MathUtils.signum(Z)-Z)*I,g.scaleY=W+(Math.abs(F)*s.MathUtils.signum(W)-W)*I;break;case v.add:Z=g.scaleX,W=g.scaleY,g.scaleX=Z+(Math.abs(E)*s.MathUtils.signum(Z)-g.data.scaleX)*I,g.scaleY=W+(Math.abs(F)*s.MathUtils.signum(W)-g.data.scaleY)*I}else switch(V){case v.setup:Z=Math.abs(g.data.scaleX)*s.MathUtils.signum(E),W=Math.abs(g.data.scaleY)*s.MathUtils.signum(F),g.scaleX=Z+(E-Z)*I,g.scaleY=W+(F-W)*I;break;case v.first:case v.replace:Z=Math.abs(g.scaleX)*s.MathUtils.signum(E),W=Math.abs(g.scaleY)*s.MathUtils.signum(F),g.scaleX=Z+(E-Z)*I,g.scaleY=W+(F-W)*I;break;case v.add:Z=s.MathUtils.signum(E),W=s.MathUtils.signum(F),g.scaleX=Math.abs(g.scaleX)*Z+(E-Math.abs(g.data.scaleX)*Z)*I,g.scaleY=Math.abs(g.scaleY)*W+(F-Math.abs(g.data.scaleY)*W)*I}}}},M}(i);s.ScaleTimeline=u;var h=function(x){nt(M,x);function M(A){return x.call(this,A)||this}return M.prototype.getPropertyId=function(){return(t.shear<<24)+this.boneIndex},M.prototype.apply=function(A,P,R,D,I,V,N){var L=this.frames,g=A.bones[this.boneIndex];if(g.active){if(R<L[0]){switch(V){case v.setup:g.shearX=g.data.shearX,g.shearY=g.data.shearY;return;case v.first:g.shearX+=(g.data.shearX-g.shearX)*I,g.shearY+=(g.data.shearY-g.shearY)*I}return}var E=0,F=0;if(R>=L[L.length-M.ENTRIES])E=L[L.length+M.PREV_X],F=L[L.length+M.PREV_Y];else{var _=e.binarySearch(L,R,M.ENTRIES);E=L[_+M.PREV_X],F=L[_+M.PREV_Y];var G=L[_],Y=this.getCurvePercent(_/M.ENTRIES-1,1-(R-G)/(L[_+M.PREV_TIME]-G));E=E+(L[_+M.X]-E)*Y,F=F+(L[_+M.Y]-F)*Y}switch(V){case v.setup:g.shearX=g.data.shearX+E*I,g.shearY=g.data.shearY+F*I;break;case v.first:case v.replace:g.shearX+=(g.data.shearX+E-g.shearX)*I,g.shearY+=(g.data.shearY+F-g.shearY)*I;break;case v.add:g.shearX+=E*I,g.shearY+=F*I}}},M}(i);s.ShearTimeline=h;var d=function(x){nt(M,x);function M(A){var P=x.call(this,A)||this;return P.frames=s.Utils.newFloatArray(A*M.ENTRIES),P}return M.prototype.getPropertyId=function(){return(t.color<<24)+this.slotIndex},M.prototype.setFrame=function(A,P,R,D,I,V){A*=M.ENTRIES,this.frames[A]=P,this.frames[A+M.R]=R,this.frames[A+M.G]=D,this.frames[A+M.B]=I,this.frames[A+M.A]=V},M.prototype.apply=function(A,P,R,D,I,V,N){var L=A.slots[this.slotIndex];if(L.bone.active){var g=this.frames;if(R<g[0]){switch(V){case v.setup:L.color.setFromColor(L.data.color);return;case v.first:var E=L.color,F=L.data.color;E.add((F.r-E.r)*I,(F.g-E.g)*I,(F.b-E.b)*I,(F.a-E.a)*I)}return}var _=0,G=0,Y=0,Z=0;if(R>=g[g.length-M.ENTRIES]){var W=g.length;_=g[W+M.PREV_R],G=g[W+M.PREV_G],Y=g[W+M.PREV_B],Z=g[W+M.PREV_A]}else{var U=e.binarySearch(g,R,M.ENTRIES);_=g[U+M.PREV_R],G=g[U+M.PREV_G],Y=g[U+M.PREV_B],Z=g[U+M.PREV_A];var O=g[U],k=this.getCurvePercent(U/M.ENTRIES-1,1-(R-O)/(g[U+M.PREV_TIME]-O));_+=(g[U+M.R]-_)*k,G+=(g[U+M.G]-G)*k,Y+=(g[U+M.B]-Y)*k,Z+=(g[U+M.A]-Z)*k}if(I==1)L.color.set(_,G,Y,Z);else{var E=L.color;V==v.setup&&E.setFromColor(L.data.color),E.add((_-E.r)*I,(G-E.g)*I,(Y-E.b)*I,(Z-E.a)*I)}}},M.ENTRIES=5,M.PREV_TIME=-5,M.PREV_R=-4,M.PREV_G=-3,M.PREV_B=-2,M.PREV_A=-1,M.R=1,M.G=2,M.B=3,M.A=4,M}(n);s.ColorTimeline=d;var c=function(x){nt(M,x);function M(A){var P=x.call(this,A)||this;return P.frames=s.Utils.newFloatArray(A*M.ENTRIES),P}return M.prototype.getPropertyId=function(){return(t.twoColor<<24)+this.slotIndex},M.prototype.setFrame=function(A,P,R,D,I,V,N,L,g){A*=M.ENTRIES,this.frames[A]=P,this.frames[A+M.R]=R,this.frames[A+M.G]=D,this.frames[A+M.B]=I,this.frames[A+M.A]=V,this.frames[A+M.R2]=N,this.frames[A+M.G2]=L,this.frames[A+M.B2]=g},M.prototype.apply=function(A,P,R,D,I,V,N){var L=A.slots[this.slotIndex];if(L.bone.active){var g=this.frames;if(R<g[0]){switch(V){case v.setup:L.color.setFromColor(L.data.color),L.darkColor.setFromColor(L.data.darkColor);return;case v.first:var E=L.color,F=L.darkColor,_=L.data.color,G=L.data.darkColor;E.add((_.r-E.r)*I,(_.g-E.g)*I,(_.b-E.b)*I,(_.a-E.a)*I),F.add((G.r-F.r)*I,(G.g-F.g)*I,(G.b-F.b)*I,0)}return}var Y=0,Z=0,W=0,U=0,O=0,k=0,z=0;if(R>=g[g.length-M.ENTRIES]){var j=g.length;Y=g[j+M.PREV_R],Z=g[j+M.PREV_G],W=g[j+M.PREV_B],U=g[j+M.PREV_A],O=g[j+M.PREV_R2],k=g[j+M.PREV_G2],z=g[j+M.PREV_B2]}else{var H=e.binarySearch(g,R,M.ENTRIES);Y=g[H+M.PREV_R],Z=g[H+M.PREV_G],W=g[H+M.PREV_B],U=g[H+M.PREV_A],O=g[H+M.PREV_R2],k=g[H+M.PREV_G2],z=g[H+M.PREV_B2];var q=g[H],Q=this.getCurvePercent(H/M.ENTRIES-1,1-(R-q)/(g[H+M.PREV_TIME]-q));Y+=(g[H+M.R]-Y)*Q,Z+=(g[H+M.G]-Z)*Q,W+=(g[H+M.B]-W)*Q,U+=(g[H+M.A]-U)*Q,O+=(g[H+M.R2]-O)*Q,k+=(g[H+M.G2]-k)*Q,z+=(g[H+M.B2]-z)*Q}if(I==1)L.color.set(Y,Z,W,U),L.darkColor.set(O,k,z,1);else{var E=L.color,F=L.darkColor;V==v.setup&&(E.setFromColor(L.data.color),F.setFromColor(L.data.darkColor)),E.add((Y-E.r)*I,(Z-E.g)*I,(W-E.b)*I,(U-E.a)*I),F.add((O-F.r)*I,(k-F.g)*I,(z-F.b)*I,0)}}},M.ENTRIES=8,M.PREV_TIME=-8,M.PREV_R=-7,M.PREV_G=-6,M.PREV_B=-5,M.PREV_A=-4,M.PREV_R2=-3,M.PREV_G2=-2,M.PREV_B2=-1,M.R=1,M.G=2,M.B=3,M.A=4,M.R2=5,M.G2=6,M.B2=7,M}(n);s.TwoColorTimeline=c;var o=function(){function x(M){this.frames=s.Utils.newFloatArray(M),this.attachmentNames=new Array(M)}return x.prototype.getPropertyId=function(){return(t.attachment<<24)+this.slotIndex},x.prototype.getFrameCount=function(){return this.frames.length},x.prototype.setFrame=function(M,A,P){this.frames[M]=A,this.attachmentNames[M]=P},x.prototype.apply=function(M,A,P,R,D,I,V){var N=M.slots[this.slotIndex];if(N.bone.active){if(V==a.mixOut){I==v.setup&&this.setAttachment(M,N,N.data.attachmentName);return}var L=this.frames;if(P<L[0]){(I==v.setup||I==v.first)&&this.setAttachment(M,N,N.data.attachmentName);return}var g=0;P>=L[L.length-1]?g=L.length-1:g=e.binarySearch(L,P,1)-1;var E=this.attachmentNames[g];M.slots[this.slotIndex].setAttachment(E==null?null:M.getAttachment(this.slotIndex,E))}},x.prototype.setAttachment=function(M,A,P){A.setAttachment(P==null?null:M.getAttachment(this.slotIndex,P))},x}();s.AttachmentTimeline=o;var l=null,p=function(x){nt(M,x);function M(A){var P=x.call(this,A)||this;return P.frames=s.Utils.newFloatArray(A),P.frameVertices=new Array(A),l==null&&(l=s.Utils.newFloatArray(64)),P}return M.prototype.getPropertyId=function(){return(t.deform<<27)+ +this.attachment.id+this.slotIndex},M.prototype.setFrame=function(A,P,R){this.frames[A]=P,this.frameVertices[A]=R},M.prototype.apply=function(A,P,R,D,I,V,N){var L=A.slots[this.slotIndex];if(L.bone.active){var g=L.getAttachment();if(!(!(g instanceof s.VertexAttachment)||g.deformAttachment!=this.attachment)){var E=L.deform;E.length==0&&(V=v.setup);var F=this.frameVertices,_=F[0].length,G=this.frames;if(R<G[0]){var Y=g;switch(V){case v.setup:E.length=0;return;case v.first:if(I==1){E.length=0;break}var Z=s.Utils.setArraySize(E,_);if(Y.bones==null)for(var W=Y.vertices,U=0;U<_;U++)Z[U]+=(W[U]-Z[U])*I;else{I=1-I;for(var U=0;U<_;U++)Z[U]*=I}}return}var O=s.Utils.setArraySize(E,_);if(R>=G[G.length-1]){var k=F[G.length-1];if(I==1)if(V==v.add){var Y=g;if(Y.bones==null)for(var W=Y.vertices,z=0;z<_;z++)O[z]+=k[z]-W[z];else for(var j=0;j<_;j++)O[j]+=k[j]}else s.Utils.arrayCopy(k,0,O,0,_);else switch(V){case v.setup:{var H=g;if(H.bones==null)for(var W=H.vertices,q=0;q<_;q++){var Q=W[q];O[q]=Q+(k[q]-Q)*I}else for(var rt=0;rt<_;rt++)O[rt]=k[rt]*I;break}case v.first:case v.replace:for(var K=0;K<_;K++)O[K]+=(k[K]-O[K])*I;break;case v.add:var Y=g;if(Y.bones==null)for(var W=Y.vertices,ht=0;ht<_;ht++)O[ht]+=(k[ht]-W[ht])*I;else for(var ot=0;ot<_;ot++)O[ot]+=k[ot]*I}return}var vt=e.binarySearch(G,R),pt=F[vt-1],ct=F[vt],mt=G[vt],st=this.getCurvePercent(vt-1,1-(R-mt)/(G[vt-1]-mt));if(I==1)if(V==v.add){var Y=g;if(Y.bones==null)for(var W=Y.vertices,at=0;at<_;at++){var it=pt[at];O[at]+=it+(ct[at]-it)*st-W[at]}else for(var Et=0;Et<_;Et++){var it=pt[Et];O[Et]+=it+(ct[Et]-it)*st}}else for(var yt=0;yt<_;yt++){var it=pt[yt];O[yt]=it+(ct[yt]-it)*st}else switch(V){case v.setup:{var Dt=g;if(Dt.bones==null)for(var W=Dt.vertices,St=0;St<_;St++){var it=pt[St],Q=W[St];O[St]=Q+(it+(ct[St]-it)*st-Q)*I}else for(var Pt=0;Pt<_;Pt++){var it=pt[Pt];O[Pt]=(it+(ct[Pt]-it)*st)*I}break}case v.first:case v.replace:for(var dt=0;dt<_;dt++){var it=pt[dt];O[dt]+=(it+(ct[dt]-it)*st-O[dt])*I}break;case v.add:var Y=g;if(Y.bones==null)for(var W=Y.vertices,Tt=0;Tt<_;Tt++){var it=pt[Tt];O[Tt]+=(it+(ct[Tt]-it)*st-W[Tt])*I}else for(var Ut=0;Ut<_;Ut++){var it=pt[Ut];O[Ut]+=(it+(ct[Ut]-it)*st)*I}}}}},M}(n);s.DeformTimeline=p;var f=function(){function x(M){this.frames=s.Utils.newFloatArray(M),this.events=new Array(M)}return x.prototype.getPropertyId=function(){return t.event<<24},x.prototype.getFrameCount=function(){return this.frames.length},x.prototype.setFrame=function(M,A){this.frames[M]=A.time,this.events[M]=A},x.prototype.apply=function(M,A,P,R,D,I,V){if(R!=null){var N=this.frames,L=this.frames.length;if(A>P)this.apply(M,A,Number.MAX_VALUE,R,D,I,V),A=-1;else if(A>=N[L-1])return;if(!(P<N[0])){var g=0;if(A<N[0])g=0;else{g=e.binarySearch(N,A);for(var E=N[g];g>0&&N[g-1]==E;)g--}for(;g<L&&P>=N[g];g++)R.push(this.events[g])}}},x}();s.EventTimeline=f;var m=function(){function x(M){this.frames=s.Utils.newFloatArray(M),this.drawOrders=new Array(M)}return x.prototype.getPropertyId=function(){return t.drawOrder<<24},x.prototype.getFrameCount=function(){return this.frames.length},x.prototype.setFrame=function(M,A,P){this.frames[M]=A,this.drawOrders[M]=P},x.prototype.apply=function(M,A,P,R,D,I,V){var N=M.drawOrder,L=M.slots;if(V==a.mixOut){I==v.setup&&s.Utils.arrayCopy(M.slots,0,M.drawOrder,0,M.slots.length);return}var g=this.frames;if(P<g[0]){(I==v.setup||I==v.first)&&s.Utils.arrayCopy(M.slots,0,M.drawOrder,0,M.slots.length);return}var E=0;P>=g[g.length-1]?E=g.length-1:E=e.binarySearch(g,P)-1;var F=this.drawOrders[E];if(F==null)s.Utils.arrayCopy(L,0,N,0,L.length);else for(var _=0,G=F.length;_<G;_++)N[_]=L[F[_]]},x}();s.DrawOrderTimeline=m;var C=function(x){nt(M,x);function M(A){var P=x.call(this,A)||this;return P.frames=s.Utils.newFloatArray(A*M.ENTRIES),P}return M.prototype.getPropertyId=function(){return(t.ikConstraint<<24)+this.ikConstraintIndex},M.prototype.setFrame=function(A,P,R,D,I,V,N){A*=M.ENTRIES,this.frames[A]=P,this.frames[A+M.MIX]=R,this.frames[A+M.SOFTNESS]=D,this.frames[A+M.BEND_DIRECTION]=I,this.frames[A+M.COMPRESS]=V?1:0,this.frames[A+M.STRETCH]=N?1:0},M.prototype.apply=function(A,P,R,D,I,V,N){var L=this.frames,g=A.ikConstraints[this.ikConstraintIndex];if(g.active){if(R<L[0]){switch(V){case v.setup:g.mix=g.data.mix,g.softness=g.data.softness,g.bendDirection=g.data.bendDirection,g.compress=g.data.compress,g.stretch=g.data.stretch;return;case v.first:g.mix+=(g.data.mix-g.mix)*I,g.softness+=(g.data.softness-g.softness)*I,g.bendDirection=g.data.bendDirection,g.compress=g.data.compress,g.stretch=g.data.stretch}return}if(R>=L[L.length-M.ENTRIES]){V==v.setup?(g.mix=g.data.mix+(L[L.length+M.PREV_MIX]-g.data.mix)*I,g.softness=g.data.softness+(L[L.length+M.PREV_SOFTNESS]-g.data.softness)*I,N==a.mixOut?(g.bendDirection=g.data.bendDirection,g.compress=g.data.compress,g.stretch=g.data.stretch):(g.bendDirection=L[L.length+M.PREV_BEND_DIRECTION],g.compress=L[L.length+M.PREV_COMPRESS]!=0,g.stretch=L[L.length+M.PREV_STRETCH]!=0)):(g.mix+=(L[L.length+M.PREV_MIX]-g.mix)*I,g.softness+=(L[L.length+M.PREV_SOFTNESS]-g.softness)*I,N==a.mixIn&&(g.bendDirection=L[L.length+M.PREV_BEND_DIRECTION],g.compress=L[L.length+M.PREV_COMPRESS]!=0,g.stretch=L[L.length+M.PREV_STRETCH]!=0));return}var E=e.binarySearch(L,R,M.ENTRIES),F=L[E+M.PREV_MIX],_=L[E+M.PREV_SOFTNESS],G=L[E],Y=this.getCurvePercent(E/M.ENTRIES-1,1-(R-G)/(L[E+M.PREV_TIME]-G));V==v.setup?(g.mix=g.data.mix+(F+(L[E+M.MIX]-F)*Y-g.data.mix)*I,g.softness=g.data.softness+(_+(L[E+M.SOFTNESS]-_)*Y-g.data.softness)*I,N==a.mixOut?(g.bendDirection=g.data.bendDirection,g.compress=g.data.compress,g.stretch=g.data.stretch):(g.bendDirection=L[E+M.PREV_BEND_DIRECTION],g.compress=L[E+M.PREV_COMPRESS]!=0,g.stretch=L[E+M.PREV_STRETCH]!=0)):(g.mix+=(F+(L[E+M.MIX]-F)*Y-g.mix)*I,g.softness+=(_+(L[E+M.SOFTNESS]-_)*Y-g.softness)*I,N==a.mixIn&&(g.bendDirection=L[E+M.PREV_BEND_DIRECTION],g.compress=L[E+M.PREV_COMPRESS]!=0,g.stretch=L[E+M.PREV_STRETCH]!=0))}},M.ENTRIES=6,M.PREV_TIME=-6,M.PREV_MIX=-5,M.PREV_SOFTNESS=-4,M.PREV_BEND_DIRECTION=-3,M.PREV_COMPRESS=-2,M.PREV_STRETCH=-1,M.MIX=1,M.SOFTNESS=2,M.BEND_DIRECTION=3,M.COMPRESS=4,M.STRETCH=5,M}(n);s.IkConstraintTimeline=C;var y=function(x){nt(M,x);function M(A){var P=x.call(this,A)||this;return P.frames=s.Utils.newFloatArray(A*M.ENTRIES),P}return M.prototype.getPropertyId=function(){return(t.transformConstraint<<24)+this.transformConstraintIndex},M.prototype.setFrame=function(A,P,R,D,I,V){A*=M.ENTRIES,this.frames[A]=P,this.frames[A+M.ROTATE]=R,this.frames[A+M.TRANSLATE]=D,this.frames[A+M.SCALE]=I,this.frames[A+M.SHEAR]=V},M.prototype.apply=function(A,P,R,D,I,V,N){var L=this.frames,g=A.transformConstraints[this.transformConstraintIndex];if(g.active){if(R<L[0]){var E=g.data;switch(V){case v.setup:g.rotateMix=E.rotateMix,g.translateMix=E.translateMix,g.scaleMix=E.scaleMix,g.shearMix=E.shearMix;return;case v.first:g.rotateMix+=(E.rotateMix-g.rotateMix)*I,g.translateMix+=(E.translateMix-g.translateMix)*I,g.scaleMix+=(E.scaleMix-g.scaleMix)*I,g.shearMix+=(E.shearMix-g.shearMix)*I}return}var F=0,_=0,G=0,Y=0;if(R>=L[L.length-M.ENTRIES]){var Z=L.length;F=L[Z+M.PREV_ROTATE],_=L[Z+M.PREV_TRANSLATE],G=L[Z+M.PREV_SCALE],Y=L[Z+M.PREV_SHEAR]}else{var W=e.binarySearch(L,R,M.ENTRIES);F=L[W+M.PREV_ROTATE],_=L[W+M.PREV_TRANSLATE],G=L[W+M.PREV_SCALE],Y=L[W+M.PREV_SHEAR];var U=L[W],O=this.getCurvePercent(W/M.ENTRIES-1,1-(R-U)/(L[W+M.PREV_TIME]-U));F+=(L[W+M.ROTATE]-F)*O,_+=(L[W+M.TRANSLATE]-_)*O,G+=(L[W+M.SCALE]-G)*O,Y+=(L[W+M.SHEAR]-Y)*O}if(V==v.setup){var E=g.data;g.rotateMix=E.rotateMix+(F-E.rotateMix)*I,g.translateMix=E.translateMix+(_-E.translateMix)*I,g.scaleMix=E.scaleMix+(G-E.scaleMix)*I,g.shearMix=E.shearMix+(Y-E.shearMix)*I}else g.rotateMix+=(F-g.rotateMix)*I,g.translateMix+=(_-g.translateMix)*I,g.scaleMix+=(G-g.scaleMix)*I,g.shearMix+=(Y-g.shearMix)*I}},M.ENTRIES=5,M.PREV_TIME=-5,M.PREV_ROTATE=-4,M.PREV_TRANSLATE=-3,M.PREV_SCALE=-2,M.PREV_SHEAR=-1,M.ROTATE=1,M.TRANSLATE=2,M.SCALE=3,M.SHEAR=4,M}(n);s.TransformConstraintTimeline=y;var w=function(x){nt(M,x);function M(A){var P=x.call(this,A)||this;return P.frames=s.Utils.newFloatArray(A*M.ENTRIES),P}return M.prototype.getPropertyId=function(){return(t.pathConstraintPosition<<24)+this.pathConstraintIndex},M.prototype.setFrame=function(A,P,R){A*=M.ENTRIES,this.frames[A]=P,this.frames[A+M.VALUE]=R},M.prototype.apply=function(A,P,R,D,I,V,N){var L=this.frames,g=A.pathConstraints[this.pathConstraintIndex];if(g.active){if(R<L[0]){switch(V){case v.setup:g.position=g.data.position;return;case v.first:g.position+=(g.data.position-g.position)*I}return}var E=0;if(R>=L[L.length-M.ENTRIES])E=L[L.length+M.PREV_VALUE];else{var F=e.binarySearch(L,R,M.ENTRIES);E=L[F+M.PREV_VALUE];var _=L[F],G=this.getCurvePercent(F/M.ENTRIES-1,1-(R-_)/(L[F+M.PREV_TIME]-_));E+=(L[F+M.VALUE]-E)*G}V==v.setup?g.position=g.data.position+(E-g.data.position)*I:g.position+=(E-g.position)*I}},M.ENTRIES=2,M.PREV_TIME=-2,M.PREV_VALUE=-1,M.VALUE=1,M}(n);s.PathConstraintPositionTimeline=w;var T=function(x){nt(M,x);function M(A){return x.call(this,A)||this}return M.prototype.getPropertyId=function(){return(t.pathConstraintSpacing<<24)+this.pathConstraintIndex},M.prototype.apply=function(A,P,R,D,I,V,N){var L=this.frames,g=A.pathConstraints[this.pathConstraintIndex];if(g.active){if(R<L[0]){switch(V){case v.setup:g.spacing=g.data.spacing;return;case v.first:g.spacing+=(g.data.spacing-g.spacing)*I}return}var E=0;if(R>=L[L.length-M.ENTRIES])E=L[L.length+M.PREV_VALUE];else{var F=e.binarySearch(L,R,M.ENTRIES);E=L[F+M.PREV_VALUE];var _=L[F],G=this.getCurvePercent(F/M.ENTRIES-1,1-(R-_)/(L[F+M.PREV_TIME]-_));E+=(L[F+M.VALUE]-E)*G}V==v.setup?g.spacing=g.data.spacing+(E-g.data.spacing)*I:g.spacing+=(E-g.spacing)*I}},M}(w);s.PathConstraintSpacingTimeline=T;var S=function(x){nt(M,x);function M(A){var P=x.call(this,A)||this;return P.frames=s.Utils.newFloatArray(A*M.ENTRIES),P}return M.prototype.getPropertyId=function(){return(t.pathConstraintMix<<24)+this.pathConstraintIndex},M.prototype.setFrame=function(A,P,R,D){A*=M.ENTRIES,this.frames[A]=P,this.frames[A+M.ROTATE]=R,this.frames[A+M.TRANSLATE]=D},M.prototype.apply=function(A,P,R,D,I,V,N){var L=this.frames,g=A.pathConstraints[this.pathConstraintIndex];if(g.active){if(R<L[0]){switch(V){case v.setup:g.rotateMix=g.data.rotateMix,g.translateMix=g.data.translateMix;return;case v.first:g.rotateMix+=(g.data.rotateMix-g.rotateMix)*I,g.translateMix+=(g.data.translateMix-g.translateMix)*I}return}var E=0,F=0;if(R>=L[L.length-M.ENTRIES])E=L[L.length+M.PREV_ROTATE],F=L[L.length+M.PREV_TRANSLATE];else{var _=e.binarySearch(L,R,M.ENTRIES);E=L[_+M.PREV_ROTATE],F=L[_+M.PREV_TRANSLATE];var G=L[_],Y=this.getCurvePercent(_/M.ENTRIES-1,1-(R-G)/(L[_+M.PREV_TIME]-G));E+=(L[_+M.ROTATE]-E)*Y,F+=(L[_+M.TRANSLATE]-F)*Y}V==v.setup?(g.rotateMix=g.data.rotateMix+(E-g.data.rotateMix)*I,g.translateMix=g.data.translateMix+(F-g.data.translateMix)*I):(g.rotateMix+=(E-g.rotateMix)*I,g.translateMix+=(F-g.translateMix)*I)}},M.ENTRIES=3,M.PREV_TIME=-3,M.PREV_ROTATE=-2,M.PREV_TRANSLATE=-1,M.ROTATE=1,M.TRANSLATE=2,M}(n);s.PathConstraintMixTimeline=S})(B||(B={}));var B;(function(s){var e=function(){function r(i){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new a(this),this.propertyIDs=new s.IntSet,this.animationsChanged=!1,this.trackEntryPool=new s.Pool(function(){return new v}),this.data=i}return r.prototype.update=function(i){i*=this.timeScale;for(var u=this.tracks,h=0,d=u.length;h<d;h++){var c=u[h];if(c!=null){c.animationLast=c.nextAnimationLast,c.trackLast=c.nextTrackLast;var o=i*c.timeScale;if(c.delay>0){if(c.delay-=o,c.delay>0)continue;o=-c.delay,c.delay=0}var l=c.next;if(l!=null){var p=c.trackLast-l.delay;if(p>=0){for(l.delay=0,l.trackTime+=c.timeScale==0?0:(p/c.timeScale+i)*l.timeScale,c.trackTime+=o,this.setCurrent(h,l,!0);l.mixingFrom!=null;)l.mixTime+=i,l=l.mixingFrom;continue}}else if(c.trackLast>=c.trackEnd&&c.mixingFrom==null){u[h]=null,this.queue.end(c),this.disposeNext(c);continue}if(c.mixingFrom!=null&&this.updateMixingFrom(c,i)){var f=c.mixingFrom;for(c.mixingFrom=null,f!=null&&(f.mixingTo=null);f!=null;)this.queue.end(f),f=f.mixingFrom}c.trackTime+=o}}this.queue.drain()},r.prototype.updateMixingFrom=function(i,u){var h=i.mixingFrom;if(h==null)return!0;var d=this.updateMixingFrom(h,u);return h.animationLast=h.nextAnimationLast,h.trackLast=h.nextTrackLast,i.mixTime>0&&i.mixTime>=i.mixDuration?((h.totalAlpha==0||i.mixDuration==0)&&(i.mixingFrom=h.mixingFrom,h.mixingFrom!=null&&(h.mixingFrom.mixingTo=i),i.interruptAlpha=h.interruptAlpha,this.queue.end(h)),d):(h.trackTime+=u*h.timeScale,i.mixTime+=u,!1)},r.prototype.apply=function(i){if(i==null)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var u=this.events,h=this.tracks,d=!1,c=0,o=h.length;c<o;c++){var l=h[c];if(!(l==null||l.delay>0)){d=!0;var p=c==0?s.MixBlend.first:l.mixBlend,f=l.alpha;l.mixingFrom!=null?f*=this.applyMixingFrom(l,i,p):l.trackTime>=l.trackEnd&&l.next==null&&(f=0);var m=l.animationLast,C=l.getAnimationTime(),y=l.animation.timelines.length,w=l.animation.timelines;if(c==0&&f==1||p==s.MixBlend.add)for(var T=0;T<y;T++){s.Utils.webkit602BugfixHelper(f,p);var S=w[T];S instanceof s.AttachmentTimeline?this.applyAttachmentTimeline(S,i,C,p,!0):S.apply(i,m,C,u,f,p,s.MixDirection.mixIn)}else{var x=l.timelineMode,M=l.timelinesRotation.length==0;M&&s.Utils.setArraySize(l.timelinesRotation,y<<1,null);for(var A=l.timelinesRotation,T=0;T<y;T++){var P=w[T],R=x[T]==r.SUBSEQUENT?p:s.MixBlend.setup;P instanceof s.RotateTimeline?this.applyRotateTimeline(P,i,C,f,R,A,T<<1,M):P instanceof s.AttachmentTimeline?this.applyAttachmentTimeline(P,i,C,p,!0):(s.Utils.webkit602BugfixHelper(f,p),P.apply(i,m,C,u,f,R,s.MixDirection.mixIn))}}this.queueEvents(l,C),u.length=0,l.nextAnimationLast=C,l.nextTrackLast=l.trackTime}}for(var D=this.unkeyedState+r.SETUP,I=i.slots,V=0,N=i.slots.length;V<N;V++){var L=I[V];if(L.attachmentState==D){var g=L.data.attachmentName;L.setAttachment(g==null?null:i.getAttachment(L.data.index,g))}}return this.unkeyedState+=2,this.queue.drain(),d},r.prototype.applyMixingFrom=function(i,u,h){var d=i.mixingFrom;d.mixingFrom!=null&&this.applyMixingFrom(d,u,h);var c=0;i.mixDuration==0?(c=1,h==s.MixBlend.first&&(h=s.MixBlend.setup)):(c=i.mixTime/i.mixDuration,c>1&&(c=1),h!=s.MixBlend.first&&(h=d.mixBlend));var o=c<d.eventThreshold?this.events:null,l=c<d.attachmentThreshold,p=c<d.drawOrderThreshold,f=d.animationLast,m=d.getAnimationTime(),C=d.animation.timelines.length,y=d.animation.timelines,w=d.alpha*i.interruptAlpha,T=w*(1-c);if(h==s.MixBlend.add)for(var S=0;S<C;S++)y[S].apply(u,f,m,o,T,h,s.MixDirection.mixOut);else{var x=d.timelineMode,M=d.timelineHoldMix,A=d.timelinesRotation.length==0;A&&s.Utils.setArraySize(d.timelinesRotation,C<<1,null);var P=d.timelinesRotation;d.totalAlpha=0;for(var S=0;S<C;S++){var R=y[S],D=s.MixDirection.mixOut,I=void 0,V=0;switch(x[S]){case r.SUBSEQUENT:if(!p&&R instanceof s.DrawOrderTimeline)continue;I=h,V=T;break;case r.FIRST:I=s.MixBlend.setup,V=T;break;case r.HOLD_SUBSEQUENT:I=h,V=w;break;case r.HOLD_FIRST:I=s.MixBlend.setup,V=w;break;default:I=s.MixBlend.setup;var N=M[S];V=w*Math.max(0,1-N.mixTime/N.mixDuration);break}d.totalAlpha+=V,R instanceof s.RotateTimeline?this.applyRotateTimeline(R,u,m,V,I,P,S<<1,A):R instanceof s.AttachmentTimeline?this.applyAttachmentTimeline(R,u,m,I,l):(s.Utils.webkit602BugfixHelper(V,h),p&&R instanceof s.DrawOrderTimeline&&I==s.MixBlend.setup&&(D=s.MixDirection.mixIn),R.apply(u,f,m,o,V,I,D))}}return i.mixDuration>0&&this.queueEvents(d,m),this.events.length=0,d.nextAnimationLast=m,d.nextTrackLast=d.trackTime,c},r.prototype.applyAttachmentTimeline=function(i,u,h,d,c){var o=u.slots[i.slotIndex];if(o.bone.active){var l=i.frames;if(h<l[0])(d==s.MixBlend.setup||d==s.MixBlend.first)&&this.setAttachment(u,o,o.data.attachmentName,c);else{var p;h>=l[l.length-1]?p=l.length-1:p=s.Animation.binarySearch(l,h)-1,this.setAttachment(u,o,i.attachmentNames[p],c)}o.attachmentState<=this.unkeyedState&&(o.attachmentState=this.unkeyedState+r.SETUP)}},r.prototype.setAttachment=function(i,u,h,d){u.setAttachment(h==null?null:i.getAttachment(u.data.index,h)),d&&(u.attachmentState=this.unkeyedState+r.CURRENT)},r.prototype.applyRotateTimeline=function(i,u,h,d,c,o,l,p){if(p&&(o[l]=0),d==1){i.apply(u,0,h,null,1,c,s.MixDirection.mixIn);return}var f=i,m=f.frames,C=u.bones[f.boneIndex];if(C.active){var y=0,w=0;if(h<m[0])switch(c){case s.MixBlend.setup:C.rotation=C.data.rotation;default:return;case s.MixBlend.first:y=C.rotation,w=C.data.rotation}else if(y=c==s.MixBlend.setup?C.data.rotation:C.rotation,h>=m[m.length-s.RotateTimeline.ENTRIES])w=C.data.rotation+m[m.length+s.RotateTimeline.PREV_ROTATION];else{var T=s.Animation.binarySearch(m,h,s.RotateTimeline.ENTRIES),S=m[T+s.RotateTimeline.PREV_ROTATION],x=m[T],M=f.getCurvePercent((T>>1)-1,1-(h-x)/(m[T+s.RotateTimeline.PREV_TIME]-x));w=m[T+s.RotateTimeline.ROTATION]-S,w-=(16384-(16384.499999999996-w/360|0))*360,w=S+w*M+C.data.rotation,w-=(16384-(16384.499999999996-w/360|0))*360}var A=0,P=w-y;if(P-=(16384-(16384.499999999996-P/360|0))*360,P==0)A=o[l];else{var R=0,D=0;p?(R=0,D=P):(R=o[l],D=o[l+1]);var I=P>0,V=R>=0;s.MathUtils.signum(D)!=s.MathUtils.signum(P)&&Math.abs(D)<=90&&(Math.abs(R)>180&&(R+=360*s.MathUtils.signum(R)),V=I),A=P+R-R%360,V!=I&&(A+=360*s.MathUtils.signum(R)),o[l]=A}o[l+1]=P,y+=A*d,C.rotation=y-(16384-(16384.499999999996-y/360|0))*360}},r.prototype.queueEvents=function(i,u){for(var h=i.animationStart,d=i.animationEnd,c=d-h,o=i.trackLast%c,l=this.events,p=0,f=l.length;p<f;p++){var m=l[p];if(m.time<o)break;m.time>d||this.queue.event(i,m)}var C=!1;for(i.loop?C=c==0||o>i.trackTime%c:C=u>=d&&i.animationLast<d,C&&this.queue.complete(i);p<f;p++){var y=l[p];y.time<h||this.queue.event(i,l[p])}},r.prototype.clearTracks=function(){var i=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var u=0,h=this.tracks.length;u<h;u++)this.clearTrack(u);this.tracks.length=0,this.queue.drainDisabled=i,this.queue.drain()},r.prototype.clearTrack=function(i){if(!(i>=this.tracks.length)){var u=this.tracks[i];if(u!=null){this.queue.end(u),this.disposeNext(u);for(var h=u;;){var d=h.mixingFrom;if(d==null)break;this.queue.end(d),h.mixingFrom=null,h.mixingTo=null,h=d}this.tracks[u.trackIndex]=null,this.queue.drain()}}},r.prototype.setCurrent=function(i,u,h){var d=this.expandToIndex(i);this.tracks[i]=u,d!=null&&(h&&this.queue.interrupt(d),u.mixingFrom=d,d.mixingTo=u,u.mixTime=0,d.mixingFrom!=null&&d.mixDuration>0&&(u.interruptAlpha*=Math.min(1,d.mixTime/d.mixDuration)),d.timelinesRotation.length=0),this.queue.start(u)},r.prototype.setAnimation=function(i,u,h){var d=this.data.skeletonData.findAnimation(u);if(d==null)throw new Error("Animation not found: "+u);return this.setAnimationWith(i,d,h)},r.prototype.setAnimationWith=function(i,u,h){if(u==null)throw new Error("animation cannot be null.");var d=!0,c=this.expandToIndex(i);c!=null&&(c.nextTrackLast==-1?(this.tracks[i]=c.mixingFrom,this.queue.interrupt(c),this.queue.end(c),this.disposeNext(c),c=c.mixingFrom,d=!1):this.disposeNext(c));var o=this.trackEntry(i,u,h,c);return this.setCurrent(i,o,d),this.queue.drain(),o},r.prototype.addAnimation=function(i,u,h,d){var c=this.data.skeletonData.findAnimation(u);if(c==null)throw new Error("Animation not found: "+u);return this.addAnimationWith(i,c,h,d)},r.prototype.addAnimationWith=function(i,u,h,d){if(u==null)throw new Error("animation cannot be null.");var c=this.expandToIndex(i);if(c!=null)for(;c.next!=null;)c=c.next;var o=this.trackEntry(i,u,h,c);if(c==null)this.setCurrent(i,o,!0),this.queue.drain();else if(c.next=o,d<=0){var l=c.animationEnd-c.animationStart;l!=0?(c.loop?d+=l*(1+(c.trackTime/l|0)):d+=Math.max(l,c.trackTime),d-=this.data.getMix(c.animation,u)):d=c.trackTime}return o.delay=d,o},r.prototype.setEmptyAnimation=function(i,u){var h=this.setAnimationWith(i,r.emptyAnimation,!1);return h.mixDuration=u,h.trackEnd=u,h},r.prototype.addEmptyAnimation=function(i,u,h){h<=0&&(h-=u);var d=this.addAnimationWith(i,r.emptyAnimation,!1,h);return d.mixDuration=u,d.trackEnd=u,d},r.prototype.setEmptyAnimations=function(i){var u=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var h=0,d=this.tracks.length;h<d;h++){var c=this.tracks[h];c!=null&&this.setEmptyAnimation(c.trackIndex,i)}this.queue.drainDisabled=u,this.queue.drain()},r.prototype.expandToIndex=function(i){return i<this.tracks.length?this.tracks[i]:(s.Utils.ensureArrayCapacity(this.tracks,i+1,null),this.tracks.length=i+1,null)},r.prototype.trackEntry=function(i,u,h,d){var c=this.trackEntryPool.obtain();return c.trackIndex=i,c.animation=u,c.loop=h,c.holdPrevious=!1,c.eventThreshold=0,c.attachmentThreshold=0,c.drawOrderThreshold=0,c.animationStart=0,c.animationEnd=u.duration,c.animationLast=-1,c.nextAnimationLast=-1,c.delay=0,c.trackTime=0,c.trackLast=-1,c.nextTrackLast=-1,c.trackEnd=Number.MAX_VALUE,c.timeScale=1,c.alpha=1,c.interruptAlpha=1,c.mixTime=0,c.mixDuration=d==null?0:this.data.getMix(d.animation,u),c.mixBlend=s.MixBlend.replace,c},r.prototype.disposeNext=function(i){for(var u=i.next;u!=null;)this.queue.dispose(u),u=u.next;i.next=null},r.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var i=0,u=this.tracks.length;i<u;i++){var h=this.tracks[i];if(h!=null){for(;h.mixingFrom!=null;)h=h.mixingFrom;do(h.mixingFrom==null||h.mixBlend!=s.MixBlend.add)&&this.computeHold(h),h=h.mixingTo;while(h!=null)}}},r.prototype.computeHold=function(i){var u=i.mixingTo,h=i.animation.timelines,d=i.animation.timelines.length,c=s.Utils.setArraySize(i.timelineMode,d);i.timelineHoldMix.length=0;var o=s.Utils.setArraySize(i.timelineHoldMix,d),l=this.propertyIDs;if(u!=null&&u.holdPrevious){for(var p=0;p<d;p++)c[p]=l.add(h[p].getPropertyId())?r.HOLD_FIRST:r.HOLD_SUBSEQUENT;return}t:for(var p=0;p<d;p++){var f=h[p],m=f.getPropertyId();if(!l.add(m))c[p]=r.SUBSEQUENT;else if(u==null||f instanceof s.AttachmentTimeline||f instanceof s.DrawOrderTimeline||f instanceof s.EventTimeline||!u.animation.hasTimeline(m))c[p]=r.FIRST;else{for(var C=u.mixingTo;C!=null;C=C.mixingTo)if(!C.animation.hasTimeline(m)){if(i.mixDuration>0){c[p]=r.HOLD_MIX,o[p]=C;continue t}break}c[p]=r.HOLD_FIRST}}},r.prototype.getCurrent=function(i){return i>=this.tracks.length?null:this.tracks[i]},r.prototype.addListener=function(i){if(i==null)throw new Error("listener cannot be null.");this.listeners.push(i)},r.prototype.removeListener=function(i){var u=this.listeners.indexOf(i);u>=0&&this.listeners.splice(u,1)},r.prototype.clearListeners=function(){this.listeners.length=0},r.prototype.clearListenerNotifications=function(){this.queue.clear()},r.emptyAnimation=new s.Animation("<empty>",[],0),r.SUBSEQUENT=0,r.FIRST=1,r.HOLD_SUBSEQUENT=2,r.HOLD_FIRST=3,r.HOLD_MIX=4,r.SETUP=1,r.CURRENT=2,r}();s.AnimationState=e;var v=function(){function r(){this.mixBlend=s.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return r.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},r.prototype.getAnimationTime=function(){if(this.loop){var i=this.animationEnd-this.animationStart;return i==0?this.animationStart:this.trackTime%i+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},r.prototype.setAnimationLast=function(i){this.animationLast=i,this.nextAnimationLast=i},r.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},r.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},r}();s.TrackEntry=v;var a=function(){function r(i){this.objects=[],this.drainDisabled=!1,this.animState=i}return r.prototype.start=function(i){this.objects.push(t.start),this.objects.push(i),this.animState.animationsChanged=!0},r.prototype.interrupt=function(i){this.objects.push(t.interrupt),this.objects.push(i)},r.prototype.end=function(i){this.objects.push(t.end),this.objects.push(i),this.animState.animationsChanged=!0},r.prototype.dispose=function(i){this.objects.push(t.dispose),this.objects.push(i)},r.prototype.complete=function(i){this.objects.push(t.complete),this.objects.push(i)},r.prototype.event=function(i,u){this.objects.push(t.event),this.objects.push(i),this.objects.push(u)},r.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var i=this.objects,u=this.animState.listeners,h=0;h<i.length;h+=2){var d=i[h],c=i[h+1];switch(d){case t.start:c.listener!=null&&c.listener.start&&c.listener.start(c);for(var o=0;o<u.length;o++)u[o].start&&u[o].start(c);break;case t.interrupt:c.listener!=null&&c.listener.interrupt&&c.listener.interrupt(c);for(var o=0;o<u.length;o++)u[o].interrupt&&u[o].interrupt(c);break;case t.end:c.listener!=null&&c.listener.end&&c.listener.end(c);for(var o=0;o<u.length;o++)u[o].end&&u[o].end(c);case t.dispose:c.listener!=null&&c.listener.dispose&&c.listener.dispose(c);for(var o=0;o<u.length;o++)u[o].dispose&&u[o].dispose(c);this.animState.trackEntryPool.free(c);break;case t.complete:c.listener!=null&&c.listener.complete&&c.listener.complete(c);for(var o=0;o<u.length;o++)u[o].complete&&u[o].complete(c);break;case t.event:var l=i[h+++2];c.listener!=null&&c.listener.event&&c.listener.event(c,l);for(var o=0;o<u.length;o++)u[o].event&&u[o].event(c,l);break}}this.clear(),this.drainDisabled=!1}},r.prototype.clear=function(){this.objects.length=0},r}();s.EventQueue=a;var t;(function(r){r[r.start=0]="start",r[r.interrupt=1]="interrupt",r[r.end=2]="end",r[r.dispose=3]="dispose",r[r.complete=4]="complete",r[r.event=5]="event"})(t=s.EventType||(s.EventType={}));var n=function(){function r(){}return r.prototype.start=function(i){},r.prototype.interrupt=function(i){},r.prototype.end=function(i){},r.prototype.dispose=function(i){},r.prototype.complete=function(i){},r.prototype.event=function(i,u){},r}();s.AnimationStateAdapter=n})(B||(B={}));var B;(function(s){var e=function(){function v(a){if(this.animationToMixTime={},this.defaultMix=0,a==null)throw new Error("skeletonData cannot be null.");this.skeletonData=a}return v.prototype.setMix=function(a,t,n){var r=this.skeletonData.findAnimation(a);if(r==null)throw new Error("Animation not found: "+a);var i=this.skeletonData.findAnimation(t);if(i==null)throw new Error("Animation not found: "+t);this.setMixWith(r,i,n)},v.prototype.setMixWith=function(a,t,n){if(a==null)throw new Error("from cannot be null.");if(t==null)throw new Error("to cannot be null.");var r=a.name+"."+t.name;this.animationToMixTime[r]=n},v.prototype.getMix=function(a,t){var n=a.name+"."+t.name,r=this.animationToMixTime[n];return r===void 0?this.defaultMix:r},v}();s.AnimationStateData=e})(B||(B={}));var B;(function(s){var e=function(){function v(a,t){t===void 0&&(t=""),this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.rawDataUris={},this.textureLoader=a,this.pathPrefix=t}return v.prototype.downloadText=function(a,t,n){var r=new XMLHttpRequest;r.overrideMimeType("text/html"),this.rawDataUris[a]&&(a=this.rawDataUris[a]),r.open("GET",a,!0),r.onload=function(){r.status==200?t(r.responseText):n(r.status,r.responseText)},r.onerror=function(){n(r.status,r.responseText)},r.send()},v.prototype.downloadBinary=function(a,t,n){var r=new XMLHttpRequest;this.rawDataUris[a]&&(a=this.rawDataUris[a]),r.open("GET",a,!0),r.responseType="arraybuffer",r.onload=function(){r.status==200?t(new Uint8Array(r.response)):n(r.status,r.responseText)},r.onerror=function(){n(r.status,r.responseText)},r.send()},v.prototype.setRawDataURI=function(a,t){this.rawDataUris[this.pathPrefix+a]=t},v.prototype.loadBinary=function(a,t,n){var r=this;t===void 0&&(t=null),n===void 0&&(n=null),a=this.pathPrefix+a,this.toLoad++,this.downloadBinary(a,function(i){r.assets[a]=i,t&&t(a,i),r.toLoad--,r.loaded++},function(i,u){r.errors[a]="Couldn't load binary ".concat(a,": status ").concat(status,", ").concat(u),n&&n(a,"Couldn't load binary ".concat(a,": status ").concat(status,", ").concat(u)),r.toLoad--,r.loaded++})},v.prototype.loadText=function(a,t,n){var r=this;t===void 0&&(t=null),n===void 0&&(n=null),a=this.pathPrefix+a,this.toLoad++,this.downloadText(a,function(i){r.assets[a]=i,t&&t(a,i),r.toLoad--,r.loaded++},function(i,u){r.errors[a]="Couldn't load text ".concat(a,": status ").concat(status,", ").concat(u),n&&n(a,"Couldn't load text ".concat(a,": status ").concat(status,", ").concat(u)),r.toLoad--,r.loaded++})},v.prototype.loadTexture=function(a,t,n){var r=this;t===void 0&&(t=null),n===void 0&&(n=null),a=this.pathPrefix+a;var i=a;this.toLoad++;var u=new Image;u.crossOrigin="anonymous",u.onload=function(h){var d=r.textureLoader(u);r.assets[i]=d,r.toLoad--,r.loaded++,t&&t(a,u)},u.onerror=function(h){r.errors[a]="Couldn't load image ".concat(a),r.toLoad--,r.loaded++,n&&n(a,"Couldn't load image ".concat(a))},this.rawDataUris[a]&&(a=this.rawDataUris[a]),u.src=a},v.prototype.loadTextureAtlas=function(a,t,n){var r=this;t===void 0&&(t=null),n===void 0&&(n=null);var i=a.lastIndexOf("/")>=0?a.substring(0,a.lastIndexOf("/")):"";a=this.pathPrefix+a,this.toLoad++,this.downloadText(a,function(u){var h={count:0},d=new Array;try{var c=new s.TextureAtlas(u,function(C){d.push(i==""?C:i+"/"+C);var y=document.createElement("img");return y.width=16,y.height=16,new s.FakeTexture(y)})}catch(C){var o=C;r.errors[a]="Couldn't load texture atlas ".concat(a,": ").concat(o.message),n&&n(a,"Couldn't load texture atlas ".concat(a,": ").concat(o.message)),r.toLoad--,r.loaded++;return}for(var l=function(C){var y=!1;r.loadTexture(C,function(w,T){if(h.count++,h.count==d.length)if(y)r.errors[a]="Couldn't load texture atlas page ".concat(w,"} of atlas ").concat(a),n&&n(a,"Couldn't load texture atlas page ".concat(w," of atlas ").concat(a)),r.toLoad--,r.loaded++;else try{var S=new s.TextureAtlas(u,function(M){return r.get(i==""?M:i+"/"+M)});r.assets[a]=S,t&&t(a,S),r.toLoad--,r.loaded++}catch(M){var x=M;r.errors[a]="Couldn't load texture atlas ".concat(a,": ").concat(x.message),n&&n(a,"Couldn't load texture atlas ".concat(a,": ").concat(x.message)),r.toLoad--,r.loaded++}},function(w,T){y=!0,h.count++,h.count==d.length&&(r.errors[a]="Couldn't load texture atlas page ".concat(w,"} of atlas ").concat(a),n&&n(a,"Couldn't load texture atlas page ".concat(w," of atlas ").concat(a)),r.toLoad--,r.loaded++)})},p=0,f=d;p<f.length;p++){var m=f[p];l(m)}},function(u,h){r.errors[a]="Couldn't load texture atlas ".concat(a,": status ").concat(status,", ").concat(h),n&&n(a,"Couldn't load texture atlas ".concat(a,": status ").concat(status,", ").concat(h)),r.toLoad--,r.loaded++})},v.prototype.get=function(a){return a=this.pathPrefix+a,this.assets[a]},v.prototype.remove=function(a){a=this.pathPrefix+a;var t=this.assets[a];t.dispose&&t.dispose(),this.assets[a]=null},v.prototype.removeAll=function(){for(var a in this.assets){var t=this.assets[a];t.dispose&&t.dispose()}this.assets={}},v.prototype.isLoadingComplete=function(){return this.toLoad==0},v.prototype.getToLoad=function(){return this.toLoad},v.prototype.getLoaded=function(){return this.loaded},v.prototype.dispose=function(){this.removeAll()},v.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},v.prototype.getErrors=function(){return this.errors},v}();s.AssetManager=e})(B||(B={}));var B;(function(s){var e=function(){function v(a){this.atlas=a}return v.prototype.newRegionAttachment=function(a,t,n){var r=this.atlas.findRegion(n);if(r==null)throw new Error("Region not found in atlas: "+n+" (region attachment: "+t+")");r.renderObject=r;var i=new s.RegionAttachment(t);return i.setRegion(r),i},v.prototype.newMeshAttachment=function(a,t,n){var r=this.atlas.findRegion(n);if(r==null)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+t+")");r.renderObject=r;var i=new s.MeshAttachment(t);return i.region=r,i},v.prototype.newBoundingBoxAttachment=function(a,t){return new s.BoundingBoxAttachment(t)},v.prototype.newPathAttachment=function(a,t){return new s.PathAttachment(t)},v.prototype.newPointAttachment=function(a,t){return new s.PointAttachment(t)},v.prototype.newClippingAttachment=function(a,t){return new s.ClippingAttachment(t)},v}();s.AtlasAttachmentLoader=e})(B||(B={}));var B;(function(s){(function(e){e[e.Normal=0]="Normal",e[e.Additive=1]="Additive",e[e.Multiply=2]="Multiply",e[e.Screen=3]="Screen"})(s.BlendMode||(s.BlendMode={}))})(B||(B={}));var B;(function(s){var e=function(){function v(a,t,n){if(this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,a==null)throw new Error("data cannot be null.");if(t==null)throw new Error("skeleton cannot be null.");this.data=a,this.skeleton=t,this.parent=n,this.setToSetupPose()}return v.prototype.isActive=function(){return this.active},v.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},v.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},v.prototype.updateWorldTransformWith=function(a,t,n,r,i,u,h){this.ax=a,this.ay=t,this.arotation=n,this.ascaleX=r,this.ascaleY=i,this.ashearX=u,this.ashearY=h,this.appliedValid=!0;var d=this.parent;if(d==null){var c=this.skeleton,o=n+90+h,l=c.scaleX,p=c.scaleY;this.a=s.MathUtils.cosDeg(n+u)*r*l,this.b=s.MathUtils.cosDeg(o)*i*l,this.c=s.MathUtils.sinDeg(n+u)*r*p,this.d=s.MathUtils.sinDeg(o)*i*p,this.worldX=a*l+c.x,this.worldY=t*p+c.y;return}var f=d.a,m=d.b,C=d.c,y=d.d;switch(this.worldX=f*a+m*t+d.worldX,this.worldY=C*a+y*t+d.worldY,this.data.transformMode){case s.TransformMode.Normal:{var o=n+90+h,w=s.MathUtils.cosDeg(n+u)*r,T=s.MathUtils.cosDeg(o)*i,S=s.MathUtils.sinDeg(n+u)*r,x=s.MathUtils.sinDeg(o)*i;this.a=f*w+m*S,this.b=f*T+m*x,this.c=C*w+y*S,this.d=C*T+y*x;return}case s.TransformMode.OnlyTranslation:{var o=n+90+h;this.a=s.MathUtils.cosDeg(n+u)*r,this.b=s.MathUtils.cosDeg(o)*i,this.c=s.MathUtils.sinDeg(n+u)*r,this.d=s.MathUtils.sinDeg(o)*i;break}case s.TransformMode.NoRotationOrReflection:{var M=f*f+C*C,A=0;M>1e-4?(M=Math.abs(f*y-m*C)/M,f/=this.skeleton.scaleX,C/=this.skeleton.scaleY,m=C*M,y=f*M,A=Math.atan2(C,f)*s.MathUtils.radDeg):(f=0,C=0,A=90-Math.atan2(y,m)*s.MathUtils.radDeg);var P=n+u-A,R=n+h-A+90,w=s.MathUtils.cosDeg(P)*r,T=s.MathUtils.cosDeg(R)*i,S=s.MathUtils.sinDeg(P)*r,x=s.MathUtils.sinDeg(R)*i;this.a=f*w-m*S,this.b=f*T-m*x,this.c=C*w+y*S,this.d=C*T+y*x;break}case s.TransformMode.NoScale:case s.TransformMode.NoScaleOrReflection:{var D=s.MathUtils.cosDeg(n),I=s.MathUtils.sinDeg(n),V=(f*D+m*I)/this.skeleton.scaleX,N=(C*D+y*I)/this.skeleton.scaleY,M=Math.sqrt(V*V+N*N);M>1e-5&&(M=1/M),V*=M,N*=M,M=Math.sqrt(V*V+N*N),this.data.transformMode==s.TransformMode.NoScale&&f*y-m*C<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(M=-M);var L=Math.PI/2+Math.atan2(N,V),g=Math.cos(L)*M,E=Math.sin(L)*M,w=s.MathUtils.cosDeg(u)*r,T=s.MathUtils.cosDeg(90+h)*i,S=s.MathUtils.sinDeg(u)*r,x=s.MathUtils.sinDeg(90+h)*i;this.a=V*w+g*S,this.b=V*T+g*x,this.c=N*w+E*S,this.d=N*T+E*x;break}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY},v.prototype.setToSetupPose=function(){var a=this.data;this.x=a.x,this.y=a.y,this.rotation=a.rotation,this.scaleX=a.scaleX,this.scaleY=a.scaleY,this.shearX=a.shearX,this.shearY=a.shearY},v.prototype.getWorldRotationX=function(){return Math.atan2(this.c,this.a)*s.MathUtils.radDeg},v.prototype.getWorldRotationY=function(){return Math.atan2(this.d,this.b)*s.MathUtils.radDeg},v.prototype.getWorldScaleX=function(){return Math.sqrt(this.a*this.a+this.c*this.c)},v.prototype.getWorldScaleY=function(){return Math.sqrt(this.b*this.b+this.d*this.d)},v.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var a=this.parent;if(a==null){this.ax=this.worldX,this.ay=this.worldY,this.arotation=Math.atan2(this.c,this.a)*s.MathUtils.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*s.MathUtils.radDeg;return}var t=a.a,n=a.b,r=a.c,i=a.d,u=1/(t*i-n*r),h=this.worldX-a.worldX,d=this.worldY-a.worldY;this.ax=h*i*u-d*n*u,this.ay=d*t*u-h*r*u;var c=u*i,o=u*t,l=u*n,p=u*r,f=c*this.a-l*this.c,m=c*this.b-l*this.d,C=o*this.c-p*this.a,y=o*this.d-p*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(f*f+C*C),this.ascaleX>1e-4){var w=f*y-m*C;this.ascaleY=w/this.ascaleX,this.ashearY=Math.atan2(f*m+C*y,w)*s.MathUtils.radDeg,this.arotation=Math.atan2(C,f)*s.MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(m*m+y*y),this.ashearY=0,this.arotation=90-Math.atan2(y,m)*s.MathUtils.radDeg},v.prototype.worldToLocal=function(a){var t=this.a,n=this.b,r=this.c,i=this.d,u=1/(t*i-n*r),h=a.x-this.worldX,d=a.y-this.worldY;return a.x=h*i*u-d*n*u,a.y=d*t*u-h*r*u,a},v.prototype.localToWorld=function(a){var t=a.x,n=a.y;return a.x=t*this.a+n*this.b+this.worldX,a.y=t*this.c+n*this.d+this.worldY,a},v.prototype.worldToLocalRotation=function(a){var t=s.MathUtils.sinDeg(a),n=s.MathUtils.cosDeg(a);return Math.atan2(this.a*t-this.c*n,this.d*n-this.b*t)*s.MathUtils.radDeg+this.rotation-this.shearX},v.prototype.localToWorldRotation=function(a){a-=this.rotation-this.shearX;var t=s.MathUtils.sinDeg(a),n=s.MathUtils.cosDeg(a);return Math.atan2(n*this.c+t*this.d,n*this.a+t*this.b)*s.MathUtils.radDeg},v.prototype.rotateWorld=function(a){var t=this.a,n=this.b,r=this.c,i=this.d,u=s.MathUtils.cosDeg(a),h=s.MathUtils.sinDeg(a);this.a=u*t-h*r,this.b=u*n-h*i,this.c=h*t+u*r,this.d=h*n+u*i,this.appliedValid=!1},v}();s.Bone=e})(B||(B={}));var B;(function(s){var e=function(){function a(t,n,r){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=v.Normal,this.skinRequired=!1,this.color=new s.Color,t<0)throw new Error("index must be >= 0.");if(n==null)throw new Error("name cannot be null.");this.index=t,this.name=n,this.parent=r}return a}();s.BoneData=e;var v;(function(a){a[a.Normal=0]="Normal",a[a.OnlyTranslation=1]="OnlyTranslation",a[a.NoRotationOrReflection=2]="NoRotationOrReflection",a[a.NoScale=3]="NoScale",a[a.NoScaleOrReflection=4]="NoScaleOrReflection"})(v=s.TransformMode||(s.TransformMode={}))})(B||(B={}));var B;(function(s){var e=function(){function v(a,t,n){this.name=a,this.order=t,this.skinRequired=n}return v}();s.ConstraintData=e})(B||(B={}));var B;(function(s){var e=function(){function v(a,t){if(t==null)throw new Error("data cannot be null.");this.time=a,this.data=t}return v}();s.Event=e})(B||(B={}));var B;(function(s){var e=function(){function v(a){this.name=a}return v}();s.EventData=e})(B||(B={}));var B;(function(s){var e=function(){function v(a,t){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,a==null)throw new Error("data cannot be null.");if(t==null)throw new Error("skeleton cannot be null.");this.data=a,this.mix=a.mix,this.softness=a.softness,this.bendDirection=a.bendDirection,this.compress=a.compress,this.stretch=a.stretch,this.bones=new Array;for(var n=0;n<a.bones.length;n++)this.bones.push(t.findBone(a.bones[n].name));this.target=t.findBone(a.target.name)}return v.prototype.isActive=function(){return this.active},v.prototype.apply=function(){this.update()},v.prototype.update=function(){var a=this.target,t=this.bones;switch(t.length){case 1:this.apply1(t[0],a.worldX,a.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(t[0],t[1],a.worldX,a.worldY,this.bendDirection,this.stretch,this.softness,this.mix);break}},v.prototype.apply1=function(a,t,n,r,i,u,h){a.appliedValid||a.updateAppliedTransform();var d=a.parent,c=d.a,o=d.b,l=d.c,p=d.d,f=-a.ashearX-a.arotation,m=0,C=0;switch(a.data.transformMode){case s.TransformMode.OnlyTranslation:m=t-a.worldX,C=n-a.worldY;break;case s.TransformMode.NoRotationOrReflection:var y=Math.abs(c*p-o*l)/(c*c+l*l),w=c/a.skeleton.scaleX,T=l/a.skeleton.scaleY;o=-T*y*a.skeleton.scaleX,p=w*y*a.skeleton.scaleY,f+=Math.atan2(T,w)*s.MathUtils.radDeg;default:var S=t-d.worldX,x=n-d.worldY,M=c*p-o*l;m=(S*p-x*o)/M-a.ax,C=(x*c-S*l)/M-a.ay}f+=Math.atan2(C,m)*s.MathUtils.radDeg,a.ascaleX<0&&(f+=180),f>180?f-=360:f<-180&&(f+=360);var A=a.ascaleX,P=a.ascaleY;if(r||i){switch(a.data.transformMode){case s.TransformMode.NoScale:case s.TransformMode.NoScaleOrReflection:m=t-a.worldX,C=n-a.worldY}var R=a.data.length*A,D=Math.sqrt(m*m+C*C);if(r&&D<R||i&&D>R&&R>1e-4){var y=(D/R-1)*h+1;A*=y,u&&(P*=y)}}a.updateWorldTransformWith(a.ax,a.ay,a.arotation+f*h,A,P,a.ashearX,a.ashearY)},v.prototype.apply2=function(a,t,n,r,i,u,h,d){if(d==0){t.updateWorldTransform();return}a.appliedValid||a.updateAppliedTransform(),t.appliedValid||t.updateAppliedTransform();var c=a.ax,o=a.ay,l=a.ascaleX,p=l,f=a.ascaleY,m=t.ascaleX,C=0,y=0,w=0;l<0?(l=-l,C=180,w=-1):(C=0,w=1),f<0&&(f=-f,w=-w),m<0?(m=-m,y=180):y=0;var T=t.ax,S=0,x=0,M=0,A=a.a,P=a.b,R=a.c,D=a.d,I=Math.abs(l-f)<=1e-4;I?(S=t.ay,x=A*T+P*S+a.worldX,M=R*T+D*S+a.worldY):(S=0,x=A*T+a.worldX,M=R*T+a.worldY);var V=a.parent;A=V.a,P=V.b,R=V.c,D=V.d;var N=1/(A*D-P*R),L=x-V.worldX,g=M-V.worldY,E=(L*D-g*P)*N-c,F=(g*A-L*R)*N-o,_=Math.sqrt(E*E+F*F),G=t.data.length*m,Y,Z;if(_<1e-4){this.apply1(a,n,r,!1,u,!1,d),t.updateWorldTransformWith(T,S,0,t.ascaleX,t.ascaleY,t.ashearX,t.ashearY);return}L=n-V.worldX,g=r-V.worldY;var W=(L*D-g*P)*N-c,U=(g*A-L*R)*N-o,O=W*W+U*U;if(h!=0){h*=l*(m+1)/2;var k=Math.sqrt(O),z=k-_-G*l+h;if(z>0){var j=Math.min(1,z/(h*2))-1;j=(z-h*(1-j*j))/k,W-=j*W,U-=j*U,O=W*W+U*U}}t:if(I){G*=l;var H=(O-_*_-G*G)/(2*_*G);H<-1?H=-1:H>1&&(H=1,u&&(p*=(Math.sqrt(O)/(_+G)-1)*d+1)),Z=Math.acos(H)*i,A=_+G*H,P=G*Math.sin(Z),Y=Math.atan2(U*A-W*P,W*A+U*P)}else{A=l*G,P=f*G;var q=A*A,Q=P*P,rt=Math.atan2(U,W);R=Q*_*_+q*O-q*Q;var K=-2*Q*_,ht=Q-q;if(D=K*K-4*ht*R,D>=0){var ot=Math.sqrt(D);K<0&&(ot=-ot),ot=-(K+ot)/2;var vt=ot/ht,pt=R/ot,ct=Math.abs(vt)<Math.abs(pt)?vt:pt;if(ct*ct<=O){g=Math.sqrt(O-ct*ct)*i,Y=rt-Math.atan2(g,ct),Z=Math.atan2(g/f,(ct-_)/l);break t}}var mt=s.MathUtils.PI,st=_-A,at=st*st,it=0,Et=0,yt=_+A,Dt=yt*yt,St=0;R=-A*_/(q-Q),R>=-1&&R<=1&&(R=Math.acos(R),L=A*Math.cos(R)+_,g=P*Math.sin(R),D=L*L+g*g,D<at&&(mt=R,at=D,st=L,it=g),D>Dt&&(Et=R,Dt=D,yt=L,St=g)),O<=(at+Dt)/2?(Y=rt-Math.atan2(it*i,st),Z=mt*i):(Y=rt-Math.atan2(St*i,yt),Z=Et*i)}var Pt=Math.atan2(S,T)*w,dt=a.arotation;Y=(Y-Pt)*s.MathUtils.radDeg+C-dt,Y>180?Y-=360:Y<-180&&(Y+=360),a.updateWorldTransformWith(c,o,dt+Y*d,p,a.ascaleY,0,0),dt=t.arotation,Z=((Z+Pt)*s.MathUtils.radDeg-t.ashearX)*w+y-dt,Z>180?Z-=360:Z<-180&&(Z+=360),t.updateWorldTransformWith(T,S,dt+Z*d,t.ascaleX,t.ascaleY,t.ashearX,t.ashearY)},v}();s.IkConstraint=e})(B||(B={}));var B;(function(s){var e=function(v){nt(a,v);function a(t){var n=v.call(this,t,0,!1)||this;return n.bones=new Array,n.bendDirection=1,n.compress=!1,n.stretch=!1,n.uniform=!1,n.mix=1,n.softness=0,n}return a}(s.ConstraintData);s.IkConstraintData=e})(B||(B={}));var B;(function(s){var e=function(){function v(a,t){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,a==null)throw new Error("data cannot be null.");if(t==null)throw new Error("skeleton cannot be null.");this.data=a,this.bones=new Array;for(var n=0,r=a.bones.length;n<r;n++)this.bones.push(t.findBone(a.bones[n].name));this.target=t.findSlot(a.target.name),this.position=a.position,this.spacing=a.spacing,this.rotateMix=a.rotateMix,this.translateMix=a.translateMix}return v.prototype.isActive=function(){return this.active},v.prototype.apply=function(){this.update()},v.prototype.update=function(){var a=this.target.getAttachment();if(a instanceof s.PathAttachment){var t=this.rotateMix,n=this.translateMix,r=n>0,i=t>0;if(!(!r&&!i)){var u=this.data,h=u.spacingMode==s.SpacingMode.Percent,d=u.rotateMode,c=d==s.RotateMode.Tangent,o=d==s.RotateMode.ChainScale,l=this.bones.length,p=c?l:l+1,f=this.bones,m=s.Utils.setArraySize(this.spaces,p),C=null,y=this.spacing;if(o||!h){o&&(C=s.Utils.setArraySize(this.lengths,l));for(var w=u.spacingMode==s.SpacingMode.Length,T=0,S=p-1;T<S;){var x=f[T],M=x.data.length;if(M<v.epsilon)o&&(C[T]=0),m[++T]=0;else if(h){if(o){var A=M*x.a,P=M*x.c,R=Math.sqrt(A*A+P*P);C[T]=R}m[++T]=y}else{var A=M*x.a,P=M*x.c,D=Math.sqrt(A*A+P*P);o&&(C[T]=D),m[++T]=(w?M+y:y)*D/M}}}else for(var T=1;T<p;T++)m[T]=y;var I=this.computeWorldPositions(a,p,c,u.positionMode==s.PositionMode.Percent,h),V=I[0],N=I[1],L=u.offsetRotation,g=!1;if(L==0)g=d==s.RotateMode.Chain;else{g=!1;var E=this.target.bone;L*=E.a*E.d-E.b*E.c>0?s.MathUtils.degRad:-s.MathUtils.degRad}for(var T=0,E=3;T<l;T++,E+=3){var x=f[T];x.worldX+=(V-x.worldX)*n,x.worldY+=(N-x.worldY)*n;var A=I[E],P=I[E+1],F=A-V,_=P-N;if(o){var G=C[T];if(G!=0){var Y=(Math.sqrt(F*F+_*_)/G-1)*t+1;x.a*=Y,x.c*=Y}}if(V=A,N=P,i){var Z=x.a,W=x.b,U=x.c,O=x.d,k=0,z=0,j=0;if(c?k=I[E-1]:m[T+1]==0?k=I[E+2]:k=Math.atan2(_,F),k-=Math.atan2(U,Z),g){z=Math.cos(k),j=Math.sin(k);var H=x.data.length;V+=(H*(z*Z-j*U)-F)*t,N+=(H*(j*Z+z*U)-_)*t}else k+=L;k>s.MathUtils.PI?k-=s.MathUtils.PI2:k<-s.MathUtils.PI&&(k+=s.MathUtils.PI2),k*=t,z=Math.cos(k),j=Math.sin(k),x.a=z*Z-j*U,x.b=z*W-j*O,x.c=j*Z+z*U,x.d=j*W+z*O}x.appliedValid=!1}}}},v.prototype.computeWorldPositions=function(a,t,n,r,i){var u=this.target,h=this.position,d=this.spaces,c=s.Utils.setArraySize(this.positions,t*3+2),o=null,l=a.closed,p=a.worldVerticesLength,f=p/6,m=v.NONE;if(!a.constantSpeed){var C=a.lengths;f-=l?1:2;var y=C[f];if(r&&(h*=y),i)for(var w=1;w<t;w++)d[w]*=y;o=s.Utils.setArraySize(this.world,8);for(var w=0,T=0,S=0;w<t;w++,T+=3){var x=d[w];h+=x;var M=h;if(l)M%=y,M<0&&(M+=y),S=0;else if(M<0){m!=v.BEFORE&&(m=v.BEFORE,a.computeWorldVertices(u,2,4,o,0,2)),this.addBeforePosition(M,o,0,c,T);continue}else if(M>y){m!=v.AFTER&&(m=v.AFTER,a.computeWorldVertices(u,p-6,4,o,0,2)),this.addAfterPosition(M-y,o,0,c,T);continue}for(;;S++){var A=C[S];if(!(M>A)){if(S==0)M/=A;else{var P=C[S-1];M=(M-P)/(A-P)}break}}S!=m&&(m=S,l&&S==f?(a.computeWorldVertices(u,p-4,4,o,0,2),a.computeWorldVertices(u,0,4,o,4,2)):a.computeWorldVertices(u,S*6+2,8,o,0,2)),this.addCurvePosition(M,o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],c,T,n||w>0&&x==0)}return c}l?(p+=2,o=s.Utils.setArraySize(this.world,p),a.computeWorldVertices(u,2,p-4,o,0,2),a.computeWorldVertices(u,0,2,o,p-4,2),o[p-2]=o[0],o[p-1]=o[1]):(f--,p-=4,o=s.Utils.setArraySize(this.world,p),a.computeWorldVertices(u,2,p,o,0,2));for(var R=s.Utils.setArraySize(this.curves,f),D=0,I=o[0],V=o[1],N=0,L=0,g=0,E=0,F=0,_=0,G=0,Y=0,Z=0,W=0,U=0,O=0,k=0,z=0,w=0,j=2;w<f;w++,j+=6)N=o[j],L=o[j+1],g=o[j+2],E=o[j+3],F=o[j+4],_=o[j+5],G=(I-N*2+g)*.1875,Y=(V-L*2+E)*.1875,Z=((N-g)*3-I+F)*.09375,W=((L-E)*3-V+_)*.09375,U=G*2+Z,O=Y*2+W,k=(N-I)*.75+G+Z*.16666667,z=(L-V)*.75+Y+W*.16666667,D+=Math.sqrt(k*k+z*z),k+=U,z+=O,U+=Z,O+=W,D+=Math.sqrt(k*k+z*z),k+=U,z+=O,D+=Math.sqrt(k*k+z*z),k+=U+Z,z+=O+W,D+=Math.sqrt(k*k+z*z),R[w]=D,I=F,V=_;if(r?h*=D:h*=D/a.lengths[f-1],i)for(var w=1;w<t;w++)d[w]*=D;for(var H=this.segments,q=0,w=0,T=0,S=0,Q=0;w<t;w++,T+=3){var x=d[w];h+=x;var M=h;if(l)M%=D,M<0&&(M+=D),S=0;else if(M<0){this.addBeforePosition(M,o,0,c,T);continue}else if(M>D){this.addAfterPosition(M-D,o,p-4,c,T);continue}for(;;S++){var rt=R[S];if(!(M>rt)){if(S==0)M/=rt;else{var P=R[S-1];M=(M-P)/(rt-P)}break}}if(S!=m){m=S;var K=S*6;for(I=o[K],V=o[K+1],N=o[K+2],L=o[K+3],g=o[K+4],E=o[K+5],F=o[K+6],_=o[K+7],G=(I-N*2+g)*.03,Y=(V-L*2+E)*.03,Z=((N-g)*3-I+F)*.006,W=((L-E)*3-V+_)*.006,U=G*2+Z,O=Y*2+W,k=(N-I)*.3+G+Z*.16666667,z=(L-V)*.3+Y+W*.16666667,q=Math.sqrt(k*k+z*z),H[0]=q,K=1;K<8;K++)k+=U,z+=O,U+=Z,O+=W,q+=Math.sqrt(k*k+z*z),H[K]=q;k+=U,z+=O,q+=Math.sqrt(k*k+z*z),H[8]=q,k+=U+Z,z+=O+W,q+=Math.sqrt(k*k+z*z),H[9]=q,Q=0}for(M*=q;;Q++){var ht=H[Q];if(!(M>ht)){if(Q==0)M/=ht;else{var P=H[Q-1];M=Q+(M-P)/(ht-P)}break}}this.addCurvePosition(M*.1,I,V,N,L,g,E,F,_,c,T,n||w>0&&x==0)}return c},v.prototype.addBeforePosition=function(a,t,n,r,i){var u=t[n],h=t[n+1],d=t[n+2]-u,c=t[n+3]-h,o=Math.atan2(c,d);r[i]=u+a*Math.cos(o),r[i+1]=h+a*Math.sin(o),r[i+2]=o},v.prototype.addAfterPosition=function(a,t,n,r,i){var u=t[n+2],h=t[n+3],d=u-t[n],c=h-t[n+1],o=Math.atan2(c,d);r[i]=u+a*Math.cos(o),r[i+1]=h+a*Math.sin(o),r[i+2]=o},v.prototype.addCurvePosition=function(a,t,n,r,i,u,h,d,c,o,l,p){if(a==0||isNaN(a)){o[l]=t,o[l+1]=n,o[l+2]=Math.atan2(i-n,r-t);return}var f=a*a,m=f*a,C=1-a,y=C*C,w=y*C,T=C*a,S=T*3,x=C*S,M=S*a,A=t*w+r*x+u*M+d*m,P=n*w+i*x+h*M+c*m;o[l]=A,o[l+1]=P,p&&(a<.001?o[l+2]=Math.atan2(i-n,r-t):o[l+2]=Math.atan2(P-(n*y+i*T*2+h*f),A-(t*y+r*T*2+u*f)))},v.NONE=-1,v.BEFORE=-2,v.AFTER=-3,v.epsilon=1e-5,v}();s.PathConstraint=e})(B||(B={}));var B;(function(s){var e=function(v){nt(a,v);function a(t){var n=v.call(this,t,0,!1)||this;return n.bones=new Array,n}return a}(s.ConstraintData);s.PathConstraintData=e,function(v){v[v.Fixed=0]="Fixed",v[v.Percent=1]="Percent"}(s.PositionMode||(s.PositionMode={})),function(v){v[v.Length=0]="Length",v[v.Fixed=1]="Fixed",v[v.Percent=2]="Percent"}(s.SpacingMode||(s.SpacingMode={})),function(v){v[v.Tangent=0]="Tangent",v[v.Chain=1]="Chain",v[v.ChainScale=2]="ChainScale"}(s.RotateMode||(s.RotateMode={}))})(B||(B={}));var B;(function(s){var e=function(){function a(t){this.toLoad=new Array,this.assets={},this.clientId=t}return a.prototype.loaded=function(){var t=0;for(var n in this.assets)t++;return t},a}(),v=function(){function a(t){t===void 0&&(t=""),this.clientAssets={},this.queuedAssets={},this.rawAssets={},this.errors={},this.pathPrefix=t}return a.prototype.queueAsset=function(t,n,r){var i=this.clientAssets[t];return i==null&&(i=new e(t),this.clientAssets[t]=i),n!==null&&(i.textureLoader=n),i.toLoad.push(r),this.queuedAssets[r]===r?!1:(this.queuedAssets[r]=r,!0)},a.prototype.loadText=function(t,n){var r=this;if(n=this.pathPrefix+n,!!this.queueAsset(t,null,n)){var i=new XMLHttpRequest;i.overrideMimeType("text/html"),i.onreadystatechange=function(){i.readyState==XMLHttpRequest.DONE&&(i.status>=200&&i.status<300?r.rawAssets[n]=i.responseText:r.errors[n]="Couldn't load text ".concat(n,": status ").concat(i.status,", ").concat(i.responseText))},i.open("GET",n,!0),i.send()}},a.prototype.loadJson=function(t,n){var r=this;if(n=this.pathPrefix+n,!!this.queueAsset(t,null,n)){var i=new XMLHttpRequest;i.overrideMimeType("text/html"),i.onreadystatechange=function(){i.readyState==XMLHttpRequest.DONE&&(i.status>=200&&i.status<300?r.rawAssets[n]=JSON.parse(i.responseText):r.errors[n]="Couldn't load text ".concat(n,": status ").concat(i.status,", ").concat(i.responseText))},i.open("GET",n,!0),i.send()}},a.prototype.loadTexture=function(t,n,r){var i=this;if(r=this.pathPrefix+r,!!this.queueAsset(t,n,r)){var u=!!(typeof window<"u"&&typeof navigator<"u"&&window.document),h=!u&&typeof importScripts<"u";if(h){var d={mode:"cors"};fetch(r,d).then(function(o){return o.ok||(i.errors[r]="Couldn't load image "+r),o.blob()}).then(function(o){return createImageBitmap(o,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(o){i.rawAssets[r]=o})}else{var c=new Image;c.crossOrigin="anonymous",c.onload=function(o){i.rawAssets[r]=c},c.onerror=function(o){i.errors[r]="Couldn't load image ".concat(r)},c.src=r}}},a.prototype.get=function(t,n){n=this.pathPrefix+n;var r=this.clientAssets[t];return r==null?!0:r.assets[n]},a.prototype.updateClientAssets=function(t){for(var n=!!(typeof window<"u"&&typeof navigator<"u"&&window.document),r=!n&&typeof importScripts<"u",i=0;i<t.toLoad.length;i++){var u=t.toLoad[i],h=t.assets[u];if(h==null){var d=this.rawAssets[u];if(d==null)continue;r?d instanceof ImageBitmap?t.assets[u]=t.textureLoader(d):t.assets[u]=d:d instanceof HTMLImageElement?t.assets[u]=t.textureLoader(d):t.assets[u]=d}}},a.prototype.isLoadingComplete=function(t){var n=this.clientAssets[t];return n==null?!0:(this.updateClientAssets(n),n.toLoad.length==n.loaded())},a.prototype.dispose=function(){},a.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},a.prototype.getErrors=function(){return this.errors},a}();s.SharedAssetManager=v})(B||(B={}));var B;(function(s){var e=function(){function v(a){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,a==null)throw new Error("data cannot be null.");this.data=a,this.bones=new Array;for(var t=0;t<a.bones.length;t++){var n=a.bones[t],r=void 0;if(n.parent==null)r=new s.Bone(n,this,null);else{var i=this.bones[n.parent.index];r=new s.Bone(n,this,i),i.children.push(r)}this.bones.push(r)}this.slots=new Array,this.drawOrder=new Array;for(var t=0;t<a.slots.length;t++){var u=a.slots[t],r=this.bones[u.boneData.index],h=new s.Slot(u,r);this.slots.push(h),this.drawOrder.push(h)}this.ikConstraints=new Array;for(var t=0;t<a.ikConstraints.length;t++){var d=a.ikConstraints[t];this.ikConstraints.push(new s.IkConstraint(d,this))}this.transformConstraints=new Array;for(var t=0;t<a.transformConstraints.length;t++){var c=a.transformConstraints[t];this.transformConstraints.push(new s.TransformConstraint(c,this))}this.pathConstraints=new Array;for(var t=0;t<a.pathConstraints.length;t++){var o=a.pathConstraints[t];this.pathConstraints.push(new s.PathConstraint(o,this))}this.color=new s.Color(1,1,1,1),this.updateCache()}return v.prototype.updateCache=function(){var a=this._updateCache;a.length=0,this.updateCacheReset.length=0;for(var t=this.bones,n=0,r=t.length;n<r;n++){var i=t[n];i.sorted=i.data.skinRequired,i.active=!i.sorted}if(this.skin!=null)for(var u=this.skin.bones,n=0,r=this.skin.bones.length;n<r;n++){var i=this.bones[u[n].index];do i.sorted=!1,i.active=!0,i=i.parent;while(i!=null)}var h=this.ikConstraints,d=this.transformConstraints,c=this.pathConstraints,o=h.length,l=d.length,p=c.length,f=o+l+p;t:for(var n=0;n<f;n++){for(var m=0;m<o;m++){var C=h[m];if(C.data.order==n){this.sortIkConstraint(C);continue t}}for(var m=0;m<l;m++){var C=d[m];if(C.data.order==n){this.sortTransformConstraint(C);continue t}}for(var m=0;m<p;m++){var C=c[m];if(C.data.order==n){this.sortPathConstraint(C);continue t}}}for(var n=0,r=t.length;n<r;n++)this.sortBone(t[n])},v.prototype.sortIkConstraint=function(a){if(a.active=a.target.isActive()&&(!a.data.skinRequired||this.skin!=null&&s.Utils.contains(this.skin.constraints,a.data,!0)),!!a.active){var t=a.target;this.sortBone(t);var n=a.bones,r=n[0];if(this.sortBone(r),n.length>1){var i=n[n.length-1];this._updateCache.indexOf(i)>-1||this.updateCacheReset.push(i)}this._updateCache.push(a),this.sortReset(r.children),n[n.length-1].sorted=!0}},v.prototype.sortPathConstraint=function(a){if(a.active=a.target.bone.isActive()&&(!a.data.skinRequired||this.skin!=null&&s.Utils.contains(this.skin.constraints,a.data,!0)),!!a.active){var t=a.target,n=t.data.index,r=t.bone;this.skin!=null&&this.sortPathConstraintAttachment(this.skin,n,r),this.data.defaultSkin!=null&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,r);for(var i=0,u=this.data.skins.length;i<u;i++)this.sortPathConstraintAttachment(this.data.skins[i],n,r);var h=t.getAttachment();h instanceof s.PathAttachment&&this.sortPathConstraintAttachmentWith(h,r);for(var d=a.bones,c=d.length,i=0;i<c;i++)this.sortBone(d[i]);this._updateCache.push(a);for(var i=0;i<c;i++)this.sortReset(d[i].children);for(var i=0;i<c;i++)d[i].sorted=!0}},v.prototype.sortTransformConstraint=function(a){if(a.active=a.target.isActive()&&(!a.data.skinRequired||this.skin!=null&&s.Utils.contains(this.skin.constraints,a.data,!0)),!!a.active){this.sortBone(a.target);var t=a.bones,n=t.length;if(a.data.local)for(var r=0;r<n;r++){var i=t[r];this.sortBone(i.parent),this._updateCache.indexOf(i)>-1||this.updateCacheReset.push(i)}else for(var r=0;r<n;r++)this.sortBone(t[r]);this._updateCache.push(a);for(var u=0;u<n;u++)this.sortReset(t[u].children);for(var u=0;u<n;u++)t[u].sorted=!0}},v.prototype.sortPathConstraintAttachment=function(a,t,n){var r=a.attachments[t];if(r)for(var i in r)this.sortPathConstraintAttachmentWith(r[i],n)},v.prototype.sortPathConstraintAttachmentWith=function(a,t){if(a instanceof s.PathAttachment){var n=a.bones;if(n==null)this.sortBone(t);else for(var r=this.bones,i=0;i<n.length;)for(var u=n[i++],h=i+u;i<h;i++){var d=n[i];this.sortBone(r[d])}}},v.prototype.sortBone=function(a){if(!a.sorted){var t=a.parent;t!=null&&this.sortBone(t),a.sorted=!0,this._updateCache.push(a)}},v.prototype.sortReset=function(a){for(var t=0,n=a.length;t<n;t++){var r=a[t];r.active&&(r.sorted&&this.sortReset(r.children),r.sorted=!1)}},v.prototype.updateWorldTransform=function(){for(var a=this.updateCacheReset,t=0,n=a.length;t<n;t++){var r=a[t];r.ax=r.x,r.ay=r.y,r.arotation=r.rotation,r.ascaleX=r.scaleX,r.ascaleY=r.scaleY,r.ashearX=r.shearX,r.ashearY=r.shearY,r.appliedValid=!0}for(var i=this._updateCache,t=0,n=i.length;t<n;t++)i[t].update()},v.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},v.prototype.setBonesToSetupPose=function(){for(var a=this.bones,t=0,n=a.length;t<n;t++)a[t].setToSetupPose();for(var r=this.ikConstraints,t=0,n=r.length;t<n;t++){var i=r[t];i.mix=i.data.mix,i.softness=i.data.softness,i.bendDirection=i.data.bendDirection,i.compress=i.data.compress,i.stretch=i.data.stretch}for(var u=this.transformConstraints,t=0,n=u.length;t<n;t++){var i=u[t],h=i.data;i.rotateMix=h.rotateMix,i.translateMix=h.translateMix,i.scaleMix=h.scaleMix,i.shearMix=h.shearMix}for(var d=this.pathConstraints,t=0,n=d.length;t<n;t++){var i=d[t],h=i.data;i.position=h.position,i.spacing=h.spacing,i.rotateMix=h.rotateMix,i.translateMix=h.translateMix}},v.prototype.setSlotsToSetupPose=function(){var a=this.slots;s.Utils.arrayCopy(a,0,this.drawOrder,0,a.length);for(var t=0,n=a.length;t<n;t++)a[t].setToSetupPose()},v.prototype.getRootBone=function(){return this.bones.length==0?null:this.bones[0]},v.prototype.findBone=function(a){if(a==null)throw new Error("boneName cannot be null.");for(var t=this.bones,n=0,r=t.length;n<r;n++){var i=t[n];if(i.data.name==a)return i}return null},v.prototype.findBoneIndex=function(a){if(a==null)throw new Error("boneName cannot be null.");for(var t=this.bones,n=0,r=t.length;n<r;n++)if(t[n].data.name==a)return n;return-1},v.prototype.findSlot=function(a){if(a==null)throw new Error("slotName cannot be null.");for(var t=this.slots,n=0,r=t.length;n<r;n++){var i=t[n];if(i.data.name==a)return i}return null},v.prototype.findSlotIndex=function(a){if(a==null)throw new Error("slotName cannot be null.");for(var t=this.slots,n=0,r=t.length;n<r;n++)if(t[n].data.name==a)return n;return-1},v.prototype.setSkinByName=function(a){var t=this.data.findSkin(a);if(t==null)throw new Error("Skin not found: "+a);this.setSkin(t)},v.prototype.setSkin=function(a){if(a!=this.skin){if(a!=null)if(this.skin!=null)a.attachAll(this,this.skin);else for(var t=this.slots,n=0,r=t.length;n<r;n++){var i=t[n],u=i.data.attachmentName;if(u!=null){var h=a.getAttachment(n,u);h!=null&&i.setAttachment(h)}}this.skin=a,this.updateCache()}},v.prototype.getAttachmentByName=function(a,t){return this.getAttachment(this.data.findSlotIndex(a),t)},v.prototype.getAttachment=function(a,t){if(t==null)throw new Error("attachmentName cannot be null.");if(this.skin!=null){var n=this.skin.getAttachment(a,t);if(n!=null)return n}return this.data.defaultSkin!=null?this.data.defaultSkin.getAttachment(a,t):null},v.prototype.setAttachment=function(a,t){if(a==null)throw new Error("slotName cannot be null.");for(var n=this.slots,r=0,i=n.length;r<i;r++){var u=n[r];if(u.data.name==a){var h=null;if(t!=null&&(h=this.getAttachment(r,t),h==null))throw new Error("Attachment not found: "+t+", for slot: "+a);u.setAttachment(h);return}}throw new Error("Slot not found: "+a)},v.prototype.findIkConstraint=function(a){if(a==null)throw new Error("constraintName cannot be null.");for(var t=this.ikConstraints,n=0,r=t.length;n<r;n++){var i=t[n];if(i.data.name==a)return i}return null},v.prototype.findTransformConstraint=function(a){if(a==null)throw new Error("constraintName cannot be null.");for(var t=this.transformConstraints,n=0,r=t.length;n<r;n++){var i=t[n];if(i.data.name==a)return i}return null},v.prototype.findPathConstraint=function(a){if(a==null)throw new Error("constraintName cannot be null.");for(var t=this.pathConstraints,n=0,r=t.length;n<r;n++){var i=t[n];if(i.data.name==a)return i}return null},v.prototype.getBounds=function(a,t,n){if(n===void 0&&(n=new Array(2)),a==null)throw new Error("offset cannot be null.");if(t==null)throw new Error("size cannot be null.");for(var r=this.drawOrder,i=Number.POSITIVE_INFINITY,u=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,d=Number.NEGATIVE_INFINITY,c=0,o=r.length;c<o;c++){var l=r[c];if(l.bone.active){var p=0,f=null,m=l.getAttachment();if(m instanceof s.RegionAttachment)p=8,f=s.Utils.setArraySize(n,p,0),m.computeWorldVertices(l.bone,f,0,2);else if(m instanceof s.MeshAttachment){var C=m;p=C.worldVerticesLength,f=s.Utils.setArraySize(n,p,0),C.computeWorldVertices(l,0,p,f,0,2)}if(f!=null)for(var y=0,w=f.length;y<w;y+=2){var T=f[y],S=f[y+1];i=Math.min(i,T),u=Math.min(u,S),h=Math.max(h,T),d=Math.max(d,S)}}}a.set(i,u),t.set(h-i,d-u)},v.prototype.update=function(a){this.time+=a},v}();s.Skeleton=e})(B||(B={}));var B;(function(s){var e=function(){function n(r){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=r}return n.prototype.readSkeletonData=function(r){var i=this.scale,u=new s.SkeletonData;u.name="";var h=new v(r);if(u.hash=h.readString(),u.version=h.readString(),u.version=="3.8.75")throw new Error("Unsupported skeleton data, please export with a newer version of Spine.");u.x=h.readFloat(),u.y=h.readFloat(),u.width=h.readFloat(),u.height=h.readFloat();var d=h.readBoolean();d&&(u.fps=h.readFloat(),u.imagesPath=h.readString(),u.audioPath=h.readString());var c=0;c=h.readInt(!0);for(var o=0;o<c;o++)h.strings.push(h.readString());c=h.readInt(!0);for(var o=0;o<c;o++){var l=h.readString(),p=o==0?null:u.bones[h.readInt(!0)],f=new s.BoneData(o,l,p);f.rotation=h.readFloat(),f.x=h.readFloat()*i,f.y=h.readFloat()*i,f.scaleX=h.readFloat(),f.scaleY=h.readFloat(),f.shearX=h.readFloat(),f.shearY=h.readFloat(),f.length=h.readFloat()*i,f.transformMode=n.TransformModeValues[h.readInt(!0)],f.skinRequired=h.readBoolean(),d&&s.Color.rgba8888ToColor(f.color,h.readInt32()),u.bones.push(f)}c=h.readInt(!0);for(var o=0;o<c;o++){var m=h.readString(),C=u.bones[h.readInt(!0)],f=new s.SlotData(o,m,C);s.Color.rgba8888ToColor(f.color,h.readInt32());var y=h.readInt32();y!=-1&&s.Color.rgb888ToColor(f.darkColor=new s.Color,y),f.attachmentName=h.readStringRef(),f.blendMode=n.BlendModeValues[h.readInt(!0)],u.slots.push(f)}c=h.readInt(!0);for(var o=0,w=void 0;o<c;o++){var f=new s.IkConstraintData(h.readString());f.order=h.readInt(!0),f.skinRequired=h.readBoolean(),w=h.readInt(!0);for(var T=0;T<w;T++)f.bones.push(u.bones[h.readInt(!0)]);f.target=u.bones[h.readInt(!0)],f.mix=h.readFloat(),f.softness=h.readFloat()*i,f.bendDirection=h.readByte(),f.compress=h.readBoolean(),f.stretch=h.readBoolean(),f.uniform=h.readBoolean(),u.ikConstraints.push(f)}c=h.readInt(!0);for(var o=0,w=void 0;o<c;o++){var f=new s.TransformConstraintData(h.readString());f.order=h.readInt(!0),f.skinRequired=h.readBoolean(),w=h.readInt(!0);for(var T=0;T<w;T++)f.bones.push(u.bones[h.readInt(!0)]);f.target=u.bones[h.readInt(!0)],f.local=h.readBoolean(),f.relative=h.readBoolean(),f.offsetRotation=h.readFloat(),f.offsetX=h.readFloat()*i,f.offsetY=h.readFloat()*i,f.offsetScaleX=h.readFloat(),f.offsetScaleY=h.readFloat(),f.offsetShearY=h.readFloat(),f.rotateMix=h.readFloat(),f.translateMix=h.readFloat(),f.scaleMix=h.readFloat(),f.shearMix=h.readFloat(),u.transformConstraints.push(f)}c=h.readInt(!0);for(var o=0,w=void 0;o<c;o++){var f=new s.PathConstraintData(h.readString());f.order=h.readInt(!0),f.skinRequired=h.readBoolean(),w=h.readInt(!0);for(var T=0;T<w;T++)f.bones.push(u.bones[h.readInt(!0)]);f.target=u.slots[h.readInt(!0)],f.positionMode=n.PositionModeValues[h.readInt(!0)],f.spacingMode=n.SpacingModeValues[h.readInt(!0)],f.rotateMode=n.RotateModeValues[h.readInt(!0)],f.offsetRotation=h.readFloat(),f.position=h.readFloat(),f.positionMode==s.PositionMode.Fixed&&(f.position*=i),f.spacing=h.readFloat(),(f.spacingMode==s.SpacingMode.Length||f.spacingMode==s.SpacingMode.Fixed)&&(f.spacing*=i),f.rotateMix=h.readFloat(),f.translateMix=h.readFloat(),u.pathConstraints.push(f)}var S=this.readSkin(h,u,!0,d);S!=null&&(u.defaultSkin=S,u.skins.push(S));{var o=u.skins.length;for(s.Utils.setArraySize(u.skins,c=o+h.readInt(!0));o<c;o++)u.skins[o]=this.readSkin(h,u,!1,d)}c=this.linkedMeshes.length;for(var o=0;o<c;o++){var x=this.linkedMeshes[o],M=x.skin==null?u.defaultSkin:u.findSkin(x.skin);if(M==null)throw new Error("Skin not found: "+x.skin);var A=M.getAttachment(x.slotIndex,x.parent);if(A==null)throw new Error("Parent mesh not found: "+x.parent);x.mesh.deformAttachment=x.inheritDeform?A:x.mesh,x.mesh.setParentMesh(A),x.mesh.updateUVs()}this.linkedMeshes.length=0,c=h.readInt(!0);for(var o=0;o<c;o++){var f=new s.EventData(h.readStringRef());f.intValue=h.readInt(!1),f.floatValue=h.readFloat(),f.stringValue=h.readString(),f.audioPath=h.readString(),f.audioPath!=null&&(f.volume=h.readFloat(),f.balance=h.readFloat()),u.events.push(f)}c=h.readInt(!0);for(var o=0;o<c;o++)u.animations.push(this.readAnimation(h,h.readString(),u));return u},n.prototype.readSkin=function(r,i,u,h){var d=null,c=0;if(u){if(c=r.readInt(!0),c==0)return null;d=new s.Skin("default")}else{d=new s.Skin(r.readStringRef()),d.bones.length=r.readInt(!0);for(var o=0,l=d.bones.length;o<l;o++)d.bones[o]=i.bones[r.readInt(!0)];for(var o=0,l=r.readInt(!0);o<l;o++)d.constraints.push(i.ikConstraints[r.readInt(!0)]);for(var o=0,l=r.readInt(!0);o<l;o++)d.constraints.push(i.transformConstraints[r.readInt(!0)]);for(var o=0,l=r.readInt(!0);o<l;o++)d.constraints.push(i.pathConstraints[r.readInt(!0)]);c=r.readInt(!0)}for(var o=0;o<c;o++)for(var p=r.readInt(!0),f=0,m=r.readInt(!0);f<m;f++){var C=r.readStringRef(),y=this.readAttachment(r,i,d,p,C,h);y!=null&&d.setAttachment(p,C,y)}return d},n.prototype.readAttachment=function(r,i,u,h,d,c){var o=this.scale,l=r.readStringRef();l==null&&(l=d);var p=r.readByte(),f=n.AttachmentTypeValues[p];switch(f){case s.AttachmentType.Region:{var m=r.readStringRef(),C=r.readFloat(),y=r.readFloat(),w=r.readFloat(),T=r.readFloat(),S=r.readFloat(),x=r.readFloat(),M=r.readFloat(),A=r.readInt32();m==null&&(m=l);var P=this.attachmentLoader.newRegionAttachment(u,l,m);return P==null?null:(P.path=m,P.x=y*o,P.y=w*o,P.scaleX=T,P.scaleY=S,P.rotation=C,P.width=x*o,P.height=M*o,s.Color.rgba8888ToColor(P.color,A),P.updateOffset(),P)}case s.AttachmentType.BoundingBox:{var R=r.readInt(!0),D=this.readVertices(r,R),A=c?r.readInt32():0,I=this.attachmentLoader.newBoundingBoxAttachment(u,l);return I==null?null:(I.worldVerticesLength=R<<1,I.vertices=D.vertices,I.bones=D.bones,c&&s.Color.rgba8888ToColor(I.color,A),I)}case s.AttachmentType.Mesh:{var m=r.readStringRef(),A=r.readInt32(),R=r.readInt(!0),V=this.readFloatArray(r,R<<1,1),N=this.readShortArray(r),D=this.readVertices(r,R),L=r.readInt(!0),g=null,x=0,M=0;c&&(g=this.readShortArray(r),x=r.readFloat(),M=r.readFloat()),m==null&&(m=l);var E=this.attachmentLoader.newMeshAttachment(u,l,m);return E==null?null:(E.path=m,s.Color.rgba8888ToColor(E.color,A),E.bones=D.bones,E.vertices=D.vertices,E.worldVerticesLength=R<<1,E.triangles=N,E.regionUVs=V,E.updateUVs(),E.hullLength=L<<1,c&&(E.edges=g,E.width=x*o,E.height=M*o),E)}case s.AttachmentType.LinkedMesh:{var m=r.readStringRef(),A=r.readInt32(),F=r.readStringRef(),_=r.readStringRef(),G=r.readBoolean(),x=0,M=0;c&&(x=r.readFloat(),M=r.readFloat()),m==null&&(m=l);var E=this.attachmentLoader.newMeshAttachment(u,l,m);return E==null?null:(E.path=m,s.Color.rgba8888ToColor(E.color,A),c&&(E.width=x*o,E.height=M*o),this.linkedMeshes.push(new a(E,F,h,_,G)),E)}case s.AttachmentType.Path:{for(var Y=r.readBoolean(),Z=r.readBoolean(),R=r.readInt(!0),D=this.readVertices(r,R),W=s.Utils.newArray(R/3,0),U=0,O=W.length;U<O;U++)W[U]=r.readFloat()*o;var A=c?r.readInt32():0,m=this.attachmentLoader.newPathAttachment(u,l);return m==null?null:(m.closed=Y,m.constantSpeed=Z,m.worldVerticesLength=R<<1,m.vertices=D.vertices,m.bones=D.bones,m.lengths=W,c&&s.Color.rgba8888ToColor(m.color,A),m)}case s.AttachmentType.Point:{var C=r.readFloat(),y=r.readFloat(),w=r.readFloat(),A=c?r.readInt32():0,k=this.attachmentLoader.newPointAttachment(u,l);return k==null?null:(k.x=y*o,k.y=w*o,k.rotation=C,c&&s.Color.rgba8888ToColor(k.color,A),k)}case s.AttachmentType.Clipping:{var z=r.readInt(!0),R=r.readInt(!0),D=this.readVertices(r,R),A=c?r.readInt32():0,j=this.attachmentLoader.newClippingAttachment(u,l);return j==null?null:(j.endSlot=i.slots[z],j.worldVerticesLength=R<<1,j.vertices=D.vertices,j.bones=D.bones,c&&s.Color.rgba8888ToColor(j.color,A),j)}}return null},n.prototype.readVertices=function(r,i){var u=i<<1,h=new t,d=this.scale;if(!r.readBoolean())return h.vertices=this.readFloatArray(r,u,d),h;for(var c=new Array,o=new Array,l=0;l<i;l++){var p=r.readInt(!0);o.push(p);for(var f=0;f<p;f++)o.push(r.readInt(!0)),c.push(r.readFloat()*d),c.push(r.readFloat()*d),c.push(r.readFloat())}return h.vertices=s.Utils.toFloatArray(c),h.bones=o,h},n.prototype.readFloatArray=function(r,i,u){var h=new Array(i);if(u==1)for(var d=0;d<i;d++)h[d]=r.readFloat();else for(var d=0;d<i;d++)h[d]=r.readFloat()*u;return h},n.prototype.readShortArray=function(r){for(var i=r.readInt(!0),u=new Array(i),h=0;h<i;h++)u[h]=r.readShort();return u},n.prototype.readAnimation=function(r,i,u){for(var h=new Array,d=this.scale,c=0,o=new s.Color,l=new s.Color,p=0,f=r.readInt(!0);p<f;p++)for(var m=r.readInt(!0),C=0,y=r.readInt(!0);C<y;C++){var w=r.readByte(),T=r.readInt(!0);switch(w){case n.SLOT_ATTACHMENT:{var S=new s.AttachmentTimeline(T);S.slotIndex=m;for(var x=0;x<T;x++)S.setFrame(x,r.readFloat(),r.readStringRef());h.push(S),c=Math.max(c,S.frames[T-1]);break}case n.SLOT_COLOR:{var S=new s.ColorTimeline(T);S.slotIndex=m;for(var x=0;x<T;x++){var M=r.readFloat();s.Color.rgba8888ToColor(o,r.readInt32()),S.setFrame(x,M,o.r,o.g,o.b,o.a),x<T-1&&this.readCurve(r,x,S)}h.push(S),c=Math.max(c,S.frames[(T-1)*s.ColorTimeline.ENTRIES]);break}case n.SLOT_TWO_COLOR:{var S=new s.TwoColorTimeline(T);S.slotIndex=m;for(var x=0;x<T;x++){var M=r.readFloat();s.Color.rgba8888ToColor(o,r.readInt32()),s.Color.rgb888ToColor(l,r.readInt32()),S.setFrame(x,M,o.r,o.g,o.b,o.a,l.r,l.g,l.b),x<T-1&&this.readCurve(r,x,S)}h.push(S),c=Math.max(c,S.frames[(T-1)*s.TwoColorTimeline.ENTRIES]);break}}}for(var p=0,f=r.readInt(!0);p<f;p++)for(var A=r.readInt(!0),C=0,y=r.readInt(!0);C<y;C++){var w=r.readByte(),T=r.readInt(!0);switch(w){case n.BONE_ROTATE:{var S=new s.RotateTimeline(T);S.boneIndex=A;for(var x=0;x<T;x++)S.setFrame(x,r.readFloat(),r.readFloat()),x<T-1&&this.readCurve(r,x,S);h.push(S),c=Math.max(c,S.frames[(T-1)*s.RotateTimeline.ENTRIES]);break}case n.BONE_TRANSLATE:case n.BONE_SCALE:case n.BONE_SHEAR:{var S=void 0,P=1;w==n.BONE_SCALE?S=new s.ScaleTimeline(T):w==n.BONE_SHEAR?S=new s.ShearTimeline(T):(S=new s.TranslateTimeline(T),P=d),S.boneIndex=A;for(var x=0;x<T;x++)S.setFrame(x,r.readFloat(),r.readFloat()*P,r.readFloat()*P),x<T-1&&this.readCurve(r,x,S);h.push(S),c=Math.max(c,S.frames[(T-1)*s.TranslateTimeline.ENTRIES]);break}}}for(var p=0,f=r.readInt(!0);p<f;p++){var R=r.readInt(!0),T=r.readInt(!0),S=new s.IkConstraintTimeline(T);S.ikConstraintIndex=R;for(var x=0;x<T;x++)S.setFrame(x,r.readFloat(),r.readFloat(),r.readFloat()*d,r.readByte(),r.readBoolean(),r.readBoolean()),x<T-1&&this.readCurve(r,x,S);h.push(S),c=Math.max(c,S.frames[(T-1)*s.IkConstraintTimeline.ENTRIES])}for(var p=0,f=r.readInt(!0);p<f;p++){var R=r.readInt(!0),T=r.readInt(!0),S=new s.TransformConstraintTimeline(T);S.transformConstraintIndex=R;for(var x=0;x<T;x++)S.setFrame(x,r.readFloat(),r.readFloat(),r.readFloat(),r.readFloat(),r.readFloat()),x<T-1&&this.readCurve(r,x,S);h.push(S),c=Math.max(c,S.frames[(T-1)*s.TransformConstraintTimeline.ENTRIES])}for(var p=0,f=r.readInt(!0);p<f;p++)for(var R=r.readInt(!0),D=u.pathConstraints[R],C=0,y=r.readInt(!0);C<y;C++){var w=r.readByte(),T=r.readInt(!0);switch(w){case n.PATH_POSITION:case n.PATH_SPACING:{var S=void 0,P=1;w==n.PATH_SPACING?(S=new s.PathConstraintSpacingTimeline(T),(D.spacingMode==s.SpacingMode.Length||D.spacingMode==s.SpacingMode.Fixed)&&(P=d)):(S=new s.PathConstraintPositionTimeline(T),D.positionMode==s.PositionMode.Fixed&&(P=d)),S.pathConstraintIndex=R;for(var x=0;x<T;x++)S.setFrame(x,r.readFloat(),r.readFloat()*P),x<T-1&&this.readCurve(r,x,S);h.push(S),c=Math.max(c,S.frames[(T-1)*s.PathConstraintPositionTimeline.ENTRIES]);break}case n.PATH_MIX:{var S=new s.PathConstraintMixTimeline(T);S.pathConstraintIndex=R;for(var x=0;x<T;x++)S.setFrame(x,r.readFloat(),r.readFloat(),r.readFloat()),x<T-1&&this.readCurve(r,x,S);h.push(S),c=Math.max(c,S.frames[(T-1)*s.PathConstraintMixTimeline.ENTRIES]);break}}}for(var p=0,f=r.readInt(!0);p<f;p++)for(var I=u.skins[r.readInt(!0)],C=0,y=r.readInt(!0);C<y;C++)for(var m=r.readInt(!0),V=0,N=r.readInt(!0);V<N;V++){var L=I.getAttachment(m,r.readStringRef()),g=L.bones!=null,E=L.vertices,F=g?E.length/3*2:E.length,T=r.readInt(!0),S=new s.DeformTimeline(T);S.slotIndex=m,S.attachment=L;for(var x=0;x<T;x++){var M=r.readFloat(),_=void 0,G=r.readInt(!0);if(G==0)_=g?s.Utils.newFloatArray(F):E;else{_=s.Utils.newFloatArray(F);var Y=r.readInt(!0);if(G+=Y,d==1)for(var Z=Y;Z<G;Z++)_[Z]=r.readFloat();else for(var Z=Y;Z<G;Z++)_[Z]=r.readFloat()*d;if(!g)for(var Z=0,W=_.length;Z<W;Z++)_[Z]+=E[Z]}S.setFrame(x,M,_),x<T-1&&this.readCurve(r,x,S)}h.push(S),c=Math.max(c,S.frames[T-1])}var U=r.readInt(!0);if(U>0){for(var S=new s.DrawOrderTimeline(U),O=u.slots.length,p=0;p<U;p++){for(var M=r.readFloat(),k=r.readInt(!0),z=s.Utils.newArray(O,0),C=O-1;C>=0;C--)z[C]=-1;for(var j=s.Utils.newArray(O-k,0),H=0,q=0,C=0;C<k;C++){for(var m=r.readInt(!0);H!=m;)j[q++]=H++;z[H+r.readInt(!0)]=H++}for(;H<O;)j[q++]=H++;for(var C=O-1;C>=0;C--)z[C]==-1&&(z[C]=j[--q]);S.setFrame(p,M,z)}h.push(S),c=Math.max(c,S.frames[U-1])}var Q=r.readInt(!0);if(Q>0){for(var S=new s.EventTimeline(Q),p=0;p<Q;p++){var M=r.readFloat(),rt=u.events[r.readInt(!0)],K=new s.Event(M,rt);K.intValue=r.readInt(!1),K.floatValue=r.readFloat(),K.stringValue=r.readBoolean()?r.readString():rt.stringValue,K.data.audioPath!=null&&(K.volume=r.readFloat(),K.balance=r.readFloat()),S.setFrame(p,K)}h.push(S),c=Math.max(c,S.frames[Q-1])}return new s.Animation(i,h,c)},n.prototype.readCurve=function(r,i,u){switch(r.readByte()){case n.CURVE_STEPPED:u.setStepped(i);break;case n.CURVE_BEZIER:this.setCurve(u,i,r.readFloat(),r.readFloat(),r.readFloat(),r.readFloat());break}},n.prototype.setCurve=function(r,i,u,h,d,c){r.setCurve(i,u,h,d,c)},n.AttachmentTypeValues=[0,1,2,3,4,5,6],n.TransformModeValues=[s.TransformMode.Normal,s.TransformMode.OnlyTranslation,s.TransformMode.NoRotationOrReflection,s.TransformMode.NoScale,s.TransformMode.NoScaleOrReflection],n.PositionModeValues=[s.PositionMode.Fixed,s.PositionMode.Percent],n.SpacingModeValues=[s.SpacingMode.Length,s.SpacingMode.Fixed,s.SpacingMode.Percent],n.RotateModeValues=[s.RotateMode.Tangent,s.RotateMode.Chain,s.RotateMode.ChainScale],n.BlendModeValues=[s.BlendMode.Normal,s.BlendMode.Additive,s.BlendMode.Multiply,s.BlendMode.Screen],n.BONE_ROTATE=0,n.BONE_TRANSLATE=1,n.BONE_SCALE=2,n.BONE_SHEAR=3,n.SLOT_ATTACHMENT=0,n.SLOT_COLOR=1,n.SLOT_TWO_COLOR=2,n.PATH_POSITION=0,n.PATH_SPACING=1,n.PATH_MIX=2,n.CURVE_LINEAR=0,n.CURVE_STEPPED=1,n.CURVE_BEZIER=2,n}();s.SkeletonBinary=e;var v=function(){function n(r,i,u,h){i===void 0&&(i=new Array),u===void 0&&(u=0),h===void 0&&(h=new DataView(r.buffer)),this.strings=i,this.index=u,this.buffer=h}return n.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},n.prototype.readShort=function(){var r=this.buffer.getInt16(this.index);return this.index+=2,r},n.prototype.readInt32=function(){var r=this.buffer.getInt32(this.index);return this.index+=4,r},n.prototype.readInt=function(r){var i=this.readByte(),u=i&127;return i&128&&(i=this.readByte(),u|=(i&127)<<7,i&128&&(i=this.readByte(),u|=(i&127)<<14,i&128&&(i=this.readByte(),u|=(i&127)<<21,i&128&&(i=this.readByte(),u|=(i&127)<<28)))),r?u:u>>>1^-(u&1)},n.prototype.readStringRef=function(){var r=this.readInt(!0);return r==0?null:this.strings[r-1]},n.prototype.readString=function(){var r=this.readInt(!0);switch(r){case 0:return null;case 1:return""}r--;for(var i="",u=0;u<r;){var h=this.readByte();switch(h>>4){case 12:case 13:i+=String.fromCharCode((h&31)<<6|this.readByte()&63),u+=2;break;case 14:i+=String.fromCharCode((h&15)<<12|(this.readByte()&63)<<6|this.readByte()&63),u+=3;break;default:i+=String.fromCharCode(h),u++}}return i},n.prototype.readFloat=function(){var r=this.buffer.getFloat32(this.index);return this.index+=4,r},n.prototype.readBoolean=function(){return this.readByte()!=0},n}(),a=function(){function n(r,i,u,h,d){this.mesh=r,this.skin=i,this.slotIndex=u,this.parent=h,this.inheritDeform=d}return n}(),t=function(){function n(r,i){r===void 0&&(r=null),i===void 0&&(i=null),this.bones=r,this.vertices=i}return n}()})(B||(B={}));var B;(function(s){var e=function(){function v(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new s.Pool(function(){return s.Utils.newFloatArray(16)})}return v.prototype.update=function(a,t){if(a==null)throw new Error("skeleton cannot be null.");var n=this.boundingBoxes,r=this.polygons,i=this.polygonPool,u=a.slots,h=u.length;n.length=0,i.freeAll(r),r.length=0;for(var d=0;d<h;d++){var c=u[d];if(c.bone.active){var o=c.getAttachment();if(o instanceof s.BoundingBoxAttachment){var l=o;n.push(l);var p=i.obtain();p.length!=l.worldVerticesLength&&(p=s.Utils.newFloatArray(l.worldVerticesLength)),r.push(p),l.computeWorldVertices(c,0,l.worldVerticesLength,p,0,2)}}}t?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},v.prototype.aabbCompute=function(){for(var a=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY,i=this.polygons,u=0,h=i.length;u<h;u++)for(var d=i[u],c=d,o=0,l=d.length;o<l;o+=2){var p=c[o],f=c[o+1];a=Math.min(a,p),t=Math.min(t,f),n=Math.max(n,p),r=Math.max(r,f)}this.minX=a,this.minY=t,this.maxX=n,this.maxY=r},v.prototype.aabbContainsPoint=function(a,t){return a>=this.minX&&a<=this.maxX&&t>=this.minY&&t<=this.maxY},v.prototype.aabbIntersectsSegment=function(a,t,n,r){var i=this.minX,u=this.minY,h=this.maxX,d=this.maxY;if(a<=i&&n<=i||t<=u&&r<=u||a>=h&&n>=h||t>=d&&r>=d)return!1;var c=(r-t)/(n-a),o=c*(i-a)+t;if(o>u&&o<d||(o=c*(h-a)+t,o>u&&o<d))return!0;var l=(u-t)/c+a;return l>i&&l<h||(l=(d-t)/c+a,l>i&&l<h)},v.prototype.aabbIntersectsSkeleton=function(a){return this.minX<a.maxX&&this.maxX>a.minX&&this.minY<a.maxY&&this.maxY>a.minY},v.prototype.containsPoint=function(a,t){for(var n=this.polygons,r=0,i=n.length;r<i;r++)if(this.containsPointPolygon(n[r],a,t))return this.boundingBoxes[r];return null},v.prototype.containsPointPolygon=function(a,t,n){for(var r=a,i=a.length,u=i-2,h=!1,d=0;d<i;d+=2){var c=r[d+1],o=r[u+1];if(c<n&&o>=n||o<n&&c>=n){var l=r[d];l+(n-c)/(o-c)*(r[u]-l)<t&&(h=!h)}u=d}return h},v.prototype.intersectsSegment=function(a,t,n,r){for(var i=this.polygons,u=0,h=i.length;u<h;u++)if(this.intersectsSegmentPolygon(i[u],a,t,n,r))return this.boundingBoxes[u];return null},v.prototype.intersectsSegmentPolygon=function(a,t,n,r,i){for(var u=a,h=a.length,d=t-r,c=n-i,o=t*i-n*r,l=u[h-2],p=u[h-1],f=0;f<h;f+=2){var m=u[f],C=u[f+1],y=l*C-p*m,w=l-m,T=p-C,S=d*T-c*w,x=(o*w-d*y)/S;if((x>=l&&x<=m||x>=m&&x<=l)&&(x>=t&&x<=r||x>=r&&x<=t)){var M=(o*T-c*y)/S;if((M>=p&&M<=C||M>=C&&M<=p)&&(M>=n&&M<=i||M>=i&&M<=n))return!0}l=m,p=C}return!1},v.prototype.getPolygon=function(a){if(a==null)throw new Error("boundingBox cannot be null.");var t=this.boundingBoxes.indexOf(a);return t==-1?null:this.polygons[t]},v.prototype.getWidth=function(){return this.maxX-this.minX},v.prototype.getHeight=function(){return this.maxY-this.minY},v}();s.SkeletonBounds=e})(B||(B={}));var B;(function(s){var e=function(){function v(){this.triangulator=new s.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}return v.prototype.clipStart=function(a,t){if(this.clipAttachment!=null)return 0;this.clipAttachment=t;var n=t.worldVerticesLength,r=s.Utils.setArraySize(this.clippingPolygon,n);t.computeWorldVertices(a,0,n,r,0,2);var i=this.clippingPolygon;v.makeClockwise(i);for(var u=this.clippingPolygons=this.triangulator.decompose(i,this.triangulator.triangulate(i)),h=0,d=u.length;h<d;h++){var c=u[h];v.makeClockwise(c),c.push(c[0]),c.push(c[1])}return u.length},v.prototype.clipEndWithSlot=function(a){this.clipAttachment!=null&&this.clipAttachment.endSlot==a.data&&this.clipEnd()},v.prototype.clipEnd=function(){this.clipAttachment!=null&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},v.prototype.isClipping=function(){return this.clipAttachment!=null},v.prototype.clipTriangles=function(a,t,n,r,i,u,h,d){var c=this.clipOutput,o=this.clippedVertices,l=this.clippedTriangles,p=this.clippingPolygons,f=this.clippingPolygons.length,m=d?12:8,C=0;o.length=0,l.length=0;t:for(var y=0;y<r;y+=3){var w=n[y]<<1,T=a[w],S=a[w+1],x=i[w],M=i[w+1];w=n[y+1]<<1;var A=a[w],P=a[w+1],R=i[w],D=i[w+1];w=n[y+2]<<1;for(var I=a[w],V=a[w+1],N=i[w],L=i[w+1],g=0;g<f;g++){var E=o.length;if(this.clip(T,S,A,P,I,V,p[g],c)){var F=c.length;if(F==0)continue;for(var _=P-V,G=I-A,Y=T-I,Z=V-S,W=1/(_*Y+G*(S-V)),U=F>>1,O=this.clipOutput,k=s.Utils.setArraySize(o,E+U*m),z=0;z<F;z+=2){var j=O[z],H=O[z+1];k[E]=j,k[E+1]=H,k[E+2]=u.r,k[E+3]=u.g,k[E+4]=u.b,k[E+5]=u.a;var q=j-I,Q=H-V,rt=(_*q+G*Q)*W,K=(Z*q+Y*Q)*W,ht=1-rt-K;k[E+6]=x*rt+R*K+N*ht,k[E+7]=M*rt+D*K+L*ht,d&&(k[E+8]=h.r,k[E+9]=h.g,k[E+10]=h.b,k[E+11]=h.a),E+=m}E=l.length;var ot=s.Utils.setArraySize(l,E+3*(U-2));U--;for(var z=1;z<U;z++)ot[E]=C,ot[E+1]=C+z,ot[E+2]=C+z+1,E+=3;C+=U+1}else{var k=s.Utils.setArraySize(o,E+3*m);k[E]=T,k[E+1]=S,k[E+2]=u.r,k[E+3]=u.g,k[E+4]=u.b,k[E+5]=u.a,d?(k[E+6]=x,k[E+7]=M,k[E+8]=h.r,k[E+9]=h.g,k[E+10]=h.b,k[E+11]=h.a,k[E+12]=A,k[E+13]=P,k[E+14]=u.r,k[E+15]=u.g,k[E+16]=u.b,k[E+17]=u.a,k[E+18]=R,k[E+19]=D,k[E+20]=h.r,k[E+21]=h.g,k[E+22]=h.b,k[E+23]=h.a,k[E+24]=I,k[E+25]=V,k[E+26]=u.r,k[E+27]=u.g,k[E+28]=u.b,k[E+29]=u.a,k[E+30]=N,k[E+31]=L,k[E+32]=h.r,k[E+33]=h.g,k[E+34]=h.b,k[E+35]=h.a):(k[E+6]=x,k[E+7]=M,k[E+8]=A,k[E+9]=P,k[E+10]=u.r,k[E+11]=u.g,k[E+12]=u.b,k[E+13]=u.a,k[E+14]=R,k[E+15]=D,k[E+16]=I,k[E+17]=V,k[E+18]=u.r,k[E+19]=u.g,k[E+20]=u.b,k[E+21]=u.a,k[E+22]=N,k[E+23]=L),E=l.length;var ot=s.Utils.setArraySize(l,E+3);ot[E]=C,ot[E+1]=C+1,ot[E+2]=C+2,C+=3;continue t}}}},v.prototype.clip=function(a,t,n,r,i,u,h,d){var c=d,o=!1,l=null;h.length%4>=2?(l=d,d=this.scratch):l=this.scratch,l.length=0,l.push(a),l.push(t),l.push(n),l.push(r),l.push(i),l.push(u),l.push(a),l.push(t),d.length=0;for(var p=h,f=h.length-4,m=0;;m+=2){for(var C=p[m],y=p[m+1],w=p[m+2],T=p[m+3],S=C-w,x=y-T,M=l,A=l.length-2,P=d.length,R=0;R<A;R+=2){var D=M[R],I=M[R+1],V=M[R+2],N=M[R+3],L=S*(N-T)-x*(V-w)>0;if(S*(I-T)-x*(D-w)>0){if(L){d.push(V),d.push(N);continue}var g=N-I,E=V-D,F=g*(w-C)-E*(T-y);if(Math.abs(F)>1e-6){var _=(E*(y-I)-g*(C-D))/F;d.push(C+(w-C)*_),d.push(y+(T-y)*_)}else d.push(C),d.push(y)}else if(L){var g=N-I,E=V-D,F=g*(w-C)-E*(T-y);if(Math.abs(F)>1e-6){var _=(E*(y-I)-g*(C-D))/F;d.push(C+(w-C)*_),d.push(y+(T-y)*_)}else d.push(C),d.push(y);d.push(V),d.push(N)}o=!0}if(P==d.length)return c.length=0,!0;if(d.push(d[0]),d.push(d[1]),m==f)break;var G=d;d=l,d.length=0,l=G}if(c!=d){c.length=0;for(var m=0,Y=d.length-2;m<Y;m++)c[m]=d[m]}else c.length=c.length-2;return o},v.makeClockwise=function(a){for(var t=a,n=a.length,r=t[n-2]*t[1]-t[0]*t[n-1],i=0,u=0,h=0,d=0,c=0,o=n-3;c<o;c+=2)i=t[c],u=t[c+1],h=t[c+2],d=t[c+3],r+=i*d-h*u;if(!(r<0))for(var c=0,l=n-2,o=n>>1;c<o;c+=2){var p=t[c],f=t[c+1],m=l-c;t[c]=t[m],t[c+1]=t[m+1],t[m]=p,t[m+1]=f}},v}();s.SkeletonClipping=e})(B||(B={}));var B;(function(s){var e=function(){function v(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return v.prototype.findBone=function(a){if(a==null)throw new Error("boneName cannot be null.");for(var t=this.bones,n=0,r=t.length;n<r;n++){var i=t[n];if(i.name==a)return i}return null},v.prototype.findBoneIndex=function(a){if(a==null)throw new Error("boneName cannot be null.");for(var t=this.bones,n=0,r=t.length;n<r;n++)if(t[n].name==a)return n;return-1},v.prototype.findSlot=function(a){if(a==null)throw new Error("slotName cannot be null.");for(var t=this.slots,n=0,r=t.length;n<r;n++){var i=t[n];if(i.name==a)return i}return null},v.prototype.findSlotIndex=function(a){if(a==null)throw new Error("slotName cannot be null.");for(var t=this.slots,n=0,r=t.length;n<r;n++)if(t[n].name==a)return n;return-1},v.prototype.findSkin=function(a){if(a==null)throw new Error("skinName cannot be null.");for(var t=this.skins,n=0,r=t.length;n<r;n++){var i=t[n];if(i.name==a)return i}return null},v.prototype.findEvent=function(a){if(a==null)throw new Error("eventDataName cannot be null.");for(var t=this.events,n=0,r=t.length;n<r;n++){var i=t[n];if(i.name==a)return i}return null},v.prototype.findAnimation=function(a){if(a==null)throw new Error("animationName cannot be null.");for(var t=this.animations,n=0,r=t.length;n<r;n++){var i=t[n];if(i.name==a)return i}return null},v.prototype.findIkConstraint=function(a){if(a==null)throw new Error("constraintName cannot be null.");for(var t=this.ikConstraints,n=0,r=t.length;n<r;n++){var i=t[n];if(i.name==a)return i}return null},v.prototype.findTransformConstraint=function(a){if(a==null)throw new Error("constraintName cannot be null.");for(var t=this.transformConstraints,n=0,r=t.length;n<r;n++){var i=t[n];if(i.name==a)return i}return null},v.prototype.findPathConstraint=function(a){if(a==null)throw new Error("constraintName cannot be null.");for(var t=this.pathConstraints,n=0,r=t.length;n<r;n++){var i=t[n];if(i.name==a)return i}return null},v.prototype.findPathConstraintIndex=function(a){if(a==null)throw new Error("pathConstraintName cannot be null.");for(var t=this.pathConstraints,n=0,r=t.length;n<r;n++)if(t[n].name==a)return n;return-1},v}();s.SkeletonData=e})(B||(B={}));var B;(function(s){var e=function(){function a(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return a.prototype.readSkeletonData=function(t){var n=this.scale,r=new s.SkeletonData,i=typeof t=="string"?JSON.parse(t):t,u=i.skeleton;if(u!=null){if(r.hash=u.hash,r.version=u.spine,r.version=="3.8.75")throw new Error("Unsupported skeleton data, please export with a newer version of Spine.");r.x=u.x,r.y=u.y,r.width=u.width,r.height=u.height,r.fps=u.fps,r.imagesPath=u.images}if(i.bones)for(var h=0;h<i.bones.length;h++){var d=i.bones[h],c=null,o=this.getValue(d,"parent",null);if(o!=null&&(c=r.findBone(o),c==null))throw new Error("Parent bone not found: "+o);var l=new s.BoneData(r.bones.length,d.name,c);l.length=this.getValue(d,"length",0)*n,l.x=this.getValue(d,"x",0)*n,l.y=this.getValue(d,"y",0)*n,l.rotation=this.getValue(d,"rotation",0),l.scaleX=this.getValue(d,"scaleX",1),l.scaleY=this.getValue(d,"scaleY",1),l.shearX=this.getValue(d,"shearX",0),l.shearY=this.getValue(d,"shearY",0),l.transformMode=a.transformModeFromString(this.getValue(d,"transform","normal")),l.skinRequired=this.getValue(d,"skin",!1),r.bones.push(l)}if(i.slots)for(var h=0;h<i.slots.length;h++){var p=i.slots[h],f=p.name,m=p.bone,C=r.findBone(m);if(C==null)throw new Error("Slot bone not found: "+m);var l=new s.SlotData(r.slots.length,f,C),y=this.getValue(p,"color",null);y!=null&&l.color.setFromString(y);var w=this.getValue(p,"dark",null);w!=null&&(l.darkColor=new s.Color(1,1,1,1),l.darkColor.setFromString(w)),l.attachmentName=this.getValue(p,"attachment",null),l.blendMode=a.blendModeFromString(this.getValue(p,"blend","normal")),r.slots.push(l)}if(i.ik)for(var h=0;h<i.ik.length;h++){var T=i.ik[h],l=new s.IkConstraintData(T.name);l.order=this.getValue(T,"order",0),l.skinRequired=this.getValue(T,"skin",!1);for(var S=0;S<T.bones.length;S++){var m=T.bones[S],x=r.findBone(m);if(x==null)throw new Error("IK bone not found: "+m);l.bones.push(x)}var M=T.target;if(l.target=r.findBone(M),l.target==null)throw new Error("IK target bone not found: "+M);l.mix=this.getValue(T,"mix",1),l.softness=this.getValue(T,"softness",0)*n,l.bendDirection=this.getValue(T,"bendPositive",!0)?1:-1,l.compress=this.getValue(T,"compress",!1),l.stretch=this.getValue(T,"stretch",!1),l.uniform=this.getValue(T,"uniform",!1),r.ikConstraints.push(l)}if(i.transform)for(var h=0;h<i.transform.length;h++){var T=i.transform[h],l=new s.TransformConstraintData(T.name);l.order=this.getValue(T,"order",0),l.skinRequired=this.getValue(T,"skin",!1);for(var S=0;S<T.bones.length;S++){var m=T.bones[S],x=r.findBone(m);if(x==null)throw new Error("Transform constraint bone not found: "+m);l.bones.push(x)}var M=T.target;if(l.target=r.findBone(M),l.target==null)throw new Error("Transform constraint target bone not found: "+M);l.local=this.getValue(T,"local",!1),l.relative=this.getValue(T,"relative",!1),l.offsetRotation=this.getValue(T,"rotation",0),l.offsetX=this.getValue(T,"x",0)*n,l.offsetY=this.getValue(T,"y",0)*n,l.offsetScaleX=this.getValue(T,"scaleX",0),l.offsetScaleY=this.getValue(T,"scaleY",0),l.offsetShearY=this.getValue(T,"shearY",0),l.rotateMix=this.getValue(T,"rotateMix",1),l.translateMix=this.getValue(T,"translateMix",1),l.scaleMix=this.getValue(T,"scaleMix",1),l.shearMix=this.getValue(T,"shearMix",1),r.transformConstraints.push(l)}if(i.path)for(var h=0;h<i.path.length;h++){var T=i.path[h],l=new s.PathConstraintData(T.name);l.order=this.getValue(T,"order",0),l.skinRequired=this.getValue(T,"skin",!1);for(var S=0;S<T.bones.length;S++){var m=T.bones[S],x=r.findBone(m);if(x==null)throw new Error("Transform constraint bone not found: "+m);l.bones.push(x)}var M=T.target;if(l.target=r.findSlot(M),l.target==null)throw new Error("Path target slot not found: "+M);l.positionMode=a.positionModeFromString(this.getValue(T,"positionMode","percent")),l.spacingMode=a.spacingModeFromString(this.getValue(T,"spacingMode","length")),l.rotateMode=a.rotateModeFromString(this.getValue(T,"rotateMode","tangent")),l.offsetRotation=this.getValue(T,"rotation",0),l.position=this.getValue(T,"position",0),l.positionMode==s.PositionMode.Fixed&&(l.position*=n),l.spacing=this.getValue(T,"spacing",0),(l.spacingMode==s.SpacingMode.Length||l.spacingMode==s.SpacingMode.Fixed)&&(l.spacing*=n),l.rotateMix=this.getValue(T,"rotateMix",1),l.translateMix=this.getValue(T,"translateMix",1),r.pathConstraints.push(l)}if(i.skins)for(var h=0;h<i.skins.length;h++){var A=i.skins[h],P=new s.Skin(A.name);if(A.bones)for(var R=0;R<A.bones.length;R++){var x=r.findBone(A.bones[R]);if(x==null)throw new Error("Skin bone not found: "+A.bones[h]);P.bones.push(x)}if(A.ik)for(var R=0;R<A.ik.length;R++){var D=r.findIkConstraint(A.ik[R]);if(D==null)throw new Error("Skin IK constraint not found: "+A.ik[h]);P.constraints.push(D)}if(A.transform)for(var R=0;R<A.transform.length;R++){var D=r.findTransformConstraint(A.transform[R]);if(D==null)throw new Error("Skin transform constraint not found: "+A.transform[h]);P.constraints.push(D)}if(A.path)for(var R=0;R<A.path.length;R++){var D=r.findPathConstraint(A.path[R]);if(D==null)throw new Error("Skin path constraint not found: "+A.path[h]);P.constraints.push(D)}for(var f in A.attachments){var I=r.findSlot(f);if(I==null)throw new Error("Slot not found: "+f);var p=A.attachments[f];for(var V in p){var N=this.readAttachment(p[V],P,I.index,V,r);N!=null&&P.setAttachment(I.index,V,N)}}r.skins.push(P),P.name=="default"&&(r.defaultSkin=P)}for(var h=0,L=this.linkedMeshes.length;h<L;h++){var g=this.linkedMeshes[h],P=g.skin==null?r.defaultSkin:r.findSkin(g.skin);if(P==null)throw new Error("Skin not found: "+g.skin);var E=P.getAttachment(g.slotIndex,g.parent);if(E==null)throw new Error("Parent mesh not found: "+g.parent);g.mesh.deformAttachment=g.inheritDeform?E:g.mesh,g.mesh.setParentMesh(E),g.mesh.updateUVs()}if(this.linkedMeshes.length=0,i.events)for(var F in i.events){var _=i.events[F],l=new s.EventData(F);l.intValue=this.getValue(_,"int",0),l.floatValue=this.getValue(_,"float",0),l.stringValue=this.getValue(_,"string",""),l.audioPath=this.getValue(_,"audio",null),l.audioPath!=null&&(l.volume=this.getValue(_,"volume",1),l.balance=this.getValue(_,"balance",0)),r.events.push(l)}if(i.animations)for(var G in i.animations){var Y=i.animations[G];this.readAnimation(Y,G,r)}return r},a.prototype.readAttachment=function(t,n,r,i,u){var h=this.scale;i=this.getValue(t,"name",i);var d=this.getValue(t,"type","region");switch(d){case"region":{var c=this.getValue(t,"path",i),o=this.attachmentLoader.newRegionAttachment(n,i,c);if(o==null)return null;o.path=c,o.x=this.getValue(t,"x",0)*h,o.y=this.getValue(t,"y",0)*h,o.scaleX=this.getValue(t,"scaleX",1),o.scaleY=this.getValue(t,"scaleY",1),o.rotation=this.getValue(t,"rotation",0),o.width=t.width*h,o.height=t.height*h;var l=this.getValue(t,"color",null);return l!=null&&o.color.setFromString(l),o.updateOffset(),o}case"boundingbox":{var p=this.attachmentLoader.newBoundingBoxAttachment(n,i);if(p==null)return null;this.readVertices(t,p,t.vertexCount<<1);var l=this.getValue(t,"color",null);return l!=null&&p.color.setFromString(l),p}case"mesh":case"linkedmesh":{var c=this.getValue(t,"path",i),f=this.attachmentLoader.newMeshAttachment(n,i,c);if(f==null)return null;f.path=c;var l=this.getValue(t,"color",null);l!=null&&f.color.setFromString(l),f.width=this.getValue(t,"width",0)*h,f.height=this.getValue(t,"height",0)*h;var m=this.getValue(t,"parent",null);if(m!=null)return this.linkedMeshes.push(new v(f,this.getValue(t,"skin",null),r,m,this.getValue(t,"deform",!0))),f;var C=t.uvs;return this.readVertices(t,f,C.length),f.triangles=t.triangles,f.regionUVs=C,f.updateUVs(),f.edges=this.getValue(t,"edges",null),f.hullLength=this.getValue(t,"hull",0)*2,f}case"path":{var c=this.attachmentLoader.newPathAttachment(n,i);if(c==null)return null;c.closed=this.getValue(t,"closed",!1),c.constantSpeed=this.getValue(t,"constantSpeed",!0);var y=t.vertexCount;this.readVertices(t,c,y<<1);for(var w=s.Utils.newArray(y/3,0),T=0;T<t.lengths.length;T++)w[T]=t.lengths[T]*h;c.lengths=w;var l=this.getValue(t,"color",null);return l!=null&&c.color.setFromString(l),c}case"point":{var S=this.attachmentLoader.newPointAttachment(n,i);if(S==null)return null;S.x=this.getValue(t,"x",0)*h,S.y=this.getValue(t,"y",0)*h,S.rotation=this.getValue(t,"rotation",0);var l=this.getValue(t,"color",null);return l!=null&&S.color.setFromString(l),S}case"clipping":{var x=this.attachmentLoader.newClippingAttachment(n,i);if(x==null)return null;var M=this.getValue(t,"end",null);if(M!=null){var A=u.findSlot(M);if(A==null)throw new Error("Clipping end slot not found: "+M);x.endSlot=A}var y=t.vertexCount;this.readVertices(t,x,y<<1);var l=this.getValue(t,"color",null);return l!=null&&x.color.setFromString(l),x}}return null},a.prototype.readVertices=function(t,n,r){var i=this.scale;n.worldVerticesLength=r;var u=t.vertices;if(r==u.length){var h=s.Utils.toFloatArray(u);if(i!=1)for(var d=0,c=u.length;d<c;d++)h[d]*=i;n.vertices=h;return}for(var o=new Array,l=new Array,d=0,c=u.length;d<c;){var p=u[d++];l.push(p);for(var f=d+p*4;d<f;d+=4)l.push(u[d]),o.push(u[d+1]*i),o.push(u[d+2]*i),o.push(u[d+3])}n.bones=l,n.vertices=s.Utils.toFloatArray(o)},a.prototype.readAnimation=function(t,n,r){var i=this.scale,u=new Array,h=0;if(t.slots)for(var d in t.slots){var c=t.slots[d],o=r.findSlotIndex(d);if(o==-1)throw new Error("Slot not found: "+d);for(var l in c){var p=c[l];if(l=="attachment"){var f=new s.AttachmentTimeline(p.length);f.slotIndex=o;for(var m=0,C=0;C<p.length;C++){var y=p[C];f.setFrame(m++,this.getValue(y,"time",0),y.name)}u.push(f),h=Math.max(h,f.frames[f.getFrameCount()-1])}else if(l=="color"){var f=new s.ColorTimeline(p.length);f.slotIndex=o;for(var m=0,C=0;C<p.length;C++){var y=p[C],w=new s.Color;w.setFromString(y.color),f.setFrame(m,this.getValue(y,"time",0),w.r,w.g,w.b,w.a),this.readCurve(y,f,m),m++}u.push(f),h=Math.max(h,f.frames[(f.getFrameCount()-1)*s.ColorTimeline.ENTRIES])}else if(l=="twoColor"){var f=new s.TwoColorTimeline(p.length);f.slotIndex=o;for(var m=0,C=0;C<p.length;C++){var y=p[C],T=new s.Color,S=new s.Color;T.setFromString(y.light),S.setFromString(y.dark),f.setFrame(m,this.getValue(y,"time",0),T.r,T.g,T.b,T.a,S.r,S.g,S.b),this.readCurve(y,f,m),m++}u.push(f),h=Math.max(h,f.frames[(f.getFrameCount()-1)*s.TwoColorTimeline.ENTRIES])}else throw new Error("Invalid timeline type for a slot: "+l+" ("+d+")")}}if(t.bones)for(var x in t.bones){var M=t.bones[x],A=r.findBoneIndex(x);if(A==-1)throw new Error("Bone not found: "+x);for(var l in M){var p=M[l];if(l==="rotate"){var f=new s.RotateTimeline(p.length);f.boneIndex=A;for(var m=0,C=0;C<p.length;C++){var y=p[C];f.setFrame(m,this.getValue(y,"time",0),this.getValue(y,"angle",0)),this.readCurve(y,f,m),m++}u.push(f),h=Math.max(h,f.frames[(f.getFrameCount()-1)*s.RotateTimeline.ENTRIES])}else if(l==="translate"||l==="scale"||l==="shear"){var f=null,P=1,R=0;l==="scale"?(f=new s.ScaleTimeline(p.length),R=1):l==="shear"?f=new s.ShearTimeline(p.length):(f=new s.TranslateTimeline(p.length),P=i),f.boneIndex=A;for(var m=0,C=0;C<p.length;C++){var y=p[C],D=this.getValue(y,"x",R),I=this.getValue(y,"y",R);f.setFrame(m,this.getValue(y,"time",0),D*P,I*P),this.readCurve(y,f,m),m++}u.push(f),h=Math.max(h,f.frames[(f.getFrameCount()-1)*s.TranslateTimeline.ENTRIES])}else throw new Error("Invalid timeline type for a bone: "+l+" ("+x+")")}}if(t.ik)for(var V in t.ik){var N=t.ik[V],L=r.findIkConstraint(V),f=new s.IkConstraintTimeline(N.length);f.ikConstraintIndex=r.ikConstraints.indexOf(L);for(var m=0,C=0;C<N.length;C++){var y=N[C];f.setFrame(m,this.getValue(y,"time",0),this.getValue(y,"mix",1),this.getValue(y,"softness",0)*i,this.getValue(y,"bendPositive",!0)?1:-1,this.getValue(y,"compress",!1),this.getValue(y,"stretch",!1)),this.readCurve(y,f,m),m++}u.push(f),h=Math.max(h,f.frames[(f.getFrameCount()-1)*s.IkConstraintTimeline.ENTRIES])}if(t.transform)for(var V in t.transform){var N=t.transform[V],L=r.findTransformConstraint(V),f=new s.TransformConstraintTimeline(N.length);f.transformConstraintIndex=r.transformConstraints.indexOf(L);for(var m=0,C=0;C<N.length;C++){var y=N[C];f.setFrame(m,this.getValue(y,"time",0),this.getValue(y,"rotateMix",1),this.getValue(y,"translateMix",1),this.getValue(y,"scaleMix",1),this.getValue(y,"shearMix",1)),this.readCurve(y,f,m),m++}u.push(f),h=Math.max(h,f.frames[(f.getFrameCount()-1)*s.TransformConstraintTimeline.ENTRIES])}if(t.path)for(var V in t.path){var N=t.path[V],g=r.findPathConstraintIndex(V);if(g==-1)throw new Error("Path constraint not found: "+V);var E=r.pathConstraints[g];for(var l in N){var p=N[l];if(l==="position"||l==="spacing"){var f=null,P=1;l==="spacing"?(f=new s.PathConstraintSpacingTimeline(p.length),(E.spacingMode==s.SpacingMode.Length||E.spacingMode==s.SpacingMode.Fixed)&&(P=i)):(f=new s.PathConstraintPositionTimeline(p.length),E.positionMode==s.PositionMode.Fixed&&(P=i)),f.pathConstraintIndex=g;for(var m=0,C=0;C<p.length;C++){var y=p[C];f.setFrame(m,this.getValue(y,"time",0),this.getValue(y,l,0)*P),this.readCurve(y,f,m),m++}u.push(f),h=Math.max(h,f.frames[(f.getFrameCount()-1)*s.PathConstraintPositionTimeline.ENTRIES])}else if(l==="mix"){var f=new s.PathConstraintMixTimeline(p.length);f.pathConstraintIndex=g;for(var m=0,C=0;C<p.length;C++){var y=p[C];f.setFrame(m,this.getValue(y,"time",0),this.getValue(y,"rotateMix",1),this.getValue(y,"translateMix",1)),this.readCurve(y,f,m),m++}u.push(f),h=Math.max(h,f.frames[(f.getFrameCount()-1)*s.PathConstraintMixTimeline.ENTRIES])}}}if(t.deform)for(var F in t.deform){var _=t.deform[F],G=r.findSkin(F);if(G==null)throw new Error("Skin not found: "+F);for(var d in _){var c=_[d],o=r.findSlotIndex(d);if(o==-1)throw new Error("Slot not found: "+c.name);for(var l in c){var p=c[l],Y=G.getAttachment(o,l);if(Y==null)throw new Error("Deform attachment not found: "+p.name);var Z=Y.bones!=null,W=Y.vertices,U=Z?W.length/3*2:W.length,f=new s.DeformTimeline(p.length);f.slotIndex=o,f.attachment=Y;for(var m=0,O=0;O<p.length;O++){var y=p[O],k=void 0,z=this.getValue(y,"vertices",null);if(z==null)k=Z?s.Utils.newFloatArray(U):W;else{k=s.Utils.newFloatArray(U);var j=this.getValue(y,"offset",0);if(s.Utils.arrayCopy(z,0,k,j,z.length),i!=1)for(var C=j,H=C+z.length;C<H;C++)k[C]*=i;if(!Z)for(var C=0;C<U;C++)k[C]+=W[C]}f.setFrame(m,this.getValue(y,"time",0),k),this.readCurve(y,f,m),m++}u.push(f),h=Math.max(h,f.frames[f.getFrameCount()-1])}}}var q=t.drawOrder;if(q==null&&(q=t.draworder),q!=null){for(var f=new s.DrawOrderTimeline(q.length),Q=r.slots.length,m=0,O=0;O<q.length;O++){var rt=q[O],K=null,ht=this.getValue(rt,"offsets",null);if(ht!=null){K=s.Utils.newArray(Q,-1);for(var ot=s.Utils.newArray(Q-ht.length,0),vt=0,pt=0,C=0;C<ht.length;C++){var ct=ht[C],o=r.findSlotIndex(ct.slot);if(o==-1)throw new Error("Slot not found: "+ct.slot);for(;vt!=o;)ot[pt++]=vt++;K[vt+ct.offset]=vt++}for(;vt<Q;)ot[pt++]=vt++;for(var C=Q-1;C>=0;C--)K[C]==-1&&(K[C]=ot[--pt])}f.setFrame(m++,this.getValue(rt,"time",0),K)}u.push(f),h=Math.max(h,f.frames[f.getFrameCount()-1])}if(t.events){for(var f=new s.EventTimeline(t.events.length),m=0,C=0;C<t.events.length;C++){var mt=t.events[C],st=r.findEvent(mt.name);if(st==null)throw new Error("Event not found: "+mt.name);var at=new s.Event(s.Utils.toSinglePrecision(this.getValue(mt,"time",0)),st);at.intValue=this.getValue(mt,"int",st.intValue),at.floatValue=this.getValue(mt,"float",st.floatValue),at.stringValue=this.getValue(mt,"string",st.stringValue),at.data.audioPath!=null&&(at.volume=this.getValue(mt,"volume",1),at.balance=this.getValue(mt,"balance",0)),f.setFrame(m++,at)}u.push(f),h=Math.max(h,f.frames[f.getFrameCount()-1])}if(isNaN(h))throw new Error("Error while parsing animation, duration is NaN");r.animations.push(new s.Animation(n,u,h))},a.prototype.readCurve=function(t,n,r){if(t.hasOwnProperty("curve"))if(t.curve=="stepped")n.setStepped(r);else{var i=t.curve;n.setCurve(r,i,this.getValue(t,"c2",0),this.getValue(t,"c3",1),this.getValue(t,"c4",1))}},a.prototype.getValue=function(t,n,r){return t[n]!==void 0?t[n]:r},a.blendModeFromString=function(t){if(t=t.toLowerCase(),t=="normal")return s.BlendMode.Normal;if(t=="additive")return s.BlendMode.Additive;if(t=="multiply")return s.BlendMode.Multiply;if(t=="screen")return s.BlendMode.Screen;throw new Error("Unknown blend mode: ".concat(t))},a.positionModeFromString=function(t){if(t=t.toLowerCase(),t=="fixed")return s.PositionMode.Fixed;if(t=="percent")return s.PositionMode.Percent;throw new Error("Unknown position mode: ".concat(t))},a.spacingModeFromString=function(t){if(t=t.toLowerCase(),t=="length")return s.SpacingMode.Length;if(t=="fixed")return s.SpacingMode.Fixed;if(t=="percent")return s.SpacingMode.Percent;throw new Error("Unknown position mode: ".concat(t))},a.rotateModeFromString=function(t){if(t=t.toLowerCase(),t=="tangent")return s.RotateMode.Tangent;if(t=="chain")return s.RotateMode.Chain;if(t=="chainscale")return s.RotateMode.ChainScale;throw new Error("Unknown rotate mode: ".concat(t))},a.transformModeFromString=function(t){if(t=t.toLowerCase(),t=="normal")return s.TransformMode.Normal;if(t=="onlytranslation")return s.TransformMode.OnlyTranslation;if(t=="norotationorreflection")return s.TransformMode.NoRotationOrReflection;if(t=="noscale")return s.TransformMode.NoScale;if(t=="noscaleorreflection")return s.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: ".concat(t))},a}();s.SkeletonJson=e;var v=function(){function a(t,n,r,i,u){this.mesh=t,this.skin=n,this.slotIndex=r,this.parent=i,this.inheritDeform=u}return a}()})(B||(B={}));var B;(function(s){var e=function(){function a(t,n,r){this.slotIndex=t,this.name=n,this.attachment=r}return a}();s.SkinEntry=e;var v=function(){function a(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,t==null)throw new Error("name cannot be null.");this.name=t}return a.prototype.setAttachment=function(t,n,r){if(r==null)throw new Error("attachment cannot be null.");var i=this.attachments;t>=i.length&&(i.length=t+1),i[t]||(i[t]={}),i[t][n]=r},a.prototype.addSkin=function(t){for(var n=0;n<t.bones.length;n++){for(var r=t.bones[n],i=!1,u=0;u<this.bones.length;u++)if(this.bones[u]==r){i=!0;break}i||this.bones.push(r)}for(var n=0;n<t.constraints.length;n++){for(var h=t.constraints[n],i=!1,u=0;u<this.constraints.length;u++)if(this.constraints[u]==h){i=!0;break}i||this.constraints.push(h)}for(var d=t.getAttachments(),n=0;n<d.length;n++){var c=d[n];this.setAttachment(c.slotIndex,c.name,c.attachment)}},a.prototype.copySkin=function(t){for(var n=0;n<t.bones.length;n++){for(var r=t.bones[n],i=!1,u=0;u<this.bones.length;u++)if(this.bones[u]==r){i=!0;break}i||this.bones.push(r)}for(var n=0;n<t.constraints.length;n++){for(var h=t.constraints[n],i=!1,u=0;u<this.constraints.length;u++)if(this.constraints[u]==h){i=!0;break}i||this.constraints.push(h)}for(var d=t.getAttachments(),n=0;n<d.length;n++){var c=d[n];c.attachment!=null&&(c.attachment instanceof s.MeshAttachment?(c.attachment=c.attachment.newLinkedMesh(),this.setAttachment(c.slotIndex,c.name,c.attachment)):(c.attachment=c.attachment.copy(),this.setAttachment(c.slotIndex,c.name,c.attachment)))}},a.prototype.getAttachment=function(t,n){var r=this.attachments[t];return r?r[n]:null},a.prototype.removeAttachment=function(t,n){var r=this.attachments[t];r&&(r[n]=null)},a.prototype.getAttachments=function(){for(var t=new Array,n=0;n<this.attachments.length;n++){var r=this.attachments[n];if(r)for(var i in r){var u=r[i];u&&t.push(new e(n,i,u))}}return t},a.prototype.getAttachmentsForSlot=function(t,n){var r=this.attachments[t];if(r)for(var i in r){var u=r[i];u&&n.push(new e(t,i,u))}},a.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},a.prototype.attachAll=function(t,n){for(var r=0,i=0;i<t.slots.length;i++){var u=t.slots[i],h=u.getAttachment();if(h&&r<n.attachments.length){var d=n.attachments[r];for(var c in d){var o=d[c];if(h==o){var l=this.getAttachment(r,c);l!=null&&u.setAttachment(l);break}}}r++}},a}();s.Skin=v})(B||(B={}));var B;(function(s){var e=function(){function v(a,t){if(this.deform=new Array,a==null)throw new Error("data cannot be null.");if(t==null)throw new Error("bone cannot be null.");this.data=a,this.bone=t,this.color=new s.Color,this.darkColor=a.darkColor==null?null:new s.Color,this.setToSetupPose()}return v.prototype.getSkeleton=function(){return this.bone.skeleton},v.prototype.getAttachment=function(){return this.attachment},v.prototype.setAttachment=function(a){this.attachment!=a&&(this.attachment=a,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},v.prototype.setAttachmentTime=function(a){this.attachmentTime=this.bone.skeleton.time-a},v.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},v.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),this.darkColor!=null&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName==null?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},v}();s.Slot=e})(B||(B={}));var B;(function(s){var e=function(){function v(a,t,n){if(this.color=new s.Color(1,1,1,1),a<0)throw new Error("index must be >= 0.");if(t==null)throw new Error("name cannot be null.");if(n==null)throw new Error("boneData cannot be null.");this.index=a,this.name=t,this.boneData=n}return v}();s.SlotData=e})(B||(B={}));var B;(function(s){var e=function(){function r(i){this._image=i}return r.prototype.getImage=function(){return this._image},r.filterFromString=function(i){switch(i.toLowerCase()){case"nearest":return v.Nearest;case"linear":return v.Linear;case"mipmap":return v.MipMap;case"mipmapnearestnearest":return v.MipMapNearestNearest;case"mipmaplinearnearest":return v.MipMapLinearNearest;case"mipmapnearestlinear":return v.MipMapNearestLinear;case"mipmaplinearlinear":return v.MipMapLinearLinear;default:throw new Error("Unknown texture filter ".concat(i))}},r.wrapFromString=function(i){switch(i.toLowerCase()){case"mirroredtepeat":return a.MirroredRepeat;case"clamptoedge":return a.ClampToEdge;case"repeat":return a.Repeat;default:throw new Error("Unknown texture wrap ".concat(i))}},r}();s.Texture=e;var v;(function(r){r[r.Nearest=9728]="Nearest",r[r.Linear=9729]="Linear",r[r.MipMap=9987]="MipMap",r[r.MipMapNearestNearest=9984]="MipMapNearestNearest",r[r.MipMapLinearNearest=9985]="MipMapLinearNearest",r[r.MipMapNearestLinear=9986]="MipMapNearestLinear",r[r.MipMapLinearLinear=9987]="MipMapLinearLinear"})(v=s.TextureFilter||(s.TextureFilter={}));var a;(function(r){r[r.MirroredRepeat=33648]="MirroredRepeat",r[r.ClampToEdge=33071]="ClampToEdge",r[r.Repeat=10497]="Repeat"})(a=s.TextureWrap||(s.TextureWrap={}));var t=function(){function r(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.rotate=!1,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0}return r}();s.TextureRegion=t;var n=function(r){nt(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.prototype.setFilters=function(u,h){},i.prototype.setWraps=function(u,h){},i.prototype.dispose=function(){},i}(e);s.FakeTexture=n})(B||(B={}));var B;(function(s){var e=function(){function n(r,i){this.pages=new Array,this.regions=new Array,this.load(r,i)}return n.prototype.load=function(r,i){if(i==null)throw new Error("textureLoader cannot be null.");for(var u=new v(r),h=new Array(4),d=null;;){var c=u.readLine();if(c==null)break;if(c=c.trim(),c.length==0)d=null;else if(d){var l=new t;l.name=c,l.page=d;var p=u.readValue();p.toLocaleLowerCase()=="true"?l.degrees=90:p.toLocaleLowerCase()=="false"?l.degrees=0:l.degrees=parseFloat(p),l.rotate=l.degrees==90,u.readTuple(h);var f=parseInt(h[0]),m=parseInt(h[1]);u.readTuple(h);var C=parseInt(h[0]),y=parseInt(h[1]);l.u=f/d.width,l.v=m/d.height,l.rotate?(l.u2=(f+y)/d.width,l.v2=(m+C)/d.height):(l.u2=(f+C)/d.width,l.v2=(m+y)/d.height),l.x=f,l.y=m,l.width=Math.abs(C),l.height=Math.abs(y),u.readTuple(h)==4&&u.readTuple(h)==4&&u.readTuple(h),l.originalWidth=parseInt(h[0]),l.originalHeight=parseInt(h[1]),u.readTuple(h),l.offsetX=parseInt(h[0]),l.offsetY=parseInt(h[1]),l.index=parseInt(u.readValue()),l.texture=d.texture,this.regions.push(l)}else{d=new a,d.name=c,u.readTuple(h)==2&&(d.width=parseInt(h[0]),d.height=parseInt(h[1]),u.readTuple(h)),u.readTuple(h),d.minFilter=s.Texture.filterFromString(h[0]),d.magFilter=s.Texture.filterFromString(h[1]);var o=u.readValue();d.uWrap=s.TextureWrap.ClampToEdge,d.vWrap=s.TextureWrap.ClampToEdge,o=="x"?d.uWrap=s.TextureWrap.Repeat:o=="y"?d.vWrap=s.TextureWrap.Repeat:o=="xy"&&(d.uWrap=d.vWrap=s.TextureWrap.Repeat),d.texture=i(c),d.texture.setFilters(d.minFilter,d.magFilter),d.texture.setWraps(d.uWrap,d.vWrap),d.width=d.texture.getImage().width,d.height=d.texture.getImage().height,this.pages.push(d)}}},n.prototype.findRegion=function(r){for(var i=0;i<this.regions.length;i++)if(this.regions[i].name==r)return this.regions[i];return null},n.prototype.dispose=function(){for(var r=0;r<this.pages.length;r++)this.pages[r].texture.dispose()},n}();s.TextureAtlas=e;var v=function(){function n(r){this.index=0,this.lines=r.split(/\r\n|\r|\n/)}return n.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},n.prototype.readValue=function(){var r=this.readLine(),i=r.indexOf(":");if(i==-1)throw new Error("Invalid line: "+r);return r.substring(i+1).trim()},n.prototype.readTuple=function(r){var i=this.readLine(),u=i.indexOf(":");if(u==-1)throw new Error("Invalid line: "+i);for(var h=0,d=u+1;h<3;h++){var c=i.indexOf(",",d);if(c==-1)break;r[h]=i.substr(d,c-d).trim(),d=c+1}return r[h]=i.substring(d).trim(),h+1},n}(),a=function(){function n(){}return n}();s.TextureAtlasPage=a;var t=function(n){nt(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r}(s.TextureRegion);s.TextureAtlasRegion=t})(B||(B={}));var B;(function(s){var e=function(){function v(a,t){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new s.Vector2,this.active=!1,a==null)throw new Error("data cannot be null.");if(t==null)throw new Error("skeleton cannot be null.");this.data=a,this.rotateMix=a.rotateMix,this.translateMix=a.translateMix,this.scaleMix=a.scaleMix,this.shearMix=a.shearMix,this.bones=new Array;for(var n=0;n<a.bones.length;n++)this.bones.push(t.findBone(a.bones[n].name));this.target=t.findBone(a.target.name)}return v.prototype.isActive=function(){return this.active},v.prototype.apply=function(){this.update()},v.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},v.prototype.applyAbsoluteWorld=function(){for(var a=this.rotateMix,t=this.translateMix,n=this.scaleMix,r=this.shearMix,i=this.target,u=i.a,h=i.b,d=i.c,c=i.d,o=u*c-h*d>0?s.MathUtils.degRad:-s.MathUtils.degRad,l=this.data.offsetRotation*o,p=this.data.offsetShearY*o,f=this.bones,m=0,C=f.length;m<C;m++){var y=f[m],w=!1;if(a!=0){var T=y.a,S=y.b,x=y.c,M=y.d,A=Math.atan2(d,u)-Math.atan2(x,T)+l;A>s.MathUtils.PI?A-=s.MathUtils.PI2:A<-s.MathUtils.PI&&(A+=s.MathUtils.PI2),A*=a;var P=Math.cos(A),R=Math.sin(A);y.a=P*T-R*x,y.b=P*S-R*M,y.c=R*T+P*x,y.d=R*S+P*M,w=!0}if(t!=0){var D=this.temp;i.localToWorld(D.set(this.data.offsetX,this.data.offsetY)),y.worldX+=(D.x-y.worldX)*t,y.worldY+=(D.y-y.worldY)*t,w=!0}if(n>0){var I=Math.sqrt(y.a*y.a+y.c*y.c),V=Math.sqrt(u*u+d*d);I>1e-5&&(I=(I+(V-I+this.data.offsetScaleX)*n)/I),y.a*=I,y.c*=I,I=Math.sqrt(y.b*y.b+y.d*y.d),V=Math.sqrt(h*h+c*c),I>1e-5&&(I=(I+(V-I+this.data.offsetScaleY)*n)/I),y.b*=I,y.d*=I,w=!0}if(r>0){var S=y.b,M=y.d,N=Math.atan2(M,S),A=Math.atan2(c,h)-Math.atan2(d,u)-(N-Math.atan2(y.c,y.a));A>s.MathUtils.PI?A-=s.MathUtils.PI2:A<-s.MathUtils.PI&&(A+=s.MathUtils.PI2),A=N+(A+p)*r;var I=Math.sqrt(S*S+M*M);y.b=Math.cos(A)*I,y.d=Math.sin(A)*I,w=!0}w&&(y.appliedValid=!1)}},v.prototype.applyRelativeWorld=function(){for(var a=this.rotateMix,t=this.translateMix,n=this.scaleMix,r=this.shearMix,i=this.target,u=i.a,h=i.b,d=i.c,c=i.d,o=u*c-h*d>0?s.MathUtils.degRad:-s.MathUtils.degRad,l=this.data.offsetRotation*o,p=this.data.offsetShearY*o,f=this.bones,m=0,C=f.length;m<C;m++){var y=f[m],w=!1;if(a!=0){var T=y.a,S=y.b,x=y.c,M=y.d,A=Math.atan2(d,u)+l;A>s.MathUtils.PI?A-=s.MathUtils.PI2:A<-s.MathUtils.PI&&(A+=s.MathUtils.PI2),A*=a;var P=Math.cos(A),R=Math.sin(A);y.a=P*T-R*x,y.b=P*S-R*M,y.c=R*T+P*x,y.d=R*S+P*M,w=!0}if(t!=0){var D=this.temp;i.localToWorld(D.set(this.data.offsetX,this.data.offsetY)),y.worldX+=D.x*t,y.worldY+=D.y*t,w=!0}if(n>0){var I=(Math.sqrt(u*u+d*d)-1+this.data.offsetScaleX)*n+1;y.a*=I,y.c*=I,I=(Math.sqrt(h*h+c*c)-1+this.data.offsetScaleY)*n+1,y.b*=I,y.d*=I,w=!0}if(r>0){var A=Math.atan2(c,h)-Math.atan2(d,u);A>s.MathUtils.PI?A-=s.MathUtils.PI2:A<-s.MathUtils.PI&&(A+=s.MathUtils.PI2);var S=y.b,M=y.d;A=Math.atan2(M,S)+(A-s.MathUtils.PI/2+p)*r;var I=Math.sqrt(S*S+M*M);y.b=Math.cos(A)*I,y.d=Math.sin(A)*I,w=!0}w&&(y.appliedValid=!1)}},v.prototype.applyAbsoluteLocal=function(){var a=this.rotateMix,t=this.translateMix,n=this.scaleMix,r=this.shearMix,i=this.target;i.appliedValid||i.updateAppliedTransform();for(var u=this.bones,h=0,d=u.length;h<d;h++){var c=u[h];c.appliedValid||c.updateAppliedTransform();var o=c.arotation;if(a!=0){var l=i.arotation-o+this.data.offsetRotation;l-=(16384-(16384.499999999996-l/360|0))*360,o+=l*a}var p=c.ax,f=c.ay;t!=0&&(p+=(i.ax-p+this.data.offsetX)*t,f+=(i.ay-f+this.data.offsetY)*t);var m=c.ascaleX,C=c.ascaleY;n!=0&&(m>1e-5&&(m=(m+(i.ascaleX-m+this.data.offsetScaleX)*n)/m),C>1e-5&&(C=(C+(i.ascaleY-C+this.data.offsetScaleY)*n)/C));var y=c.ashearY;if(r!=0){var l=i.ashearY-y+this.data.offsetShearY;l-=(16384-(16384.499999999996-l/360|0))*360,c.shearY+=l*r}c.updateWorldTransformWith(p,f,o,m,C,c.ashearX,y)}},v.prototype.applyRelativeLocal=function(){var a=this.rotateMix,t=this.translateMix,n=this.scaleMix,r=this.shearMix,i=this.target;i.appliedValid||i.updateAppliedTransform();for(var u=this.bones,h=0,d=u.length;h<d;h++){var c=u[h];c.appliedValid||c.updateAppliedTransform();var o=c.arotation;a!=0&&(o+=(i.arotation+this.data.offsetRotation)*a);var l=c.ax,p=c.ay;t!=0&&(l+=(i.ax+this.data.offsetX)*t,p+=(i.ay+this.data.offsetY)*t);var f=c.ascaleX,m=c.ascaleY;n!=0&&(f>1e-5&&(f*=(i.ascaleX-1+this.data.offsetScaleX)*n+1),m>1e-5&&(m*=(i.ascaleY-1+this.data.offsetScaleY)*n+1));var C=c.ashearY;r!=0&&(C+=(i.ashearY+this.data.offsetShearY)*r),c.updateWorldTransformWith(l,p,o,f,m,c.ashearX,C)}},v}();s.TransformConstraint=e})(B||(B={}));var B;(function(s){var e=function(v){nt(a,v);function a(t){var n=v.call(this,t,0,!1)||this;return n.bones=new Array,n.rotateMix=0,n.translateMix=0,n.scaleMix=0,n.shearMix=0,n.offsetRotation=0,n.offsetX=0,n.offsetY=0,n.offsetScaleX=0,n.offsetScaleY=0,n.offsetShearY=0,n.relative=!1,n.local=!1,n}return a}(s.ConstraintData);s.TransformConstraintData=e})(B||(B={}));var B;(function(s){var e=function(){function v(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new s.Pool(function(){return new Array}),this.polygonIndicesPool=new s.Pool(function(){return new Array})}return v.prototype.triangulate=function(a){var t=a,n=a.length>>1,r=this.indicesArray;r.length=0;for(var i=0;i<n;i++)r[i]=i;var u=this.isConcaveArray;u.length=0;for(var i=0,h=n;i<h;++i)u[i]=v.isConcave(i,n,t,r);var d=this.triangles;for(d.length=0;n>3;){for(var c=n-1,i=0,o=1;;){t:if(!u[i]){for(var l=r[c]<<1,p=r[i]<<1,f=r[o]<<1,m=t[l],C=t[l+1],y=t[p],w=t[p+1],T=t[f],S=t[f+1],x=(o+1)%n;x!=c;x=(x+1)%n)if(u[x]){var M=r[x]<<1,A=t[M],P=t[M+1];if(v.positiveArea(T,S,m,C,A,P)&&v.positiveArea(m,C,y,w,A,P)&&v.positiveArea(y,w,T,S,A,P))break t}break}if(o==0){do{if(!u[i])break;i--}while(i>0);break}c=i,i=o,o=(o+1)%n}d.push(r[(n+i-1)%n]),d.push(r[i]),d.push(r[(i+1)%n]),r.splice(i,1),u.splice(i,1),n--;var R=(n+i-1)%n,D=i==n?0:i;u[R]=v.isConcave(R,n,t,r),u[D]=v.isConcave(D,n,t,r)}return n==3&&(d.push(r[2]),d.push(r[0]),d.push(r[1])),d},v.prototype.decompose=function(a,t){var n=a,r=this.convexPolygons;this.polygonPool.freeAll(r),r.length=0;var i=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(i),i.length=0;var u=this.polygonIndicesPool.obtain();u.length=0;var h=this.polygonPool.obtain();h.length=0;for(var d=-1,c=0,o=0,l=t.length;o<l;o+=3){var p=t[o]<<1,f=t[o+1]<<1,m=t[o+2]<<1,C=n[p],y=n[p+1],w=n[f],T=n[f+1],S=n[m],x=n[m+1],M=!1;if(d==p){var A=h.length-4,P=v.winding(h[A],h[A+1],h[A+2],h[A+3],S,x),R=v.winding(S,x,h[0],h[1],h[2],h[3]);P==c&&R==c&&(h.push(S),h.push(x),u.push(m),M=!0)}M||(h.length>0?(r.push(h),i.push(u)):(this.polygonPool.free(h),this.polygonIndicesPool.free(u)),h=this.polygonPool.obtain(),h.length=0,h.push(C),h.push(y),h.push(w),h.push(T),h.push(S),h.push(x),u=this.polygonIndicesPool.obtain(),u.length=0,u.push(p),u.push(f),u.push(m),c=v.winding(C,y,w,T,S,x),d=p)}h.length>0&&(r.push(h),i.push(u));for(var o=0,l=r.length;o<l;o++)if(u=i[o],u.length!=0){var D=u[0],I=u[u.length-1];h=r[o];for(var A=h.length-4,V=h[A],N=h[A+1],L=h[A+2],g=h[A+3],E=h[0],F=h[1],_=h[2],G=h[3],Y=v.winding(V,N,L,g,E,F),Z=0;Z<l;Z++)if(Z!=o){var W=i[Z];if(W.length==3){var U=W[0],O=W[1],k=W[2],z=r[Z],S=z[z.length-2],x=z[z.length-1];if(!(U!=D||O!=I)){var P=v.winding(V,N,L,g,S,x),R=v.winding(S,x,E,F,_,G);P==Y&&R==Y&&(z.length=0,W.length=0,h.push(S),h.push(x),u.push(k),V=L,N=g,L=S,g=x,Z=0)}}}}for(var o=r.length-1;o>=0;o--)h=r[o],h.length==0&&(r.splice(o,1),this.polygonPool.free(h),u=i[o],i.splice(o,1),this.polygonIndicesPool.free(u));return r},v.isConcave=function(a,t,n,r){var i=r[(t+a-1)%t]<<1,u=r[a]<<1,h=r[(a+1)%t]<<1;return!this.positiveArea(n[i],n[i+1],n[u],n[u+1],n[h],n[h+1])},v.positiveArea=function(a,t,n,r,i,u){return a*(u-r)+n*(t-u)+i*(r-t)>=0},v.winding=function(a,t,n,r,i,u){var h=n-a,d=r-t;return i*d-u*h+h*t-a*d>=0?1:-1},v}();s.Triangulator=e})(B||(B={}));var B;(function(s){var e=function(){function l(){this.array=new Array}return l.prototype.add=function(p){var f=this.contains(p);return this.array[p|0]=p|0,!f},l.prototype.contains=function(p){return this.array[p|0]!=null},l.prototype.remove=function(p){this.array[p|0]=void 0},l.prototype.clear=function(){this.array.length=0},l}();s.IntSet=e;var v=function(){function l(p,f,m,C){p===void 0&&(p=0),f===void 0&&(f=0),m===void 0&&(m=0),C===void 0&&(C=0),this.r=p,this.g=f,this.b=m,this.a=C}return l.prototype.set=function(p,f,m,C){return this.r=p,this.g=f,this.b=m,this.a=C,this.clamp(),this},l.prototype.setFromColor=function(p){return this.r=p.r,this.g=p.g,this.b=p.b,this.a=p.a,this},l.prototype.setFromString=function(p){return p=p.charAt(0)=="#"?p.substr(1):p,this.r=parseInt(p.substr(0,2),16)/255,this.g=parseInt(p.substr(2,2),16)/255,this.b=parseInt(p.substr(4,2),16)/255,this.a=(p.length!=8?255:parseInt(p.substr(6,2),16))/255,this},l.prototype.add=function(p,f,m,C){return this.r+=p,this.g+=f,this.b+=m,this.a+=C,this.clamp(),this},l.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},l.rgba8888ToColor=function(p,f){p.r=((f&4278190080)>>>24)/255,p.g=((f&16711680)>>>16)/255,p.b=((f&65280)>>>8)/255,p.a=(f&255)/255},l.rgb888ToColor=function(p,f){p.r=((f&16711680)>>>16)/255,p.g=((f&65280)>>>8)/255,p.b=(f&255)/255},l.WHITE=new l(1,1,1,1),l.RED=new l(1,0,0,1),l.GREEN=new l(0,1,0,1),l.BLUE=new l(0,0,1,1),l.MAGENTA=new l(1,0,1,1),l}();s.Color=v;var a=function(){function l(){}return l.clamp=function(p,f,m){return p<f?f:p>m?m:p},l.cosDeg=function(p){return Math.cos(p*l.degRad)},l.sinDeg=function(p){return Math.sin(p*l.degRad)},l.signum=function(p){return p>0?1:p<0?-1:0},l.toInt=function(p){return p>0?Math.floor(p):Math.ceil(p)},l.cbrt=function(p){var f=Math.pow(Math.abs(p),.3333333333333333);return p<0?-f:f},l.randomTriangular=function(p,f){return l.randomTriangularWith(p,f,(p+f)*.5)},l.randomTriangularWith=function(p,f,m){var C=Math.random(),y=f-p;return C<=(m-p)/y?p+Math.sqrt(C*y*(m-p)):f-Math.sqrt((1-C)*y*(f-m))},l.PI=3.1415927,l.PI2=l.PI*2,l.radiansToDegrees=180/l.PI,l.radDeg=l.radiansToDegrees,l.degreesToRadians=l.PI/180,l.degRad=l.degreesToRadians,l}();s.MathUtils=a;var t=function(){function l(){}return l.prototype.apply=function(p,f,m){return p+(f-p)*this.applyInternal(m)},l}();s.Interpolation=t;var n=function(l){nt(p,l);function p(f){var m=l.call(this)||this;return m.power=2,m.power=f,m}return p.prototype.applyInternal=function(f){return f<=.5?Math.pow(f*2,this.power)/2:Math.pow((f-1)*2,this.power)/(this.power%2==0?-2:2)+1},p}(t);s.Pow=n;var r=function(l){nt(p,l);function p(f){return l.call(this,f)||this}return p.prototype.applyInternal=function(f){return Math.pow(f-1,this.power)*(this.power%2==0?-1:1)+1},p}(n);s.PowOut=r;var i=function(){function l(){}return l.arrayCopy=function(p,f,m,C,y){for(var w=f,T=C;w<f+y;w++,T++)m[T]=p[w]},l.setArraySize=function(p,f,m){m===void 0&&(m=0);var C=p.length;if(C==f)return p;if(p.length=f,C<f)for(var y=C;y<f;y++)p[y]=m;return p},l.ensureArrayCapacity=function(p,f,m){return m===void 0&&(m=0),p.length>=f?p:l.setArraySize(p,f,m)},l.newArray=function(p,f){for(var m=new Array(p),C=0;C<p;C++)m[C]=f;return m},l.newFloatArray=function(p){if(l.SUPPORTS_TYPED_ARRAYS)return new Float32Array(p);for(var f=new Array(p),m=0;m<f.length;m++)f[m]=0;return f},l.newShortArray=function(p){if(l.SUPPORTS_TYPED_ARRAYS)return new Int16Array(p);for(var f=new Array(p),m=0;m<f.length;m++)f[m]=0;return f},l.toFloatArray=function(p){return l.SUPPORTS_TYPED_ARRAYS?new Float32Array(p):p},l.toSinglePrecision=function(p){return l.SUPPORTS_TYPED_ARRAYS?Math.fround(p):p},l.webkit602BugfixHelper=function(p,f){},l.contains=function(p,f,m){for(var C=0;C<p.length;C++)if(p[C]==f)return!0;return!1},l.SUPPORTS_TYPED_ARRAYS=typeof Float32Array<"u",l}();s.Utils=i;var u=function(){function l(){}return l.logBones=function(p){for(var f=0;f<p.bones.length;f++){var m=p.bones[f];console.log(m.data.name+", "+m.a+", "+m.b+", "+m.c+", "+m.d+", "+m.worldX+", "+m.worldY)}},l}();s.DebugUtils=u;var h=function(){function l(p){this.items=new Array,this.instantiator=p}return l.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},l.prototype.free=function(p){p.reset&&p.reset(),this.items.push(p)},l.prototype.freeAll=function(p){for(var f=0;f<p.length;f++)this.free(p[f])},l.prototype.clear=function(){this.items.length=0},l}();s.Pool=h;var d=function(){function l(p,f){p===void 0&&(p=0),f===void 0&&(f=0),this.x=p,this.y=f}return l.prototype.set=function(p,f){return this.x=p,this.y=f,this},l.prototype.length=function(){var p=this.x,f=this.y;return Math.sqrt(p*p+f*f)},l.prototype.normalize=function(){var p=this.length();return p!=0&&(this.x/=p,this.y/=p),this},l}();s.Vector2=d;var c=function(){function l(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return l.prototype.update=function(){var p=Date.now()/1e3;this.delta=p-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=p,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},l}();s.TimeKeeper=c;var o=function(){function l(p){p===void 0&&(p=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(p)}return l.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},l.prototype.addValue=function(p){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=p,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},l.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var p=0,f=0;f<this.values.length;f++)p+=this.values[f];this.mean=p/this.values.length,this.dirty=!1}return this.mean}else return 0},l}();s.WindowedMean=o})(B||(B={}));(function(){Math.fround||(Math.fround=function(s){return function(e){return s[0]=e,s[0]}}(new Float32Array(1)))})();var B;(function(s){var e=function(){function a(t){if(t==null)throw new Error("name cannot be null.");this.name=t}return a}();s.Attachment=e;var v=function(a){nt(t,a);function t(n){var r=a.call(this,n)||this;return r.id=(t.nextID++&65535)<<11,r.worldVerticesLength=0,r.deformAttachment=r,r}return t.prototype.computeWorldVertices=function(n,r,i,u,h,d){i=h+(i>>1)*d;var c=n.bone.skeleton,o=n.deform,l=this.vertices,p=this.bones;if(p==null){o.length>0&&(l=o);for(var f=n.bone,m=f.worldX,C=f.worldY,y=f.a,w=f.b,T=f.c,S=f.d,x=r,M=h;M<i;x+=2,M+=d){var A=l[x],P=l[x+1];u[M]=A*y+P*w+m,u[M+1]=A*T+P*S+C}return}for(var R=0,D=0,I=0;I<r;I+=2){var V=p[R];R+=V+1,D+=V}var N=c.bones;if(o.length==0)for(var M=h,w=D*3;M<i;M+=d){var L=0,g=0,V=p[R++];for(V+=R;R<V;R++,w+=3){var f=N[p[R]],A=l[w],P=l[w+1],E=l[w+2];L+=(A*f.a+P*f.b+f.worldX)*E,g+=(A*f.c+P*f.d+f.worldY)*E}u[M]=L,u[M+1]=g}else for(var F=o,M=h,w=D*3,_=D<<1;M<i;M+=d){var L=0,g=0,V=p[R++];for(V+=R;R<V;R++,w+=3,_+=2){var f=N[p[R]],A=l[w]+F[_],P=l[w+1]+F[_+1],E=l[w+2];L+=(A*f.a+P*f.b+f.worldX)*E,g+=(A*f.c+P*f.d+f.worldY)*E}u[M]=L,u[M+1]=g}},t.prototype.copyTo=function(n){this.bones!=null?(n.bones=new Array(this.bones.length),s.Utils.arrayCopy(this.bones,0,n.bones,0,this.bones.length)):n.bones=null,this.vertices!=null?(n.vertices=s.Utils.newFloatArray(this.vertices.length),s.Utils.arrayCopy(this.vertices,0,n.vertices,0,this.vertices.length)):n.vertices=null,n.worldVerticesLength=this.worldVerticesLength,n.deformAttachment=this.deformAttachment},t.nextID=0,t}(e);s.VertexAttachment=v})(B||(B={}));var B;(function(s){(function(e){e[e.Region=0]="Region",e[e.BoundingBox=1]="BoundingBox",e[e.Mesh=2]="Mesh",e[e.LinkedMesh=3]="LinkedMesh",e[e.Path=4]="Path",e[e.Point=5]="Point",e[e.Clipping=6]="Clipping"})(s.AttachmentType||(s.AttachmentType={}))})(B||(B={}));var B;(function(s){var e=function(v){nt(a,v);function a(t){var n=v.call(this,t)||this;return n.color=new s.Color(1,1,1,1),n}return a.prototype.copy=function(){var t=new a(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t},a}(s.VertexAttachment);s.BoundingBoxAttachment=e})(B||(B={}));var B;(function(s){var e=function(v){nt(a,v);function a(t){var n=v.call(this,t)||this;return n.color=new s.Color(.2275,.2275,.8078,1),n}return a.prototype.copy=function(){var t=new a(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t},a}(s.VertexAttachment);s.ClippingAttachment=e})(B||(B={}));var B;(function(s){var e=function(v){nt(a,v);function a(t){var n=v.call(this,t)||this;return n.color=new s.Color(1,1,1,1),n.tempColor=new s.Color(0,0,0,0),n}return a.prototype.updateUVs=function(){var t=this.regionUVs;(this.uvs==null||this.uvs.length!=t.length)&&(this.uvs=s.Utils.newFloatArray(t.length));var n=this.uvs,r=this.uvs.length,i=this.region.u,u=this.region.v,h=0,d=0;if(this.region instanceof s.TextureAtlasRegion){var c=this.region,o=c.texture.getImage().width,l=c.texture.getImage().height;switch(c.degrees){case 90:i-=(c.originalHeight-c.offsetY-c.height)/o,u-=(c.originalWidth-c.offsetX-c.width)/l,h=c.originalHeight/o,d=c.originalWidth/l;for(var p=0;p<r;p+=2)n[p]=i+t[p+1]*h,n[p+1]=u+(1-t[p])*d;return;case 180:i-=(c.originalWidth-c.offsetX-c.width)/o,u-=c.offsetY/l,h=c.originalWidth/o,d=c.originalHeight/l;for(var p=0;p<r;p+=2)n[p]=i+(1-t[p])*h,n[p+1]=u+(1-t[p+1])*d;return;case 270:i-=c.offsetY/o,u-=c.offsetX/l,h=c.originalHeight/o,d=c.originalWidth/l;for(var p=0;p<r;p+=2)n[p]=i+(1-t[p+1])*h,n[p+1]=u+t[p]*d;return}i-=c.offsetX/o,u-=(c.originalHeight-c.offsetY-c.height)/l,h=c.originalWidth/o,d=c.originalHeight/l}else this.region==null?(i=u=0,h=d=1):(h=this.region.u2-i,d=this.region.v2-u);for(var p=0;p<r;p+=2)n[p]=i+t[p]*h,n[p+1]=u+t[p+1]*d},a.prototype.getParentMesh=function(){return this.parentMesh},a.prototype.setParentMesh=function(t){this.parentMesh=t,t!=null&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},a.prototype.copy=function(){if(this.parentMesh!=null)return this.newLinkedMesh();var t=new a(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Array(this.regionUVs.length),s.Utils.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),s.Utils.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),s.Utils.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,this.edges!=null&&(t.edges=new Array(this.edges.length),s.Utils.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t},a.prototype.newLinkedMesh=function(){var t=new a(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(this.parentMesh!=null?this.parentMesh:this),t.updateUVs(),t},a}(s.VertexAttachment);s.MeshAttachment=e})(B||(B={}));var B;(function(s){var e=function(v){nt(a,v);function a(t){var n=v.call(this,t)||this;return n.closed=!1,n.constantSpeed=!1,n.color=new s.Color(1,1,1,1),n}return a.prototype.copy=function(){var t=new a(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),s.Utils.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t},a}(s.VertexAttachment);s.PathAttachment=e})(B||(B={}));var B;(function(s){var e=function(v){nt(a,v);function a(t){var n=v.call(this,t)||this;return n.color=new s.Color(.38,.94,0,1),n}return a.prototype.computeWorldPosition=function(t,n){return n.x=this.x*t.a+this.y*t.b+t.worldX,n.y=this.x*t.c+this.y*t.d+t.worldY,n},a.prototype.computeWorldRotation=function(t){var n=s.MathUtils.cosDeg(this.rotation),r=s.MathUtils.sinDeg(this.rotation),i=n*t.a+r*t.b,u=n*t.c+r*t.d;return Math.atan2(u,i)*s.MathUtils.radDeg},a.prototype.copy=function(){var t=new a(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t},a}(s.VertexAttachment);s.PointAttachment=e})(B||(B={}));var B;(function(s){var e=function(v){nt(a,v);function a(t){var n=v.call(this,t)||this;return n.x=0,n.y=0,n.scaleX=1,n.scaleY=1,n.rotation=0,n.width=0,n.height=0,n.color=new s.Color(1,1,1,1),n.offset=s.Utils.newFloatArray(8),n.uvs=s.Utils.newFloatArray(8),n.tempColor=new s.Color(1,1,1,1),n}return a.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,n=this.height/this.region.originalHeight*this.scaleY,r=-this.width/2*this.scaleX+this.region.offsetX*t,i=-this.height/2*this.scaleY+this.region.offsetY*n,u=r+this.region.width*t,h=i+this.region.height*n,d=this.rotation*Math.PI/180,c=Math.cos(d),o=Math.sin(d),l=r*c+this.x,p=r*o,f=i*c+this.y,m=i*o,C=u*c+this.x,y=u*o,w=h*c+this.y,T=h*o,S=this.offset;S[a.OX1]=l-m,S[a.OY1]=f+p,S[a.OX2]=l-T,S[a.OY2]=w+p,S[a.OX3]=C-T,S[a.OY3]=w+y,S[a.OX4]=C-m,S[a.OY4]=f+y},a.prototype.setRegion=function(t){this.region=t;var n=this.uvs;t.rotate?(n[2]=t.u,n[3]=t.v2,n[4]=t.u,n[5]=t.v,n[6]=t.u2,n[7]=t.v,n[0]=t.u2,n[1]=t.v2):(n[0]=t.u,n[1]=t.v2,n[2]=t.u,n[3]=t.v,n[4]=t.u2,n[5]=t.v,n[6]=t.u2,n[7]=t.v2)},a.prototype.computeWorldVertices=function(t,n,r,i){var u=this.offset,h=t.worldX,d=t.worldY,c=t.a,o=t.b,l=t.c,p=t.d,f=0,m=0;f=u[a.OX1],m=u[a.OY1],n[r]=f*c+m*o+h,n[r+1]=f*l+m*p+d,r+=i,f=u[a.OX2],m=u[a.OY2],n[r]=f*c+m*o+h,n[r+1]=f*l+m*p+d,r+=i,f=u[a.OX3],m=u[a.OY3],n[r]=f*c+m*o+h,n[r+1]=f*l+m*p+d,r+=i,f=u[a.OX4],m=u[a.OY4],n[r]=f*c+m*o+h,n[r+1]=f*l+m*p+d},a.prototype.copy=function(){var t=new a(this.name);return t.region=this.region,t.rendererObject=this.rendererObject,t.path=this.path,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,s.Utils.arrayCopy(this.uvs,0,t.uvs,0,8),s.Utils.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t},a.OX1=0,a.OY1=1,a.OX2=2,a.OY2=3,a.OX3=4,a.OY3=5,a.OX4=6,a.OY4=7,a.X1=0,a.Y1=1,a.C1R=2,a.C1G=3,a.C1B=4,a.C1A=5,a.U1=6,a.V1=7,a.X2=8,a.Y2=9,a.C2R=10,a.C2G=11,a.C2B=12,a.C2A=13,a.U2=14,a.V2=15,a.X3=16,a.Y3=17,a.C3R=18,a.C3G=19,a.C3B=20,a.C3A=21,a.U3=22,a.V3=23,a.X4=24,a.Y4=25,a.C4R=26,a.C4G=27,a.C4B=28,a.C4A=29,a.U4=30,a.V4=31,a}(s.Attachment);s.RegionAttachment=e})(B||(B={}));var B;(function(s){var e=function(){function v(a,t){this.jitterX=0,this.jitterY=0,this.jitterX=a,this.jitterY=t}return v.prototype.begin=function(a){},v.prototype.transform=function(a,t,n,r){a.x+=s.MathUtils.randomTriangular(-this.jitterX,this.jitterY),a.y+=s.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},v.prototype.end=function(){},v}();s.JitterEffect=e})(B||(B={}));var B;(function(s){var e=function(){function v(a){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=a}return v.prototype.begin=function(a){this.worldX=a.x+this.centerX,this.worldY=a.y+this.centerY},v.prototype.transform=function(a,t,n,r){var i=this.angle*s.MathUtils.degreesToRadians,u=a.x-this.worldX,h=a.y-this.worldY,d=Math.sqrt(u*u+h*h);if(d<this.radius){var c=v.interpolation.apply(0,i,(this.radius-d)/this.radius),o=Math.cos(c),l=Math.sin(c);a.x=o*u-l*h+this.worldX,a.y=l*u+o*h+this.worldY}},v.prototype.end=function(){},v.interpolation=new s.PowOut(2),v}();s.SwirlEffect=e})(B||(B={}));var B;(function(s){(function(e){var v=function(a){nt(t,a);function t(n,r){return r===void 0&&(r=""),a.call(this,function(i){return new s.webgl.GLTexture(n,i)},r)||this}return t}(s.AssetManager);e.AssetManager=v})(s.webgl||(s.webgl={}))})(B||(B={}));var B;(function(s){(function(e){var v=function(){function a(t,n){this.position=new e.Vector3(0,0,0),this.direction=new e.Vector3(0,0,-1),this.up=new e.Vector3(0,1,0),this.near=0,this.far=100,this.zoom=1,this.viewportWidth=0,this.viewportHeight=0,this.projectionView=new e.Matrix4,this.inverseProjectionView=new e.Matrix4,this.projection=new e.Matrix4,this.view=new e.Matrix4,this.tmp=new e.Vector3,this.viewportWidth=t,this.viewportHeight=n,this.update()}return a.prototype.update=function(){var t=this.projection,n=this.view,r=this.projectionView,i=this.inverseProjectionView,u=this.zoom,h=this.viewportWidth,d=this.viewportHeight;t.ortho(u*(-h/2),u*(h/2),u*(-d/2),u*(d/2),this.near,this.far),n.lookAt(this.position,this.direction,this.up),r.set(t.values),r.multiply(n),i.set(r.values).invert()},a.prototype.screenToWorld=function(t,n,r){var i=t.x,u=r-t.y-1,h=this.tmp;return h.x=2*i/n-1,h.y=2*u/r-1,h.z=2*t.z-1,h.project(this.inverseProjectionView),t.set(h.x,h.y,h.z),t},a.prototype.setViewport=function(t,n){this.viewportWidth=t,this.viewportHeight=n},a}();e.OrthoCamera=v})(s.webgl||(s.webgl={}))})(B||(B={}));var B;(function(s){(function(e){var v=function(a){nt(t,a);function t(n,r,i){i===void 0&&(i=!1);var u=a.call(this,r)||this;return u.texture=null,u.boundUnit=0,u.useMipMaps=!1,u.context=n instanceof e.ManagedWebGLRenderingContext?n:new e.ManagedWebGLRenderingContext(n),u.useMipMaps=i,u.restore(),u.context.addRestorable(u),u}return t.prototype.setFilters=function(n,r){var i=this.context.gl;this.bind(),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,n),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,t.validateMagFilter(r))},t.validateMagFilter=function(n){switch(n){case s.TextureFilter.MipMap:case s.TextureFilter.MipMapLinearLinear:case s.TextureFilter.MipMapLinearNearest:case s.TextureFilter.MipMapNearestLinear:case s.TextureFilter.MipMapNearestNearest:return s.TextureFilter.Linear;default:return n}},t.prototype.setWraps=function(n,r){var i=this.context.gl;this.bind(),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,n),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,r)},t.prototype.update=function(n){var r=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),t.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL&&r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,this._image),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n?r.LINEAR_MIPMAP_LINEAR:r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),n&&r.generateMipmap(r.TEXTURE_2D)},t.prototype.restore=function(){this.texture=null,this.update(this.useMipMaps)},t.prototype.bind=function(n){n===void 0&&(n=0);var r=this.context.gl;this.boundUnit=n,r.activeTexture(r.TEXTURE0+n),r.bindTexture(r.TEXTURE_2D,this.texture)},t.prototype.unbind=function(){var n=this.context.gl;n.activeTexture(n.TEXTURE0+this.boundUnit),n.bindTexture(n.TEXTURE_2D,null)},t.prototype.dispose=function(){this.context.removeRestorable(this);var n=this.context.gl;n.deleteTexture(this.texture)},t.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL=!1,t}(s.Texture);e.GLTexture=v})(s.webgl||(s.webgl={}))})(B||(B={}));var B;(function(s){(function(e){var v=function(){function t(n){this.lastX=0,this.lastY=0,this.buttonDown=!1,this.currTouch=null,this.touchesPool=new s.Pool(function(){return new s.webgl.Touch(0,0,0)}),this.listeners=new Array,this.element=n,this.setupCallbacks(n)}return t.prototype.setupCallbacks=function(n){var r=this,i=function(d){if(d instanceof MouseEvent){for(var c=n.getBoundingClientRect(),o=d.clientX-c.left,l=d.clientY-c.top,p=r.listeners,f=0;f<p.length;f++)p[f].down&&p[f].down(o,l);r.lastX=o,r.lastY=l,r.buttonDown=!0,document.addEventListener("mousemove",u),document.addEventListener("mouseup",h)}},u=function(d){if(d instanceof MouseEvent){for(var c=n.getBoundingClientRect(),o=d.clientX-c.left,l=d.clientY-c.top,p=r.listeners,f=0;f<p.length;f++)r.buttonDown?p[f].dragged&&p[f].dragged(o,l):p[f].moved&&p[f].moved(o,l);r.lastX=o,r.lastY=l}},h=function(d){if(d instanceof MouseEvent){for(var c=n.getBoundingClientRect(),o=d.clientX-c.left,l=d.clientY-c.top,p=r.listeners,f=0;f<p.length;f++)p[f].up&&p[f].up(o,l);r.lastX=o,r.lastY=l,r.buttonDown=!1,document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",h)}};n.addEventListener("mousedown",i,!0),n.addEventListener("mousemove",u,!0),n.addEventListener("mouseup",h,!0),n.addEventListener("touchstart",function(d){if(r.currTouch==null){for(var c=d.changedTouches,o=0;o<c.length;o++){var l=c[o],p=n.getBoundingClientRect(),f=l.clientX-p.left,m=l.clientY-p.top;r.currTouch=r.touchesPool.obtain(),r.currTouch.identifier=l.identifier,r.currTouch.x=f,r.currTouch.y=m;break}for(var C=r.listeners,y=0;y<C.length;y++)C[y].down&&C[y].down(r.currTouch.x,r.currTouch.y);r.lastX=r.currTouch.x,r.lastY=r.currTouch.y,r.buttonDown=!0,d.preventDefault()}},!1),n.addEventListener("touchend",function(d){for(var c=d.changedTouches,o=0;o<c.length;o++){var l=c[o];if(r.currTouch.identifier===l.identifier){var p=n.getBoundingClientRect(),f=r.currTouch.x=l.clientX-p.left,m=r.currTouch.y=l.clientY-p.top;r.touchesPool.free(r.currTouch);for(var C=r.listeners,y=0;y<C.length;y++)C[y].up&&C[y].up(f,m);r.lastX=f,r.lastY=m,r.buttonDown=!1,r.currTouch=null;break}}d.preventDefault()},!1),n.addEventListener("touchcancel",function(d){for(var c=d.changedTouches,o=0;o<c.length;o++){var l=c[o];if(r.currTouch.identifier===l.identifier){var p=n.getBoundingClientRect(),f=r.currTouch.x=l.clientX-p.left,m=r.currTouch.y=l.clientY-p.top;r.touchesPool.free(r.currTouch);for(var C=r.listeners,y=0;y<C.length;y++)C[y].up&&C[y].up(f,m);r.lastX=f,r.lastY=m,r.buttonDown=!1,r.currTouch=null;break}}d.preventDefault()},!1),n.addEventListener("touchmove",function(d){if(r.currTouch!=null){for(var c=d.changedTouches,o=0;o<c.length;o++){var l=c[o];if(r.currTouch.identifier===l.identifier){for(var p=n.getBoundingClientRect(),f=l.clientX-p.left,m=l.clientY-p.top,C=r.listeners,y=0;y<C.length;y++)C[y].dragged&&C[y].dragged(f,m);r.lastX=r.currTouch.x=f,r.lastY=r.currTouch.y=m;break}}d.preventDefault()}},!1)},t.prototype.addListener=function(n){this.listeners.push(n)},t.prototype.removeListener=function(n){var r=this.listeners.indexOf(n);r>-1&&this.listeners.splice(r,1)},t}();e.Input=v;var a=function(){function t(n,r,i){this.identifier=n,this.x=r,this.y=i}return t}();e.Touch=a})(s.webgl||(s.webgl={}))})(B||(B={}));var B;(function(s){(function(e){var v=function(){function a(t){if(this.logo=null,this.spinner=null,this.angle=0,this.fadeOut=0,this.timeKeeper=new s.TimeKeeper,this.backgroundColor=new s.Color(.135,.135,.135,1),this.tempColor=new s.Color,this.firstDraw=0,this.renderer=t,this.timeKeeper.maxDelta=9,a.logoImg===null){var n=navigator.userAgent.indexOf("Safari")>-1;a.logoImg=new Image,a.logoImg.src=a.SPINE_LOGO_DATA,n||(a.logoImg.crossOrigin="anonymous"),a.logoImg.onload=function(r){a.loaded++},a.spinnerImg=new Image,a.spinnerImg.src=a.SPINNER_DATA,n||(a.spinnerImg.crossOrigin="anonymous"),a.spinnerImg.onload=function(r){a.loaded++}}}return a.prototype.draw=function(t){if(t===void 0&&(t=!1),!(t&&this.fadeOut>a.FADE_SECONDS)){this.timeKeeper.update();var n=Math.abs(Math.sin(this.timeKeeper.totalTime+.75));this.angle-=this.timeKeeper.delta/1.4*360*(1+1.5*Math.pow(n,5));var r=this.renderer,i=r.canvas,u=r.context.gl;r.resize(e.ResizeMode.Stretch);var h=r.camera.position.x,d=r.camera.position.y;if(r.camera.position.set(i.width/2,i.height/2,0),r.camera.viewportWidth=i.width,r.camera.viewportHeight=i.height,!t)u.clearColor(this.backgroundColor.r,this.backgroundColor.g,this.backgroundColor.b,this.backgroundColor.a),u.clear(u.COLOR_BUFFER_BIT),this.tempColor.a=1;else{if(this.fadeOut+=this.timeKeeper.delta*(this.timeKeeper.totalTime<1?2:1),this.fadeOut>a.FADE_SECONDS){r.camera.position.set(h,d,0);return}n=1-this.fadeOut/a.FADE_SECONDS,this.tempColor.setFromColor(this.backgroundColor),this.tempColor.a=1-(n-1)*(n-1),r.begin(),r.quad(!0,0,0,i.width,0,i.width,i.height,0,i.height,this.tempColor,this.tempColor,this.tempColor,this.tempColor),r.end()}if(this.tempColor.set(1,1,1,this.tempColor.a),a.loaded==2){this.logo===null&&(this.logo=new e.GLTexture(r.context,a.logoImg),this.spinner=new e.GLTexture(r.context,a.spinnerImg)),this.logo.update(!1),this.spinner.update(!1);var c=this.logo.getImage().width,o=this.logo.getImage().height,l=this.spinner.getImage().width,p=this.spinner.getImage().height;r.batcher.setBlendMode(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA),r.begin(),r.drawTexture(this.logo,(i.width-c)/2,(i.height-o)/2,c,o,this.tempColor),r.drawTextureRotated(this.spinner,(i.width-l)/2,(i.height-p)/2,l,p,l/2,p/2,this.angle,this.tempColor),r.end(),r.camera.position.set(h,d,0)}}},a.FADE_SECONDS=1,a.loaded=0,a.spinnerImg=null,a.logoImg=null,a.SPINNER_DATA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKMAAACjCAYAAADmbK6AAAAACXBIWXMAAAsTAAALEwEAmpwYAAALB2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxNS41IChXaW5kb3dzKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTYtMDktMDhUMTQ6MjU6MTIrMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTgtMTEtMTVUMTY6NDA6NTkrMDE6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTExLTE1VDE2OjQwOjU5KzAxOjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpmZDhlNTljMC02NGJjLTIxNGQtODAyZi1jZDlhODJjM2ZjMGMiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpmYmNmZWJlYS03MjY2LWE0NGQtOTI4NS0wOTJmNGNhYzk4ZWEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowODMzNWIyYy04NzYyLWQzNGMtOTBhOS02ODJjYjJmYTQ2M2UiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHRpZmY6T3JpZW50YXRpb249IjEiIHRpZmY6WFJlc29sdXRpb249IjcyMDAwMC8xMDAwMCIgdGlmZjpZUmVzb2x1dGlvbj0iNzIwMDAwLzEwMDAwIiB0aWZmOlJlc29sdXRpb25Vbml0PSIyIiBleGlmOkNvbG9yU3BhY2U9IjY1NTM1IiBleGlmOlBpeGVsWERpbWVuc2lvbj0iMjk3IiBleGlmOlBpeGVsWURpbWVuc2lvbj0iMjQyIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowODMzNWIyYy04NzYyLWQzNGMtOTBhOS02ODJjYjJmYTQ2M2UiIHN0RXZ0OndoZW49IjIwMTYtMDktMDhUMTQ6MjU6MTIrMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1LjUgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiNThlMTlkNi0xYTRjLTQyNDEtODU0ZC01MDVlZjYxMjRhODQiIHN0RXZ0OndoZW49IjIwMTgtMTEtMTVUMTY6NDA6MjMrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ3YzYzYzIwLWJkYjgtYzM0YS1hYzMyLWQ5MDdjOWEyOTA0MCIgc3RFdnQ6d2hlbj0iMjAxOC0xMS0xNVQxNjo0MDo1OSswMTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZmQ4ZTU5YzAtNjRiYy0yMTRkLTgwMmYtY2Q5YTgyYzNmYzBjIiBzdEV2dDp3aGVuPSIyMDE4LTExLTE1VDE2OjQwOjU5KzAxOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0N2M2M2MyMC1iZGI4LWMzNGEtYWMzMi1kOTA3YzlhMjkwNDAiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo2OWRmZjljYy01YzFiLWE5NDctOTc3OS03ODgxZjM0ODk3MDMiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowODMzNWIyYy04NzYyLWQzNGMtOTBhOS02ODJjYjJmYTQ2M2UiLz4gPHBob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPHJkZjpCYWc+IDxyZGY6bGk+eG1wLmRpZDowODMzNWIyYy04NzYyLWQzNGMtOTBhOS02ODJjYjJmYTQ2M2U8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7qS4aQAAAKZElEQVR42u2de4xVxR3HP8dd3rQryPKo4dGNbtVAQRa1YB93E1tTS7VYqCBiSWhsqGltSx+0xD60tKBorYnNkkBtFUt9xJaGNGlty6EqRAK1KlalshK2C8tzpcIigpz+MbPr5e5y987dM2fv4/tJbjC7v3P2+JvPnTMzZ85MEEURQhQClUpB7gRBAECUYiYwH6gDqoEKoA1oBDYCy4OQJgB92R3yq2S5yRilWASs6CZ0DzA5CNmn/ObOOUpB7kQpRgNLcwj9AHCnMiYZfXIT0C/H2DlRSs0gyeiPaQ6xg4FapUwy+mKUY/wwpUwy+uK4Y/xhpUwy+mKfY3yTUiYZfdHiENsahBxRyiSjL5odYncpXZLRJ3sdYhuVLslYKDKqZpSMBXObVs0oGQumA6OaUTL6Iwg5CBzNMXy7MiYZffNCDjH7g5DdSpVk9M36mGKEZOwxq4Fj3cT8UmmSjEm0Gw8At2UJaQhCtilTeeRWM5EdkmVfOwCIUtQBE4AqILC1ZQuwPgjpSKryWwgy1gfZfjsQ886IKFY2xO9N0jOR69srDOAtzCyYFuCUSrcg6AOcBIYCY4C3gVeT+uNJyvg94GPAxzFjcDuBl4C/AP+UBwXBR4AaYDYwDvgr8Drwi1KScRnwXfut6wNcYT+7Ma97LgX+JRd6jfOAucAXgCvTfl4DvAuMtJVJ0cu41IoYWRHTGWM/1TZmq/2fF8nR14r4U2BQF7+LgMW2k7bY54X4Htr5EvD99s5SlriPArcAY+VGsh1YYDpwMzAgSwy2svhWscpYA/wkx9gKm5S5wBA5kgjnAJcDX7NNpVxcWAZMLUYZJwHDHeKrgXnAdWjZlSS4BLgVuMzRlxt9eeNTxsG2veFyy7gQWAR8Sq54byfeYDssAx3LqLabJldBytgMHMjjuPHAQvTOsU++aJtE/fI4dpevTqZPGV+2veN8+DTwIHCBr29hmVJhJXwA+GAex7cBjxZjm7EFWAL8DfeX39s7NPOy9PKEO7XAV+k8xJYLrcDPgL8Xo4xgJqIuA7bkeXw9ZsBVxMMMYEqex64FfuO7e++bTcAPgD8Bpx2PvRSYKIdi61DOs3edXImAV4Cv2zJsKnYZ24B/AJ+xteRrwAmHBF4mj2JhEnCRg4QnrYh3YZ5NH/J9gUmP5zXYtsdsW+Pl8vffkEex8I5D7HHgGeBhe0dLhKRlbMJM298NXI8Z68rGk8AGeRQLu4DHMGOL2dgJPA78AXguyQvsjScdrTYp2zBDPzfbXl7mmNc64B7MFCbRc/bbfPYHrs343WnbZHsG+BXwZ8y65JS6jOnfwPuBg8BnMQtxjsWsh/0IsNJ2fkR8bAHutbfhG2x7vp9tDzZiFs5/Non2YaHJ2N6OWQf8BxiBeRx4EDPZ9nm544WNVsLtwFWYJ2Wh/fmO3ryw3noHpiv6YyZ5NsuXROhrRypeAv7nfHQJvAOTjbclYuJ3pWcL6YL03rSQjEJIRiEZhZCMQjIKIRmFZBRCMgrJKIRkFJJRCMkoJKMQklFIRiEkoxCSUUhGISSjkIxCSEYhGYWQjEIyCiEZhWQUQjIKySiEZBSSUQjJKCSjEAVCJUAQmCWPoxSjgZuAaZgF348D+zD7ADYDe+2nGWgJQg52dVJvSzOLgqHdmU5ln2IYZou9861Do+x/j8Ss2z7AOrQJWBOEZtetKIrMmt5BEBClWAQsxW3b16OY/QHXA6uD0GzpG0VRPmt6i2KSMeyQrxpYgNl4dCJmV7NcOQEsCULu6ZCR+mAmZiOannAMuC0IWS0Zy0PGKMUCzFZug3p4ullsiJ5obzPOj+H6BgGrohR1KqrSx5bzqhhE7PCvXcY4BZqgoioL4iznunQZq2M8cZXKqSyIs5yr02WsiPHEaiyWSbMxxnNVpMvYFuOJj6mcyoI4y7ktXcbGGE/conIqC+Is58Z0GTfGdNIGzJijKH3W2/KOg43pMi4n//2F92P2KJ4ShCwMQvT4pRwajCFRELIQmGLLf3+ep9pj/TvjCcwI4E5gDp1H0VsxO7k3Zvy7PQjZnXl2DXqXhYydiFKMAcYD44CajH+HZIQfBdYCtwch+854HJh2wkqgFhgGHAaagpAjLhcqGctTxqxOpKgCRgNDMXuK7whCTqU7U9khz3ucAv59xomUe9FVhePGEfs5q1eaQiYKBskoJKMQklFIRiEko5CMQkhGIRmFkIxCMgohGYVkFEIyCskohGQUklEIySiEZBSSUQjJKCSjEJJRSEYhJKOQjEJIRiEZhZCMQjIKIRmFZBSijGXMvIZ+KpZEaF8qeygwHOjb2xdUWQBJqQL6ADOBi4GHMGuGH5Iv3hiG2SJtIWaV4mZgB/AadF6jvVxkvAKzv3UdMNX+bDJm9fx10PV+1qLHIl4P3GLzfh3QBLwKbAZ+DJwuFxkDm5CZmN0Vzsv4/TTMyviVwGOYnRZEPAwBZgDfAC5K+/lo+5kKXAjcBzwPnCz1NuP77LfxO12I2M7FNmFXE+++huVOPfDNDBEz25FzgHuBa4Bzk8x/0jJeCiwCFmP2BsnGh4BbgYFyKDZmZRExnTpbGcywHZySuk0PsbeAG4HZDt+2C6yMb8mjWHgXs+NFd5v09Ac+AYzC7An0EPBKqdSM1wDfBqY7Vvubk263lDhPYHamypVa4MvAHUCq2GvGgcB8YAEwKQ/5nwa33blEVrYDLwJXOhxzLvBJzDhkK/BCMdaMA4C5wF2Y4RrXv7UF+KO9tYh42A08msfoRxVwLfBDYGwxyliLGUMclMexL9rOy075EyvvAKuBlcCbeTa3Pl+MMk7GbP/qyiHg18BWueOFNnu3ymeP8X62h11dbDKm7K3a9Zv7e+BJOeOVRmCNvQO5cgmdt4AueBkH5zCE0FWHpQH4r3zxzlPAw3kcdxg4VmwybnaMfx1YAWxTpyURjtj24wpHuZ7C0yNanzL+FnjZIX4lsEGOJEorcDewKcf4vTb+ZLHJuAeYBxzvJm4/8CPg58AJ+ZE4BzBDNk93k//jwOeAN4qxNw1m5sdV9jZwtlvv48ADujX3GpFtUt0OhPZnJzN63wdtOW7xeSFJPJvehBnBv8/2ricAp2wb8UHgETRvsRDYCiy3IrbPCWi0Mt4BPOf7AoIoivycub5TR/rDmBkjs4Df2fbHJjlQcLwfuNyW13rMXILOkyQ2REUtI5jnnG+mNRFOF3Gh1dlavgozhHUMaLEFGJWImBVnbT4VlYwlSBCYL1iUYgGw6ixhDUHIwo4GmfIrGX3JGKWotj3KbM/cpwQh2yRjYfWmS5EFdD/54ytKk2RMgukxxQjJ2GMm5hAzPEoxRqmSjN6IUgwj9xkr45UxyeiTkQ6x45QuyeiT8x1ia5QuyeiTUaoZJWMxyqiaUTIWzG1aNaNkLJgOzJAoRZVSJhl9McIxfrRSJhl94fq241ClTDL6Yq9jvCYNS0ZvuEwGPopZmlhIRi+sIfeXxtYGIaeUMsnohSCkCViSQ+gezAtOwiW/mvzpkKz3ZnrPxCz1V4dZd6YC8+JSI2YNm+VWXE2ulYyiGPk/nslB8d6ayMkAAAAASUVORK5CYII=",a.SPINE_LOGO_DATA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKUAAABsCAYAAAALzHKmAAAACXBIWXMAAAsTAAALEwEAmpwYAAALB2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxNS41IChXaW5kb3dzKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTYtMDktMDhUMTQ6MjU6MTIrMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTgtMTEtMTVUMTY6NDA6NTkrMDE6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTExLTE1VDE2OjQwOjU5KzAxOjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowMTdhZGQ3Ni04OTZlLThlNGUtYmM5MS00ZjEyNjI1YjA3MjgiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDplMTViNGE2ZS1hMDg3LWEzNDktODdhOS1mNDYzYjE2MzQ0Y2MiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowODMzNWIyYy04NzYyLWQzNGMtOTBhOS02ODJjYjJmYTQ2M2UiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHRpZmY6T3JpZW50YXRpb249IjEiIHRpZmY6WFJlc29sdXRpb249IjcyMDAwMC8xMDAwMCIgdGlmZjpZUmVzb2x1dGlvbj0iNzIwMDAwLzEwMDAwIiB0aWZmOlJlc29sdXRpb25Vbml0PSIyIiBleGlmOkNvbG9yU3BhY2U9IjY1NTM1IiBleGlmOlBpeGVsWERpbWVuc2lvbj0iMjk3IiBleGlmOlBpeGVsWURpbWVuc2lvbj0iMjQyIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowODMzNWIyYy04NzYyLWQzNGMtOTBhOS02ODJjYjJmYTQ2M2UiIHN0RXZ0OndoZW49IjIwMTYtMDktMDhUMTQ6MjU6MTIrMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1LjUgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiNThlMTlkNi0xYTRjLTQyNDEtODU0ZC01MDVlZjYxMjRhODQiIHN0RXZ0OndoZW49IjIwMTgtMTEtMTVUMTY6NDA6MjMrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjJlNjJiMWM2LWIxYzQtNDk0MC04MDMxLWU4ZDkyNTBmODJjNSIgc3RFdnQ6d2hlbj0iMjAxOC0xMS0xNVQxNjo0MDo1OSswMTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MDE3YWRkNzYtODk2ZS04ZTRlLWJjOTEtNGYxMjYyNWIwNzI4IiBzdEV2dDp3aGVuPSIyMDE4LTExLTE1VDE2OjQwOjU5KzAxOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyZTYyYjFjNi1iMWM0LTQ5NDAtODAzMS1lOGQ5MjUwZjgyYzUiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo2OWRmZjljYy01YzFiLWE5NDctOTc3OS03ODgxZjM0ODk3MDMiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowODMzNWIyYy04NzYyLWQzNGMtOTBhOS02ODJjYjJmYTQ2M2UiLz4gPHBob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPHJkZjpCYWc+IDxyZGY6bGk+eG1wLmRpZDowODMzNWIyYy04NzYyLWQzNGMtOTBhOS02ODJjYjJmYTQ2M2U8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5ayrctAAATYUlEQVR42u2dfVQV553Hv88AXq5uAAlJ0CBem912jQh60kZ8y0tdC5soJnoaXzC4Tdz4cjya1GN206Zqsu3Jpm6yeM5uTG3iaYGoJNFdEY3GaFGD0p4mqS9AXpoV0OZFUOHS3usFuc/+Idde8M7M8zr3gsw5HOCZZ2aemecz39/LPPMMMLAMLDG2kIFzjqmFDiDZP6AkN3gf0gEob8x2kj4MCx2AMnbb1BcVld6IwJJ+0oYb2YTT/gYq6WPHJP3gmtA+Biztr1CSKLevLytprCkh7ctQkj4KsK590hiGlsbSOcVCR5I+BC7pA6BEAzQaq1DqhFFH3Vg16TSG4KHRgNPpyFd1XdIHAyrdCkhjADgaTSiJw/VIP1BSp6GhUQSOOgmlkzASxSqq2zpQB+ClGiGlUb65tAUZOmDUAa5u5XRSgajibVRCR3VCSRyoQwSBE/EvYy3YkYGESuwrpuAkDgPJCg4RhFVUNUkMw6hK6agDcFInoSQxAqNqWHVdD6fUhQqUsfiaVCN41IlOUBEx88JIJCCU8T+tttOR6pEFUgRQXoCVrydRAJJw/G+2jig6llN+p0wnsZpYXsAoxzGognYzryeagBRRR8L5t4iCRsvflDHnIopINcCpGkzlUOoCkqWcKABdlznXZa5lTK7Z/6zlvMeXXqdTCVWoI696ygZN0YZSp/KxQCijmiJgUp3gyQBpVy4Kq4gPqhpWlQrCCxgPeLz70wqmyqcksgELS5kKQEWCIBn1FEn7qFBKKgmnajCloZQtlwWSZR0PoCJBkJMDMnT4iSxlsQCmFJQidVUASQS3ZSlXadqhWDVkTCoLiDKw8t40XOU6oFQBJMtvkSBJ1ITLqKaOgIbVF+y9jd3/omAqVUtViigTTfMAyKqqKnxOlWZcFEzVZjrSb11gaodSRiVVAikCo4hKyjzpkh3No8tf1AUmrxnXCmW0gSSCcIqki4hipbTqGNU+IwuMqsAUfSLVoywezi46gGSFU8Sk86bBKOd1oJzrwuuEQLIbBU8sfiPC37DYhuW8pEfex3NcQBUqyVrO+7edeZdNIfFCSi22oZwdSkzUk1jAaQcrGMA0O34kUJXAaAYl0aSMkRQMjODxAArGct6onPf68CgLbGCkNv4r4axrp4wwUUc7CAnDdkzXJ14SNFHVEQFNRjHtbg7ZoMfuOlHGDiG9/DPCCDgLjDBROFgon50ZV6mQ1/YVzwmgSniJhFryAMpybB4TLjJLRqTOZPUbZYIrwmiqZYC02lboXOIV0C3qm5nVZQGSSCiuaETOe5PygEg4AbXyM1lhJIxqqiWYUQklUaiShMGc2gFpBbDdcXl9StHXka38KVZ/i8V35DXzZibcClIWtRS90ZQpJa/ysZhtHiBV+pk8imm2TjTFwxsQWIHL42PaRd4iroW0ksZLKAFv5MoKbyQQVZl1mShc5LxYOo4Fxt4KyZPysXMhrOrwqKWyHGa8wiCHVSXtzDaxgYSA36xDEk4V5lvGpxRVIZb8pZ0Z571x7My6Up9S17SBhMGvjASfocCUi0TkvOaZMJh11vSPGVSEcT0s1JYyKKnu1BABQOMloeJ9ssMCg53phoKUkVDQs2MMcvNSsZICwfYufPZVB+o/86HxbAAXP/ah9Z2LuPSnAK5wqB1PLlIkmGEBkzVbwKuWolkE6ddXeYeb2akfEfwRTRnZRf89/r84Bf81NB73WtDQ+VUHKocfw1ob35J3QAXrYApq8X94edBmvVUZS9si/Qbr/wacWXgeN/LCCAHAQ+sNhvqhOiQOcNucZMKwQXh42XCkM95AELjZRFNjRCAPSxSmAbXlKXlNOlF0wj2WoqKi5Hnz5mdTGiQA8OCDDx4T6aiNGzeOufnmm5MBoKysrHbfvn3tVhf40hX8MSked1u1LUhx+e1mXGBIz1znC77xxtaJhmFQwzDo3LmPHBdJ6ezZs2cqIVf3UVt7unH16tWNsB4gwpItsPKdlSfTZd4EZH1MKKJkEX8WLfqnlPXr1/8oNTV1QQ8QgsG2pqamX+TkZG+OtP/y8jcn5efnb+nq6vKmpg7NfeONrZOmT5++3uVyZYTvp76+vjg3d8IWs2vy2DDcsunvUDrIQLrZBT3fgXduO4ZnrEx1aWlpbkHBrM0AkJyclFVZWZl3990TngpvT1dXl7e29vRLU6dOLTcxmT3+P3Hi5NLMzMwlhmEkh7fH7/cfraqqemHevLknTMy10yZci/mO2rR5GzZs2JaamrogGAy2Xbx4cWtTU9OLXq93r2EYyR6P52kLdQQAxMXFJR05cvSRGTNmvOZyuTJ8Pl+d1+utCa0fPXr0kydOnHzSzFRu+RLNM09j7qc+vHY5iIbe7Wu7gt8t+wwbGG9YAEBV1eHvT516z0uh9vj9/tpQW7Ozc54rL39zkt1Dh6+/Pl/h8XieNgwjORAInGpqanqxvb19TzAYbHO73VPz8vK2vfXW29kKUnuOLIZitYWFryjlq1RXV890uVxjAWD37oqFo0Z5fjR2bNYvRozIWLFx48b7zpw5s8EmqgYA5OTkrA8EAud2767452HD0ueOGJHxxLp16x7w+Xx1AODxeB5buXLlCDOf9d2L8H7rd3jFfQSzv/MBpjx7BrP/4yzmP1qP76W8j6U7m3HJzpoEg8Fr5ePHj1/n8/nqtmx5fe6wYemPpKffNreysnJxaP2999672sqi/eEPJ5YkJiZmAcDhw1WP3nrrLQVjx2Ztysi4ffmqVSunBAKBU4ZhJE+bNu1VDj81qosRZfVjyU0CABk6dGgmAHR2djYVFRWdCl+3du1Pzo0bl7PZDPxwCHw+X11R0aOPLFy4sCa0vrj4P8+9++7+jaE6P/jBY3NYgrTft8P3s0Y0rPkcn5R9jRaGtNR159zdnieeeuqpulBZYeGCmsbGxtcBwO12jzFT3Iceejh55MiRTwBAQ0PDzwsKCqrDj1NSUuL98MMPX+hW3pHvvXdwqoK+1jELs3KlVGHmbZPVgUBHGwAkJCRklpSUjBW9MB988PvXwwKaa3UWLVpUEwgEzgFAamrqnWYppZ+Owt8eHoeCfdmY/vYYTH43B9/76Nt4tP5uLHlrDCbyntd77x0oPnDggLd3nbNnz9aG/i4vf3NipG1XrFgxKeRD7tq1a2+k4+Tn570fDAbbAOD222/P5uwTJ9/41BJ9izaOKXVQXFxcWVxc/IxhGMmzZj20+5NPPn21vLx8+9q1Pzlrd/xwpWxtbfWawev3+//kcrkyUlJSJpi1618z8cs4guRIx/mmG34Aky2i0+si1bC29VgX1s4e7Q+vl5aWNiJUmJ2dnVlRUTGiWxUpAISi8M7OzqaQ66O4r7UM4HDyxTEpn+XXv/5V2/Tp/1CYn/+PryQkJGSmp6cvXbVq1dLFixdX19TUbJ49++Fjsvm1L774oqYbSMtcpOk6YrqOuwND6S7W/dx///0l6CdLfBQVkntZuHDhqfnz58/84Q9XP5iZmbkgMTExa8iQIZOnTZs2+fPP/2/7HXd8Y63uNrR04vitgzAt0rqvOnAADgyCjbScOXNmAyGEAoBhGNd+E4Jrqrl//77KGwlK6hSY27Zta922bdtWANsrKiomT5iQ+y+JiYlZaWlp83bs2LlvzpzZx0X3PXz48Nyr/utV3zLS8vgn+Onr3wK9ZRDuI93X7wpFW9Nl7J51GpsQpY+4jxuX8yqsHy9SxMAH5p1KCfGAq3R/BQUF1cuXLy8KOfKjRo3KipDQ7bGkpKQkmbXrpptuGg0AXq+33uyglRfQdtsxPJ15HJOL6pE/4xS+m3AY373jt3j59F/gtzn369oUUrXedQn5a3lYnR7n5fP5rvmdW7ZsyXKYHW1fVjMcbqjyLyjs2PF2W0dHx1nWHdx117cfz8vLS+q9r4MHD82Ji4tLAoDm5uY6WM/6gHMBdJZ+jfN7LqAVzn0cqceyb9871X/NZ9433+6GjCXwoqWUvJ1hCUFjY9O/19XVLSssLOwR+R469JsHQsnjy5cvtyHSY6swNRo8ePCdpaVl5WVlZbmhstLS0gnjx49fBVx9vPfssz/eEaFN17VrrQee34zDA59OwIrWKdjsvwf/uysL90TYhjKCyzPvOH3++efPtrS0bO+OxOedOHFyaaR9VldXz2hsbHpRQf9R8E05I8RFvNM+oY1Pavpik8vlykxJSSl85ZVNz7z00svvB4NBEhcXlxwG5OlJkyZuh/mLUSGTVzd48OA7Z84s+OX5883nuvd97Znz0aNH/u3gwYPeCBexRwDzq7/HXYvS8VrvE5mSjO8DOGzRCT0nc+oOTnp3bASzHrFD16xZs2HTpk1ZiYmJWR6P5+lLl1qXBAKBU6H1brd7Snh1sD2rjqqJNxw6sOzkobSqquoFv99/NHShhwwZMjkEZEtLy/Zly5YtMrubwzv40KFDL3/00UfPdXV1eV0uV0YIyEAgcK6iYtcTs2bN2m+iCD3KvuyAN1LDr1D8xSSwuFYW3p7m5mavHRQXLlxoM1FdunPnjtbly5cXNTQ0/DwYDLYZhpHsdrunhH6Aq4MyPv744yWM6kwZ1VFr7tDub7P/HR8lBIAUFRWlRBi2Fn6DXXec0CghAKisrFxcWLjgOABSVlY2MQRG92M+rhfHGnKxZmQiFgAgXRTeLzuwf+Vn+O//aUErg2ljnemMdZQOBUBLSkrGpqXdkhQCPz8/7wjYBveKjBLinenN1nIAoCpHnvNOEGD2zo0RATKrdbZvPJaXvzk5BOXevXsfnz9/Xg3jednlYsnEJAz5hhvuPRdwsfUKuhhUHzYdZjWvJAuwlBE8ltHoVnDa3UDCUKp8omM3QwPrdlb7sVuHSD5luLns/ttquhIzGCP6eMe9aD/uRTtnMAfoeSXCDkie9rGabuX+qFOPGSMFHdREgVjA6w0N7xt2PLNWUCur8ZwHnu8kYWTbFfiS4zHY3wX/nFr8llEZRGG0U1Fq4xebKR+PD6kN1mg80bEC1Awyq1dCbUG0UEpWv9sUrCcz8OOkePR4Xp79N7jr5J8RsIFSdo5yW//SQkV5VZIKmmKhaDxeEkKr90/AYM5Z1NIOFtuX4ktLS08TQhZRSklpaWkt+N+tNl28XfhjOJS+LtSf/DMuC4Aoo5i8QFKbDIFTSfbIT7M4Ah2WYEck+FH9Zh/AN+EVU6RtBuo3B2PQ1tGYlZYAT3sXvljXgMqdzWiTMN0qfEuegEVHlC38eq1IR7BOJgAOIKEATqt9mKWw7CJuFZPx83x+xA5Klq8+iAIJsL8kZrdOGso4zo5gnQhV9qsOVuMheYbYs3yvmmc9lagn+iUGarMPVsW0y5FSAUXXYuLjBXZMBLdhmU02UtBjFQzx+ps850EtoLfzpbnVgUN5VOQxWdVR9MtmUiki1Skhq3wiTIBkgRMCKR/CWM6bV+W581kHL7DkMXk+1sQKJK9VcWQEEq/5FjXhIsGF7Ddt7MDhufAqTBYFlHzuWORLYpRBSXnNtowvKaWULDN42W3D+hkNMOQhAfNEN8/stay5U5nv3/AGPLI5TFa/kgrUlb05uW7gOEF1UqWWdhOk8kS9Ks0uT3BDGbbn8Sl54VTla1qZZ542Sy9xnGkgcAAkOoMukQBT1L+TMfci7gGvOecxsSzmXTaYYTk/nuvODSVLmchH5cH5t+hMuyyjuFmdedFXGyij/waoiXhlHlOyHgsMbY5q9G3le/LOu83ywSHRNBXLY1GRtA9vwMPaqU59wVZFG6DoWkkppajS8XyHW8V3t4lEekP09VS7kTp2Ebmsvyli0kWyBSqsyHVlcYIAyviWsmASThhVBjY84wtZ9suaK5RJy4iaaNa8pVKVNINSRi11gSkSheu4o82UkAVmnhymKIgi0TnA/8hRNPKmqqHkVUsnwBR91Meqjiocd5ZASgQKFT4nT1DDA6TUdSOaymXAFEkniZp7FSOBdAU9LOkVqgBQp4BkLieKgLUqkzXvVuDx7EMEQl35URHoIAmODMAqFJIZyjjNKqriE8a8yXynAxsIdgRrp/KabxkYow6kjFKIqqjKZDnhvAFELYNO8w3Jjuc15yLmmjWoUQZlnIT5UgGmjGqyjLtUrXy6oGRRTl2QivqwrJaJG2KZ5DQvsKwmmccHZVVD2fSSLmXk6XxRSHgVU5U6iqqnFJSyYKqAU+QGiJVAh2oClUdhqeLjSgOpSjFkTbwOVRXNGEDB9aCSwFIFHa3DFZBRfi1Q6gBTFk4Rs63zGijrFIg/ylRt7lW3m6kOUagQqiJ5orFONKJtHR0ok/vUAaPKOrbRt2owZZVTJmhRDaKOYW26I1st06yoBFKmk4jD61UCShSfq1OdpTLgUDW6R8t87rqcfZ1BlMr6uq6Vjhf2owGvozDKmG9dyiQCeTSAiwXVdNIP1A2uls7QkYhW/fgzVgIeXVOe6ISFOnSOjjn+uuHsK5F2NM1hLG/jSGfpjoSdjLSJg7Cp7FjaR7ZzXEGcinBJDF8DnZ1Ho7wPrYNadHdINGCLdVMdrU6nMdimqHYgiaF2kn4IXJ8FMJY6iPRxsPqTksbc55ZJP2vHgOnuYwD2tU4k/eycaT891g0F5YDZ7qfQ3SidTAZgG4By4FwHgBtYBpYbZ/l/2EJnC9N0gaQAAAAASUVORK5CYII=",a}();e.LoadingScreen=v})(s.webgl||(s.webgl={}))})(B||(B={}));var B;(function(s){(function(e){e.M00=0,e.M01=4,e.M02=8,e.M03=12,e.M10=1,e.M11=5,e.M12=9,e.M13=13,e.M20=2,e.M21=6,e.M22=10,e.M23=14,e.M30=3,e.M31=7,e.M32=11,e.M33=15;var v=function(){function a(){this.temp=new Float32Array(16),this.values=new Float32Array(16);var t=this.values;t[e.M00]=1,t[e.M11]=1,t[e.M22]=1,t[e.M33]=1}return a.prototype.set=function(t){return this.values.set(t),this},a.prototype.transpose=function(){var t=this.temp,n=this.values;return t[e.M00]=n[e.M00],t[e.M01]=n[e.M10],t[e.M02]=n[e.M20],t[e.M03]=n[e.M30],t[e.M10]=n[e.M01],t[e.M11]=n[e.M11],t[e.M12]=n[e.M21],t[e.M13]=n[e.M31],t[e.M20]=n[e.M02],t[e.M21]=n[e.M12],t[e.M22]=n[e.M22],t[e.M23]=n[e.M32],t[e.M30]=n[e.M03],t[e.M31]=n[e.M13],t[e.M32]=n[e.M23],t[e.M33]=n[e.M33],this.set(t)},a.prototype.identity=function(){var t=this.values;return t[e.M00]=1,t[e.M01]=0,t[e.M02]=0,t[e.M03]=0,t[e.M10]=0,t[e.M11]=1,t[e.M12]=0,t[e.M13]=0,t[e.M20]=0,t[e.M21]=0,t[e.M22]=1,t[e.M23]=0,t[e.M30]=0,t[e.M31]=0,t[e.M32]=0,t[e.M33]=1,this},a.prototype.invert=function(){var t=this.values,n=this.temp,r=t[e.M30]*t[e.M21]*t[e.M12]*t[e.M03]-t[e.M20]*t[e.M31]*t[e.M12]*t[e.M03]-t[e.M30]*t[e.M11]*t[e.M22]*t[e.M03]+t[e.M10]*t[e.M31]*t[e.M22]*t[e.M03]+t[e.M20]*t[e.M11]*t[e.M32]*t[e.M03]-t[e.M10]*t[e.M21]*t[e.M32]*t[e.M03]-t[e.M30]*t[e.M21]*t[e.M02]*t[e.M13]+t[e.M20]*t[e.M31]*t[e.M02]*t[e.M13]+t[e.M30]*t[e.M01]*t[e.M22]*t[e.M13]-t[e.M00]*t[e.M31]*t[e.M22]*t[e.M13]-t[e.M20]*t[e.M01]*t[e.M32]*t[e.M13]+t[e.M00]*t[e.M21]*t[e.M32]*t[e.M13]+t[e.M30]*t[e.M11]*t[e.M02]*t[e.M23]-t[e.M10]*t[e.M31]*t[e.M02]*t[e.M23]-t[e.M30]*t[e.M01]*t[e.M12]*t[e.M23]+t[e.M00]*t[e.M31]*t[e.M12]*t[e.M23]+t[e.M10]*t[e.M01]*t[e.M32]*t[e.M23]-t[e.M00]*t[e.M11]*t[e.M32]*t[e.M23]-t[e.M20]*t[e.M11]*t[e.M02]*t[e.M33]+t[e.M10]*t[e.M21]*t[e.M02]*t[e.M33]+t[e.M20]*t[e.M01]*t[e.M12]*t[e.M33]-t[e.M00]*t[e.M21]*t[e.M12]*t[e.M33]-t[e.M10]*t[e.M01]*t[e.M22]*t[e.M33]+t[e.M00]*t[e.M11]*t[e.M22]*t[e.M33];if(r==0)throw new Error("non-invertible matrix");var i=1/r;return n[e.M00]=t[e.M12]*t[e.M23]*t[e.M31]-t[e.M13]*t[e.M22]*t[e.M31]+t[e.M13]*t[e.M21]*t[e.M32]-t[e.M11]*t[e.M23]*t[e.M32]-t[e.M12]*t[e.M21]*t[e.M33]+t[e.M11]*t[e.M22]*t[e.M33],n[e.M01]=t[e.M03]*t[e.M22]*t[e.M31]-t[e.M02]*t[e.M23]*t[e.M31]-t[e.M03]*t[e.M21]*t[e.M32]+t[e.M01]*t[e.M23]*t[e.M32]+t[e.M02]*t[e.M21]*t[e.M33]-t[e.M01]*t[e.M22]*t[e.M33],n[e.M02]=t[e.M02]*t[e.M13]*t[e.M31]-t[e.M03]*t[e.M12]*t[e.M31]+t[e.M03]*t[e.M11]*t[e.M32]-t[e.M01]*t[e.M13]*t[e.M32]-t[e.M02]*t[e.M11]*t[e.M33]+t[e.M01]*t[e.M12]*t[e.M33],n[e.M03]=t[e.M03]*t[e.M12]*t[e.M21]-t[e.M02]*t[e.M13]*t[e.M21]-t[e.M03]*t[e.M11]*t[e.M22]+t[e.M01]*t[e.M13]*t[e.M22]+t[e.M02]*t[e.M11]*t[e.M23]-t[e.M01]*t[e.M12]*t[e.M23],n[e.M10]=t[e.M13]*t[e.M22]*t[e.M30]-t[e.M12]*t[e.M23]*t[e.M30]-t[e.M13]*t[e.M20]*t[e.M32]+t[e.M10]*t[e.M23]*t[e.M32]+t[e.M12]*t[e.M20]*t[e.M33]-t[e.M10]*t[e.M22]*t[e.M33],n[e.M11]=t[e.M02]*t[e.M23]*t[e.M30]-t[e.M03]*t[e.M22]*t[e.M30]+t[e.M03]*t[e.M20]*t[e.M32]-t[e.M00]*t[e.M23]*t[e.M32]-t[e.M02]*t[e.M20]*t[e.M33]+t[e.M00]*t[e.M22]*t[e.M33],n[e.M12]=t[e.M03]*t[e.M12]*t[e.M30]-t[e.M02]*t[e.M13]*t[e.M30]-t[e.M03]*t[e.M10]*t[e.M32]+t[e.M00]*t[e.M13]*t[e.M32]+t[e.M02]*t[e.M10]*t[e.M33]-t[e.M00]*t[e.M12]*t[e.M33],n[e.M13]=t[e.M02]*t[e.M13]*t[e.M20]-t[e.M03]*t[e.M12]*t[e.M20]+t[e.M03]*t[e.M10]*t[e.M22]-t[e.M00]*t[e.M13]*t[e.M22]-t[e.M02]*t[e.M10]*t[e.M23]+t[e.M00]*t[e.M12]*t[e.M23],n[e.M20]=t[e.M11]*t[e.M23]*t[e.M30]-t[e.M13]*t[e.M21]*t[e.M30]+t[e.M13]*t[e.M20]*t[e.M31]-t[e.M10]*t[e.M23]*t[e.M31]-t[e.M11]*t[e.M20]*t[e.M33]+t[e.M10]*t[e.M21]*t[e.M33],n[e.M21]=t[e.M03]*t[e.M21]*t[e.M30]-t[e.M01]*t[e.M23]*t[e.M30]-t[e.M03]*t[e.M20]*t[e.M31]+t[e.M00]*t[e.M23]*t[e.M31]+t[e.M01]*t[e.M20]*t[e.M33]-t[e.M00]*t[e.M21]*t[e.M33],n[e.M22]=t[e.M01]*t[e.M13]*t[e.M30]-t[e.M03]*t[e.M11]*t[e.M30]+t[e.M03]*t[e.M10]*t[e.M31]-t[e.M00]*t[e.M13]*t[e.M31]-t[e.M01]*t[e.M10]*t[e.M33]+t[e.M00]*t[e.M11]*t[e.M33],n[e.M23]=t[e.M03]*t[e.M11]*t[e.M20]-t[e.M01]*t[e.M13]*t[e.M20]-t[e.M03]*t[e.M10]*t[e.M21]+t[e.M00]*t[e.M13]*t[e.M21]+t[e.M01]*t[e.M10]*t[e.M23]-t[e.M00]*t[e.M11]*t[e.M23],n[e.M30]=t[e.M12]*t[e.M21]*t[e.M30]-t[e.M11]*t[e.M22]*t[e.M30]-t[e.M12]*t[e.M20]*t[e.M31]+t[e.M10]*t[e.M22]*t[e.M31]+t[e.M11]*t[e.M20]*t[e.M32]-t[e.M10]*t[e.M21]*t[e.M32],n[e.M31]=t[e.M01]*t[e.M22]*t[e.M30]-t[e.M02]*t[e.M21]*t[e.M30]+t[e.M02]*t[e.M20]*t[e.M31]-t[e.M00]*t[e.M22]*t[e.M31]-t[e.M01]*t[e.M20]*t[e.M32]+t[e.M00]*t[e.M21]*t[e.M32],n[e.M32]=t[e.M02]*t[e.M11]*t[e.M30]-t[e.M01]*t[e.M12]*t[e.M30]-t[e.M02]*t[e.M10]*t[e.M31]+t[e.M00]*t[e.M12]*t[e.M31]+t[e.M01]*t[e.M10]*t[e.M32]-t[e.M00]*t[e.M11]*t[e.M32],n[e.M33]=t[e.M01]*t[e.M12]*t[e.M20]-t[e.M02]*t[e.M11]*t[e.M20]+t[e.M02]*t[e.M10]*t[e.M21]-t[e.M00]*t[e.M12]*t[e.M21]-t[e.M01]*t[e.M10]*t[e.M22]+t[e.M00]*t[e.M11]*t[e.M22],t[e.M00]=n[e.M00]*i,t[e.M01]=n[e.M01]*i,t[e.M02]=n[e.M02]*i,t[e.M03]=n[e.M03]*i,t[e.M10]=n[e.M10]*i,t[e.M11]=n[e.M11]*i,t[e.M12]=n[e.M12]*i,t[e.M13]=n[e.M13]*i,t[e.M20]=n[e.M20]*i,t[e.M21]=n[e.M21]*i,t[e.M22]=n[e.M22]*i,t[e.M23]=n[e.M23]*i,t[e.M30]=n[e.M30]*i,t[e.M31]=n[e.M31]*i,t[e.M32]=n[e.M32]*i,t[e.M33]=n[e.M33]*i,this},a.prototype.determinant=function(){var t=this.values;return t[e.M30]*t[e.M21]*t[e.M12]*t[e.M03]-t[e.M20]*t[e.M31]*t[e.M12]*t[e.M03]-t[e.M30]*t[e.M11]*t[e.M22]*t[e.M03]+t[e.M10]*t[e.M31]*t[e.M22]*t[e.M03]+t[e.M20]*t[e.M11]*t[e.M32]*t[e.M03]-t[e.M10]*t[e.M21]*t[e.M32]*t[e.M03]-t[e.M30]*t[e.M21]*t[e.M02]*t[e.M13]+t[e.M20]*t[e.M31]*t[e.M02]*t[e.M13]+t[e.M30]*t[e.M01]*t[e.M22]*t[e.M13]-t[e.M00]*t[e.M31]*t[e.M22]*t[e.M13]-t[e.M20]*t[e.M01]*t[e.M32]*t[e.M13]+t[e.M00]*t[e.M21]*t[e.M32]*t[e.M13]+t[e.M30]*t[e.M11]*t[e.M02]*t[e.M23]-t[e.M10]*t[e.M31]*t[e.M02]*t[e.M23]-t[e.M30]*t[e.M01]*t[e.M12]*t[e.M23]+t[e.M00]*t[e.M31]*t[e.M12]*t[e.M23]+t[e.M10]*t[e.M01]*t[e.M32]*t[e.M23]-t[e.M00]*t[e.M11]*t[e.M32]*t[e.M23]-t[e.M20]*t[e.M11]*t[e.M02]*t[e.M33]+t[e.M10]*t[e.M21]*t[e.M02]*t[e.M33]+t[e.M20]*t[e.M01]*t[e.M12]*t[e.M33]-t[e.M00]*t[e.M21]*t[e.M12]*t[e.M33]-t[e.M10]*t[e.M01]*t[e.M22]*t[e.M33]+t[e.M00]*t[e.M11]*t[e.M22]*t[e.M33]},a.prototype.translate=function(t,n,r){var i=this.values;return i[e.M03]+=t,i[e.M13]+=n,i[e.M23]+=r,this},a.prototype.copy=function(){return new a().set(this.values)},a.prototype.projection=function(t,n,r,i){this.identity();var u=1/Math.tan(r*(Math.PI/180)/2),h=(n+t)/(t-n),d=2*n*t/(t-n),c=this.values;return c[e.M00]=u/i,c[e.M10]=0,c[e.M20]=0,c[e.M30]=0,c[e.M01]=0,c[e.M11]=u,c[e.M21]=0,c[e.M31]=0,c[e.M02]=0,c[e.M12]=0,c[e.M22]=h,c[e.M32]=-1,c[e.M03]=0,c[e.M13]=0,c[e.M23]=d,c[e.M33]=0,this},a.prototype.ortho2d=function(t,n,r,i){return this.ortho(t,t+r,n,n+i,0,1)},a.prototype.ortho=function(t,n,r,i,u,h){this.identity();var d=2/(n-t),c=2/(i-r),o=-2/(h-u),l=-(n+t)/(n-t),p=-(i+r)/(i-r),f=-(h+u)/(h-u),m=this.values;return m[e.M00]=d,m[e.M10]=0,m[e.M20]=0,m[e.M30]=0,m[e.M01]=0,m[e.M11]=c,m[e.M21]=0,m[e.M31]=0,m[e.M02]=0,m[e.M12]=0,m[e.M22]=o,m[e.M32]=0,m[e.M03]=l,m[e.M13]=p,m[e.M23]=f,m[e.M33]=1,this},a.prototype.multiply=function(t){var n=this.temp,r=this.values,i=t.values;return n[e.M00]=r[e.M00]*i[e.M00]+r[e.M01]*i[e.M10]+r[e.M02]*i[e.M20]+r[e.M03]*i[e.M30],n[e.M01]=r[e.M00]*i[e.M01]+r[e.M01]*i[e.M11]+r[e.M02]*i[e.M21]+r[e.M03]*i[e.M31],n[e.M02]=r[e.M00]*i[e.M02]+r[e.M01]*i[e.M12]+r[e.M02]*i[e.M22]+r[e.M03]*i[e.M32],n[e.M03]=r[e.M00]*i[e.M03]+r[e.M01]*i[e.M13]+r[e.M02]*i[e.M23]+r[e.M03]*i[e.M33],n[e.M10]=r[e.M10]*i[e.M00]+r[e.M11]*i[e.M10]+r[e.M12]*i[e.M20]+r[e.M13]*i[e.M30],n[e.M11]=r[e.M10]*i[e.M01]+r[e.M11]*i[e.M11]+r[e.M12]*i[e.M21]+r[e.M13]*i[e.M31],n[e.M12]=r[e.M10]*i[e.M02]+r[e.M11]*i[e.M12]+r[e.M12]*i[e.M22]+r[e.M13]*i[e.M32],n[e.M13]=r[e.M10]*i[e.M03]+r[e.M11]*i[e.M13]+r[e.M12]*i[e.M23]+r[e.M13]*i[e.M33],n[e.M20]=r[e.M20]*i[e.M00]+r[e.M21]*i[e.M10]+r[e.M22]*i[e.M20]+r[e.M23]*i[e.M30],n[e.M21]=r[e.M20]*i[e.M01]+r[e.M21]*i[e.M11]+r[e.M22]*i[e.M21]+r[e.M23]*i[e.M31],n[e.M22]=r[e.M20]*i[e.M02]+r[e.M21]*i[e.M12]+r[e.M22]*i[e.M22]+r[e.M23]*i[e.M32],n[e.M23]=r[e.M20]*i[e.M03]+r[e.M21]*i[e.M13]+r[e.M22]*i[e.M23]+r[e.M23]*i[e.M33],n[e.M30]=r[e.M30]*i[e.M00]+r[e.M31]*i[e.M10]+r[e.M32]*i[e.M20]+r[e.M33]*i[e.M30],n[e.M31]=r[e.M30]*i[e.M01]+r[e.M31]*i[e.M11]+r[e.M32]*i[e.M21]+r[e.M33]*i[e.M31],n[e.M32]=r[e.M30]*i[e.M02]+r[e.M31]*i[e.M12]+r[e.M32]*i[e.M22]+r[e.M33]*i[e.M32],n[e.M33]=r[e.M30]*i[e.M03]+r[e.M31]*i[e.M13]+r[e.M32]*i[e.M23]+r[e.M33]*i[e.M33],this.set(this.temp)},a.prototype.multiplyLeft=function(t){var n=this.temp,r=this.values,i=t.values;return n[e.M00]=i[e.M00]*r[e.M00]+i[e.M01]*r[e.M10]+i[e.M02]*r[e.M20]+i[e.M03]*r[e.M30],n[e.M01]=i[e.M00]*r[e.M01]+i[e.M01]*r[e.M11]+i[e.M02]*r[e.M21]+i[e.M03]*r[e.M31],n[e.M02]=i[e.M00]*r[e.M02]+i[e.M01]*r[e.M12]+i[e.M02]*r[e.M22]+i[e.M03]*r[e.M32],n[e.M03]=i[e.M00]*r[e.M03]+i[e.M01]*r[e.M13]+i[e.M02]*r[e.M23]+i[e.M03]*r[e.M33],n[e.M10]=i[e.M10]*r[e.M00]+i[e.M11]*r[e.M10]+i[e.M12]*r[e.M20]+i[e.M13]*r[e.M30],n[e.M11]=i[e.M10]*r[e.M01]+i[e.M11]*r[e.M11]+i[e.M12]*r[e.M21]+i[e.M13]*r[e.M31],n[e.M12]=i[e.M10]*r[e.M02]+i[e.M11]*r[e.M12]+i[e.M12]*r[e.M22]+i[e.M13]*r[e.M32],n[e.M13]=i[e.M10]*r[e.M03]+i[e.M11]*r[e.M13]+i[e.M12]*r[e.M23]+i[e.M13]*r[e.M33],n[e.M20]=i[e.M20]*r[e.M00]+i[e.M21]*r[e.M10]+i[e.M22]*r[e.M20]+i[e.M23]*r[e.M30],n[e.M21]=i[e.M20]*r[e.M01]+i[e.M21]*r[e.M11]+i[e.M22]*r[e.M21]+i[e.M23]*r[e.M31],n[e.M22]=i[e.M20]*r[e.M02]+i[e.M21]*r[e.M12]+i[e.M22]*r[e.M22]+i[e.M23]*r[e.M32],n[e.M23]=i[e.M20]*r[e.M03]+i[e.M21]*r[e.M13]+i[e.M22]*r[e.M23]+i[e.M23]*r[e.M33],n[e.M30]=i[e.M30]*r[e.M00]+i[e.M31]*r[e.M10]+i[e.M32]*r[e.M20]+i[e.M33]*r[e.M30],n[e.M31]=i[e.M30]*r[e.M01]+i[e.M31]*r[e.M11]+i[e.M32]*r[e.M21]+i[e.M33]*r[e.M31],n[e.M32]=i[e.M30]*r[e.M02]+i[e.M31]*r[e.M12]+i[e.M32]*r[e.M22]+i[e.M33]*r[e.M32],n[e.M33]=i[e.M30]*r[e.M03]+i[e.M31]*r[e.M13]+i[e.M32]*r[e.M23]+i[e.M33]*r[e.M33],this.set(this.temp)},a.prototype.lookAt=function(t,n,r){a.initTemps();var i=a.xAxis,u=a.yAxis,h=a.zAxis;h.setFrom(n).normalize(),i.setFrom(n).normalize(),i.cross(r).normalize(),u.setFrom(i).cross(h).normalize(),this.identity();var d=this.values;return d[e.M00]=i.x,d[e.M01]=i.y,d[e.M02]=i.z,d[e.M10]=u.x,d[e.M11]=u.y,d[e.M12]=u.z,d[e.M20]=-h.x,d[e.M21]=-h.y,d[e.M22]=-h.z,a.tmpMatrix.identity(),a.tmpMatrix.values[e.M03]=-t.x,a.tmpMatrix.values[e.M13]=-t.y,a.tmpMatrix.values[e.M23]=-t.z,this.multiply(a.tmpMatrix),this},a.initTemps=function(){a.xAxis===null&&(a.xAxis=new e.Vector3),a.yAxis===null&&(a.yAxis=new e.Vector3),a.zAxis===null&&(a.zAxis=new e.Vector3)},a.xAxis=null,a.yAxis=null,a.zAxis=null,a.tmpMatrix=new a,a}();e.Matrix4=v})(s.webgl||(s.webgl={}))})(B||(B={}));var B;(function(s){(function(e){var v=function(){function d(c,o,l,p){this.attributes=o,this.verticesLength=0,this.dirtyVertices=!1,this.indicesLength=0,this.dirtyIndices=!1,this.elementsPerVertex=0,this.context=c instanceof e.ManagedWebGLRenderingContext?c:new e.ManagedWebGLRenderingContext(c),this.elementsPerVertex=0;for(var f=0;f<o.length;f++)this.elementsPerVertex+=o[f].numElements;this.vertices=new Float32Array(l*this.elementsPerVertex),this.indices=new Uint16Array(p),this.context.addRestorable(this)}return d.prototype.getAttributes=function(){return this.attributes},d.prototype.maxVertices=function(){return this.vertices.length/this.elementsPerVertex},d.prototype.numVertices=function(){return this.verticesLength/this.elementsPerVertex},d.prototype.setVerticesLength=function(c){this.dirtyVertices=!0,this.verticesLength=c},d.prototype.getVertices=function(){return this.vertices},d.prototype.maxIndices=function(){return this.indices.length},d.prototype.numIndices=function(){return this.indicesLength},d.prototype.setIndicesLength=function(c){this.dirtyIndices=!0,this.indicesLength=c},d.prototype.getIndices=function(){return this.indices},d.prototype.getVertexSizeInFloats=function(){for(var c=0,o=0;o<this.attributes.length;o++){var l=this.attributes[o];c+=l.numElements}return c},d.prototype.setVertices=function(c){if(this.dirtyVertices=!0,c.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(c,0),this.verticesLength=c.length},d.prototype.setIndices=function(c){if(this.dirtyIndices=!0,c.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(c,0),this.indicesLength=c.length},d.prototype.draw=function(c,o){this.drawWithOffset(c,o,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex)},d.prototype.drawWithOffset=function(c,o,l,p){var f=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(c),this.indicesLength>0?f.drawElements(o,p,f.UNSIGNED_SHORT,l*2):f.drawArrays(o,l,p),this.unbind(c)},d.prototype.bind=function(c){var o=this.context.gl;o.bindBuffer(o.ARRAY_BUFFER,this.verticesBuffer);for(var l=0,p=0;p<this.attributes.length;p++){var f=this.attributes[p],m=c.getAttributeLocation(f.name);o.enableVertexAttribArray(m),o.vertexAttribPointer(m,f.numElements,o.FLOAT,!1,this.elementsPerVertex*4,l*4),l+=f.numElements}this.indicesLength>0&&o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,this.indicesBuffer)},d.prototype.unbind=function(c){for(var o=this.context.gl,l=0;l<this.attributes.length;l++){var p=this.attributes[l],f=c.getAttributeLocation(p.name);o.disableVertexAttribArray(f)}o.bindBuffer(o.ARRAY_BUFFER,null),this.indicesLength>0&&o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,null)},d.prototype.update=function(){var c=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=c.createBuffer()),c.bindBuffer(c.ARRAY_BUFFER,this.verticesBuffer),c.bufferData(c.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),c.DYNAMIC_DRAW),this.dirtyVertices=!1),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=c.createBuffer()),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),c.bufferData(c.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),c.DYNAMIC_DRAW),this.dirtyIndices=!1)},d.prototype.restore=function(){this.verticesBuffer=null,this.indicesBuffer=null,this.update()},d.prototype.dispose=function(){this.context.removeRestorable(this);var c=this.context.gl;c.deleteBuffer(this.verticesBuffer),c.deleteBuffer(this.indicesBuffer)},d}();e.Mesh=v;var a=function(){function d(c,o,l){this.name=c,this.type=o,this.numElements=l}return d}();e.VertexAttribute=a;var t=function(d){nt(c,d);function c(){return d.call(this,e.Shader.POSITION,h.Float,2)||this}return c}(a);e.Position2Attribute=t;var n=function(d){nt(c,d);function c(){return d.call(this,e.Shader.POSITION,h.Float,3)||this}return c}(a);e.Position3Attribute=n;var r=function(d){nt(c,d);function c(o){return o===void 0&&(o=0),d.call(this,e.Shader.TEXCOORDS+(o==0?"":o),h.Float,2)||this}return c}(a);e.TexCoordAttribute=r;var i=function(d){nt(c,d);function c(){return d.call(this,e.Shader.COLOR,h.Float,4)||this}return c}(a);e.ColorAttribute=i;var u=function(d){nt(c,d);function c(){return d.call(this,e.Shader.COLOR2,h.Float,4)||this}return c}(a);e.Color2Attribute=u;var h;(function(d){d[d.Float=0]="Float"})(h=e.VertexAttributeType||(e.VertexAttributeType={}))})(s.webgl||(s.webgl={}))})(B||(B={}));var B;(function(s){(function(e){var v=function(){function a(t,n,r){if(n===void 0&&(n=!0),r===void 0&&(r=10920),this.isDrawing=!1,this.shader=null,this.lastTexture=null,this.verticesLength=0,this.indicesLength=0,r>10920)throw new Error("Can't have more than 10920 triangles per batch: "+r);this.context=t instanceof e.ManagedWebGLRenderingContext?t:new e.ManagedWebGLRenderingContext(t);var i=n?[new e.Position2Attribute,new e.ColorAttribute,new e.TexCoordAttribute,new e.Color2Attribute]:[new e.Position2Attribute,new e.ColorAttribute,new e.TexCoordAttribute];this.mesh=new e.Mesh(t,i,r,r*3),this.srcBlend=this.context.gl.SRC_ALPHA,this.dstBlend=this.context.gl.ONE_MINUS_SRC_ALPHA}return a.prototype.begin=function(t){var n=this.context.gl;if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=t,this.lastTexture=null,this.isDrawing=!0,n.enable(n.BLEND),n.blendFunc(this.srcBlend,this.dstBlend)},a.prototype.setBlendMode=function(t,n){var r=this.context.gl;this.srcBlend=t,this.dstBlend=n,this.isDrawing&&(this.flush(),r.blendFunc(this.srcBlend,this.dstBlend))},a.prototype.draw=function(t,n,r){t!=this.lastTexture?(this.flush(),this.lastTexture=t):(this.verticesLength+n.length>this.mesh.getVertices().length||this.indicesLength+r.length>this.mesh.getIndices().length)&&this.flush();var i=this.mesh.numVertices();this.mesh.getVertices().set(n,this.verticesLength),this.verticesLength+=n.length,this.mesh.setVerticesLength(this.verticesLength);for(var u=this.mesh.getIndices(),h=this.indicesLength,d=0;d<r.length;h++,d++)u[h]=r[d]+i;this.indicesLength+=r.length,this.mesh.setIndicesLength(this.indicesLength)},a.prototype.flush=function(){var t=this.context.gl;this.verticesLength!=0&&(this.lastTexture.bind(),this.mesh.draw(this.shader,t.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++)},a.prototype.end=function(){var t=this.context.gl;if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=!1,t.disable(t.BLEND)},a.prototype.getDrawCalls=function(){return this.drawCalls},a.prototype.dispose=function(){this.mesh.dispose()},a}();e.PolygonBatcher=v})(s.webgl||(s.webgl={}))})(B||(B={}));var B;(function(s){(function(e){var v=function(){function t(n,r,i){i===void 0&&(i=!0),this.twoColorTint=!1,this.activeRenderer=null,this.QUAD=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],this.QUAD_TRIANGLES=[0,1,2,2,3,0],this.WHITE=new s.Color(1,1,1,1),this.canvas=n,this.context=r instanceof e.ManagedWebGLRenderingContext?r:new e.ManagedWebGLRenderingContext(r),this.twoColorTint=i,this.camera=new e.OrthoCamera(n.width,n.height),this.batcherShader=i?e.Shader.newTwoColoredTextured(this.context):e.Shader.newColoredTextured(this.context),this.batcher=new e.PolygonBatcher(this.context,i),this.shapesShader=e.Shader.newColored(this.context),this.shapes=new e.ShapeRenderer(this.context),this.skeletonRenderer=new e.SkeletonRenderer(this.context,i),this.skeletonDebugRenderer=new e.SkeletonDebugRenderer(this.context)}return t.prototype.begin=function(){this.camera.update(),this.enableRenderer(this.batcher)},t.prototype.drawSkeleton=function(n,r,i,u){r===void 0&&(r=!1),i===void 0&&(i=-1),u===void 0&&(u=-1),this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=r,this.skeletonRenderer.draw(this.batcher,n,i,u)},t.prototype.drawSkeletonDebug=function(n,r,i){r===void 0&&(r=!1),i===void 0&&(i=null),this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=r,this.skeletonDebugRenderer.draw(this.shapes,n,i)},t.prototype.drawTexture=function(n,r,i,u,h,d){d===void 0&&(d=null),this.enableRenderer(this.batcher),d===null&&(d=this.WHITE);var c=this.QUAD,o=0;c[o++]=r,c[o++]=i,c[o++]=d.r,c[o++]=d.g,c[o++]=d.b,c[o++]=d.a,c[o++]=0,c[o++]=1,this.twoColorTint&&(c[o++]=0,c[o++]=0,c[o++]=0,c[o++]=0),c[o++]=r+u,c[o++]=i,c[o++]=d.r,c[o++]=d.g,c[o++]=d.b,c[o++]=d.a,c[o++]=1,c[o++]=1,this.twoColorTint&&(c[o++]=0,c[o++]=0,c[o++]=0,c[o++]=0),c[o++]=r+u,c[o++]=i+h,c[o++]=d.r,c[o++]=d.g,c[o++]=d.b,c[o++]=d.a,c[o++]=1,c[o++]=0,this.twoColorTint&&(c[o++]=0,c[o++]=0,c[o++]=0,c[o++]=0),c[o++]=r,c[o++]=i+h,c[o++]=d.r,c[o++]=d.g,c[o++]=d.b,c[o++]=d.a,c[o++]=0,c[o++]=0,this.twoColorTint&&(c[o++]=0,c[o++]=0,c[o++]=0,c[o++]=0),this.batcher.draw(n,c,this.QUAD_TRIANGLES)},t.prototype.drawTextureUV=function(n,r,i,u,h,d,c,o,l,p){p===void 0&&(p=null),this.enableRenderer(this.batcher),p===null&&(p=this.WHITE);var f=this.QUAD,m=0;f[m++]=r,f[m++]=i,f[m++]=p.r,f[m++]=p.g,f[m++]=p.b,f[m++]=p.a,f[m++]=d,f[m++]=c,this.twoColorTint&&(f[m++]=0,f[m++]=0,f[m++]=0,f[m++]=0),f[m++]=r+u,f[m++]=i,f[m++]=p.r,f[m++]=p.g,f[m++]=p.b,f[m++]=p.a,f[m++]=o,f[m++]=c,this.twoColorTint&&(f[m++]=0,f[m++]=0,f[m++]=0,f[m++]=0),f[m++]=r+u,f[m++]=i+h,f[m++]=p.r,f[m++]=p.g,f[m++]=p.b,f[m++]=p.a,f[m++]=o,f[m++]=l,this.twoColorTint&&(f[m++]=0,f[m++]=0,f[m++]=0,f[m++]=0),f[m++]=r,f[m++]=i+h,f[m++]=p.r,f[m++]=p.g,f[m++]=p.b,f[m++]=p.a,f[m++]=d,f[m++]=l,this.twoColorTint&&(f[m++]=0,f[m++]=0,f[m++]=0,f[m++]=0),this.batcher.draw(n,f,this.QUAD_TRIANGLES)},t.prototype.drawTextureRotated=function(n,r,i,u,h,d,c,o,l,p){l===void 0&&(l=null),this.enableRenderer(this.batcher),l===null&&(l=this.WHITE);var f=this.QUAD,m=r+d,C=i+c,y=-d,w=-c,T=u-d,S=h-c,x=y,M=w,A=y,P=S,R=T,D=S,I=T,V=w,N=0,L=0,g=0,E=0,F=0,_=0,G=0,Y=0;if(o!=0){var Z=s.MathUtils.cosDeg(o),W=s.MathUtils.sinDeg(o);N=Z*x-W*M,L=W*x+Z*M,G=Z*A-W*P,Y=W*A+Z*P,F=Z*R-W*D,_=W*R+Z*D,g=F+(N-G),E=_+(L-Y)}else N=x,L=M,G=A,Y=P,F=R,_=D,g=I,E=V;N+=m,L+=C,g+=m,E+=C,F+=m,_+=C,G+=m,Y+=C;var U=0;f[U++]=N,f[U++]=L,f[U++]=l.r,f[U++]=l.g,f[U++]=l.b,f[U++]=l.a,f[U++]=0,f[U++]=1,this.twoColorTint&&(f[U++]=0,f[U++]=0,f[U++]=0,f[U++]=0),f[U++]=g,f[U++]=E,f[U++]=l.r,f[U++]=l.g,f[U++]=l.b,f[U++]=l.a,f[U++]=1,f[U++]=1,this.twoColorTint&&(f[U++]=0,f[U++]=0,f[U++]=0,f[U++]=0),f[U++]=F,f[U++]=_,f[U++]=l.r,f[U++]=l.g,f[U++]=l.b,f[U++]=l.a,f[U++]=1,f[U++]=0,this.twoColorTint&&(f[U++]=0,f[U++]=0,f[U++]=0,f[U++]=0),f[U++]=G,f[U++]=Y,f[U++]=l.r,f[U++]=l.g,f[U++]=l.b,f[U++]=l.a,f[U++]=0,f[U++]=0,this.twoColorTint&&(f[U++]=0,f[U++]=0,f[U++]=0,f[U++]=0),this.batcher.draw(n,f,this.QUAD_TRIANGLES)},t.prototype.drawRegion=function(n,r,i,u,h,d,c){d===void 0&&(d=null),this.enableRenderer(this.batcher),d===null&&(d=this.WHITE);var o=this.QUAD,l=0;o[l++]=r,o[l++]=i,o[l++]=d.r,o[l++]=d.g,o[l++]=d.b,o[l++]=d.a,o[l++]=n.u,o[l++]=n.v2,this.twoColorTint&&(o[l++]=0,o[l++]=0,o[l++]=0,o[l++]=0),o[l++]=r+u,o[l++]=i,o[l++]=d.r,o[l++]=d.g,o[l++]=d.b,o[l++]=d.a,o[l++]=n.u2,o[l++]=n.v2,this.twoColorTint&&(o[l++]=0,o[l++]=0,o[l++]=0,o[l++]=0),o[l++]=r+u,o[l++]=i+h,o[l++]=d.r,o[l++]=d.g,o[l++]=d.b,o[l++]=d.a,o[l++]=n.u2,o[l++]=n.v,this.twoColorTint&&(o[l++]=0,o[l++]=0,o[l++]=0,o[l++]=0),o[l++]=r,o[l++]=i+h,o[l++]=d.r,o[l++]=d.g,o[l++]=d.b,o[l++]=d.a,o[l++]=n.u,o[l++]=n.v,this.twoColorTint&&(o[l++]=0,o[l++]=0,o[l++]=0,o[l++]=0),this.batcher.draw(n.texture,o,this.QUAD_TRIANGLES)},t.prototype.line=function(n,r,i,u,h,d){h===void 0&&(h=null),this.enableRenderer(this.shapes),this.shapes.line(n,r,i,u,h)},t.prototype.triangle=function(n,r,i,u,h,d,c,o,l,p){o===void 0&&(o=null),l===void 0&&(l=null),p===void 0&&(p=null),this.enableRenderer(this.shapes),this.shapes.triangle(n,r,i,u,h,d,c,o,l,p)},t.prototype.quad=function(n,r,i,u,h,d,c,o,l,p,f,m,C){p===void 0&&(p=null),f===void 0&&(f=null),m===void 0&&(m=null),C===void 0&&(C=null),this.enableRenderer(this.shapes),this.shapes.quad(n,r,i,u,h,d,c,o,l,p,f,m,C)},t.prototype.rect=function(n,r,i,u,h,d){d===void 0&&(d=null),this.enableRenderer(this.shapes),this.shapes.rect(n,r,i,u,h,d)},t.prototype.rectLine=function(n,r,i,u,h,d,c){c===void 0&&(c=null),this.enableRenderer(this.shapes),this.shapes.rectLine(n,r,i,u,h,d,c)},t.prototype.polygon=function(n,r,i,u){u===void 0&&(u=null),this.enableRenderer(this.shapes),this.shapes.polygon(n,r,i,u)},t.prototype.circle=function(n,r,i,u,h,d){h===void 0&&(h=null),d===void 0&&(d=0),this.enableRenderer(this.shapes),this.shapes.circle(n,r,i,u,h,d)},t.prototype.curve=function(n,r,i,u,h,d,c,o,l,p){p===void 0&&(p=null),this.enableRenderer(this.shapes),this.shapes.curve(n,r,i,u,h,d,c,o,l,p)},t.prototype.end=function(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null},t.prototype.resize=function(n){var r=this.canvas,i=r.clientWidth,u=r.clientHeight;let h=window.devicePixelRatio<=2?2:Math.ceil(window.devicePixelRatio);if((r.width!=i*h||r.height!=u*h)&&(r.width=i*h,r.height=u*h),this.context.gl.viewport(0,0,r.width,r.height),n!==a.Stretch){if(n===a.Expand)this.camera.setViewport(r.width,r.height);else if(n===a.Fit){var d=r.width,c=r.height,o=this.camera.viewportWidth,l=this.camera.viewportHeight,p=l/o,f=c/d,m=p<f?o/d:l/c;this.camera.viewportWidth=d*m,this.camera.viewportHeight=c*m}}this.camera.update()},t.prototype.enableRenderer=function(n){this.activeRenderer!==n&&(this.end(),n instanceof e.PolygonBatcher?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(e.Shader.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):n instanceof e.ShapeRenderer?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(e.Shader.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer)},t.prototype.dispose=function(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose()},t}();e.SceneRenderer=v;var a;(function(t){t[t.Stretch=0]="Stretch",t[t.Expand=1]="Expand",t[t.Fit=2]="Fit"})(a=e.ResizeMode||(e.ResizeMode={}))})(s.webgl||(s.webgl={}))})(B||(B={}));var B;(function(s){(function(e){var v=function(){function a(t,n,r){this.vertexShader=n,this.fragmentShader=r,this.vs=null,this.fs=null,this.program=null,this.tmp2x2=new Float32Array(4),this.tmp3x3=new Float32Array(9),this.tmp4x4=new Float32Array(16),this.vsSource=n,this.fsSource=r,this.context=t instanceof e.ManagedWebGLRenderingContext?t:new e.ManagedWebGLRenderingContext(t),this.context.addRestorable(this),this.compile()}return a.prototype.getProgram=function(){return this.program},a.prototype.getVertexShader=function(){return this.vertexShader},a.prototype.getFragmentShader=function(){return this.fragmentShader},a.prototype.getVertexShaderSource=function(){return this.vsSource},a.prototype.getFragmentSource=function(){return this.fsSource},a.prototype.compile=function(){var t=this.context.gl;try{this.vs=this.compileShader(t.VERTEX_SHADER,this.vertexShader),this.fs=this.compileShader(t.FRAGMENT_SHADER,this.fragmentShader),this.program=this.compileProgram(this.vs,this.fs)}catch(n){throw this.dispose(),n}},a.prototype.compileShader=function(t,n){var r=this.context.gl,i=r.createShader(t);if(r.shaderSource(i,n),r.compileShader(i),!r.getShaderParameter(i,r.COMPILE_STATUS)){var u="Couldn't compile shader: "+r.getShaderInfoLog(i);if(r.deleteShader(i),!r.isContextLost())throw new Error(u)}return i},a.prototype.compileProgram=function(t,n){var r=this.context.gl,i=r.createProgram();if(r.attachShader(i,t),r.attachShader(i,n),r.linkProgram(i),!r.getProgramParameter(i,r.LINK_STATUS)){var u="Couldn't compile shader program: "+r.getProgramInfoLog(i);if(r.deleteProgram(i),!r.isContextLost())throw new Error(u)}return i},a.prototype.restore=function(){this.compile()},a.prototype.bind=function(){this.context.gl.useProgram(this.program)},a.prototype.unbind=function(){this.context.gl.useProgram(null)},a.prototype.setUniformi=function(t,n){this.context.gl.uniform1i(this.getUniformLocation(t),n)},a.prototype.setUniformf=function(t,n){this.context.gl.uniform1f(this.getUniformLocation(t),n)},a.prototype.setUniform2f=function(t,n,r){this.context.gl.uniform2f(this.getUniformLocation(t),n,r)},a.prototype.setUniform3f=function(t,n,r,i){this.context.gl.uniform3f(this.getUniformLocation(t),n,r,i)},a.prototype.setUniform4f=function(t,n,r,i,u){this.context.gl.uniform4f(this.getUniformLocation(t),n,r,i,u)},a.prototype.setUniform2x2f=function(t,n){var r=this.context.gl;this.tmp2x2.set(n),r.uniformMatrix2fv(this.getUniformLocation(t),!1,this.tmp2x2)},a.prototype.setUniform3x3f=function(t,n){var r=this.context.gl;this.tmp3x3.set(n),r.uniformMatrix3fv(this.getUniformLocation(t),!1,this.tmp3x3)},a.prototype.setUniform4x4f=function(t,n){var r=this.context.gl;this.tmp4x4.set(n),r.uniformMatrix4fv(this.getUniformLocation(t),!1,this.tmp4x4)},a.prototype.getUniformLocation=function(t){var n=this.context.gl,r=n.getUniformLocation(this.program,t);if(!r&&!n.isContextLost())throw new Error("Couldn't find location for uniform ".concat(t));return r},a.prototype.getAttributeLocation=function(t){var n=this.context.gl,r=n.getAttribLocation(this.program,t);if(r==-1&&!n.isContextLost())throw new Error("Couldn't find location for attribute ".concat(t));return r},a.prototype.dispose=function(){this.context.removeRestorable(this);var t=this.context.gl;this.vs&&(t.deleteShader(this.vs),this.vs=null),this.fs&&(t.deleteShader(this.fs),this.fs=null),this.program&&(t.deleteProgram(this.program),this.program=null)},a.newColoredTextured=function(t){var n=`
				attribute vec4 `.concat(a.POSITION,`;
				attribute vec4 `).concat(a.COLOR,`;
				attribute vec2 `).concat(a.TEXCOORDS,`;
				uniform mat4 `).concat(a.MVP_MATRIX,`;
				varying vec4 v_color;
				varying vec2 v_texCoords;

				void main () {
					v_color = `).concat(a.COLOR,`;
					v_texCoords = `).concat(a.TEXCOORDS,`;
					gl_Position = `).concat(a.MVP_MATRIX," * ").concat(a.POSITION,`;
				}
			`),r=`
				#ifdef GL_ES
					#define LOWP lowp
					precision mediump float;
				#else
					#define LOWP
				#endif
				varying LOWP vec4 v_color;
				varying vec2 v_texCoords;
				uniform sampler2D u_texture;

				void main () {
					gl_FragColor = v_color * texture2D(u_texture, v_texCoords);
				}
			`;return new a(t,n,r)},a.newTwoColoredTextured=function(t){var n=`
				attribute vec4 `.concat(a.POSITION,`;
				attribute vec4 `).concat(a.COLOR,`;
				attribute vec4 `).concat(a.COLOR2,`;
				attribute vec2 `).concat(a.TEXCOORDS,`;
				uniform mat4 `).concat(a.MVP_MATRIX,`;
				varying vec4 v_light;
				varying vec4 v_dark;
				varying vec2 v_texCoords;

				void main () {
					v_light = `).concat(a.COLOR,`;
					v_dark = `).concat(a.COLOR2,`;
					v_texCoords = `).concat(a.TEXCOORDS,`;
					gl_Position = `).concat(a.MVP_MATRIX," * ").concat(a.POSITION,`;
				}
			`),r=`
				#ifdef GL_ES
					#define LOWP lowp
					precision mediump float;
				#else
					#define LOWP
				#endif
				varying LOWP vec4 v_light;
				varying LOWP vec4 v_dark;
				varying vec2 v_texCoords;
				uniform sampler2D u_texture;

				void main () {
					vec4 texColor = texture2D(u_texture, v_texCoords);
					gl_FragColor.a = texColor.a * v_light.a;
					gl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;
				}
			`;return new a(t,n,r)},a.newColored=function(t){var n=`
				attribute vec4 `.concat(a.POSITION,`;
				attribute vec4 `).concat(a.COLOR,`;
				uniform mat4 `).concat(a.MVP_MATRIX,`;
				varying vec4 v_color;

				void main () {
					v_color = `).concat(a.COLOR,`;
					gl_Position = `).concat(a.MVP_MATRIX," * ").concat(a.POSITION,`;
				}
			`),r=`
				#ifdef GL_ES
					#define LOWP lowp
					precision mediump float;
				#else
					#define LOWP
				#endif
				varying LOWP vec4 v_color;

				void main () {
					gl_FragColor = v_color;
				}
			`;return new a(t,n,r)},a.MVP_MATRIX="u_projTrans",a.POSITION="a_position",a.COLOR="a_color",a.COLOR2="a_color2",a.TEXCOORDS="a_texCoords",a.SAMPLER="u_texture",a}();e.Shader=v})(s.webgl||(s.webgl={}))})(B||(B={}));var B;(function(s){(function(e){var v=function(){function t(n,r){if(r===void 0&&(r=10920),this.isDrawing=!1,this.shapeType=a.Filled,this.color=new s.Color(1,1,1,1),this.vertexIndex=0,this.tmp=new s.Vector2,r>10920)throw new Error("Can't have more than 10920 triangles per batch: "+r);this.context=n instanceof e.ManagedWebGLRenderingContext?n:new e.ManagedWebGLRenderingContext(n),this.mesh=new e.Mesh(n,[new e.Position2Attribute,new e.ColorAttribute],r,0),this.srcBlend=this.context.gl.SRC_ALPHA,this.dstBlend=this.context.gl.ONE_MINUS_SRC_ALPHA}return t.prototype.begin=function(n){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=n,this.vertexIndex=0,this.isDrawing=!0;var r=this.context.gl;r.enable(r.BLEND),r.blendFunc(this.srcBlend,this.dstBlend)},t.prototype.setBlendMode=function(n,r){var i=this.context.gl;this.srcBlend=n,this.dstBlend=r,this.isDrawing&&(this.flush(),i.blendFunc(this.srcBlend,this.dstBlend))},t.prototype.setColor=function(n){this.color.setFromColor(n)},t.prototype.setColorWith=function(n,r,i,u){this.color.set(n,r,i,u)},t.prototype.point=function(n,r,i){i===void 0&&(i=null),this.check(a.Point,1),i===null&&(i=this.color),this.vertex(n,r,i)},t.prototype.line=function(n,r,i,u,h){h===void 0&&(h=null),this.check(a.Line,2),this.mesh.getVertices(),this.vertexIndex,h===null&&(h=this.color),this.vertex(n,r,h),this.vertex(i,u,h)},t.prototype.triangle=function(n,r,i,u,h,d,c,o,l,p){o===void 0&&(o=null),l===void 0&&(l=null),p===void 0&&(p=null),this.check(n?a.Filled:a.Line,3),this.mesh.getVertices(),this.vertexIndex,o===null&&(o=this.color),l===null&&(l=this.color),p===null&&(p=this.color),n?(this.vertex(r,i,o),this.vertex(u,h,l),this.vertex(d,c,p)):(this.vertex(r,i,o),this.vertex(u,h,l),this.vertex(u,h,o),this.vertex(d,c,l),this.vertex(d,c,o),this.vertex(r,i,l))},t.prototype.quad=function(n,r,i,u,h,d,c,o,l,p,f,m,C){p===void 0&&(p=null),f===void 0&&(f=null),m===void 0&&(m=null),C===void 0&&(C=null),this.check(n?a.Filled:a.Line,3),this.mesh.getVertices(),this.vertexIndex,p===null&&(p=this.color),f===null&&(f=this.color),m===null&&(m=this.color),C===null&&(C=this.color),n?(this.vertex(r,i,p),this.vertex(u,h,f),this.vertex(d,c,m),this.vertex(d,c,m),this.vertex(o,l,C),this.vertex(r,i,p)):(this.vertex(r,i,p),this.vertex(u,h,f),this.vertex(u,h,f),this.vertex(d,c,m),this.vertex(d,c,m),this.vertex(o,l,C),this.vertex(o,l,C),this.vertex(r,i,p))},t.prototype.rect=function(n,r,i,u,h,d){d===void 0&&(d=null),this.quad(n,r,i,r+u,i,r+u,i+h,r,i+h,d,d,d,d)},t.prototype.rectLine=function(n,r,i,u,h,d,c){c===void 0&&(c=null),this.check(n?a.Filled:a.Line,8),c===null&&(c=this.color);var o=this.tmp.set(h-i,r-u);o.normalize(),d*=.5;var l=o.x*d,p=o.y*d;n?(this.vertex(r+l,i+p,c),this.vertex(r-l,i-p,c),this.vertex(u+l,h+p,c),this.vertex(u-l,h-p,c),this.vertex(u+l,h+p,c),this.vertex(r-l,i-p,c)):(this.vertex(r+l,i+p,c),this.vertex(r-l,i-p,c),this.vertex(u+l,h+p,c),this.vertex(u-l,h-p,c),this.vertex(u+l,h+p,c),this.vertex(r+l,i+p,c),this.vertex(u-l,h-p,c),this.vertex(r-l,i-p,c))},t.prototype.x=function(n,r,i){this.line(n-i,r-i,n+i,r+i),this.line(n-i,r+i,n+i,r-i)},t.prototype.polygon=function(n,r,i,u){if(u===void 0&&(u=null),i<3)throw new Error("Polygon must contain at least 3 vertices");this.check(a.Line,i*2),u===null&&(u=this.color),this.mesh.getVertices(),this.vertexIndex,r<<=1,i<<=1;for(var h=n[r],d=n[r+1],c=r+i,o=r,l=r+i-2;o<l;o+=2){var p=n[o],f=n[o+1],m=0,C=0;o+2>=c?(m=h,C=d):(m=n[o+2],C=n[o+3]),this.vertex(p,f,u),this.vertex(m,C,u)}},t.prototype.circle=function(n,r,i,u,h,d){if(h===void 0&&(h=null),d===void 0&&(d=0),d===0&&(d=Math.max(1,6*s.MathUtils.cbrt(u)|0)),d<=0)throw new Error("segments must be > 0.");h===null&&(h=this.color);var c=2*s.MathUtils.PI/d,o=Math.cos(c),l=Math.sin(c),p=u,f=0;if(n){this.check(a.Filled,d*3+3),d--;for(var m=0;m<d;m++){this.vertex(r,i,h),this.vertex(r+p,i+f,h);var y=p;p=o*p-l*f,f=l*y+o*f,this.vertex(r+p,i+f,h)}this.vertex(r,i,h),this.vertex(r+p,i+f,h)}else{this.check(a.Line,d*2+2);for(var m=0;m<d;m++){this.vertex(r+p,i+f,h);var C=p;p=o*p-l*f,f=l*C+o*f,this.vertex(r+p,i+f,h)}this.vertex(r+p,i+f,h)}p=u,f=0,this.vertex(r+p,i+f,h)},t.prototype.curve=function(n,r,i,u,h,d,c,o,l,p){p===void 0&&(p=null),this.check(a.Line,l*2+2),p===null&&(p=this.color);for(var f=1/l,m=f*f,C=f*f*f,y=3*f,w=3*m,T=6*m,S=6*C,x=n-i*2+h,M=r-u*2+d,A=(i-h)*3-n+c,P=(u-d)*3-r+o,R=n,D=r,I=(i-n)*y+x*w+A*C,V=(u-r)*y+M*w+P*C,N=x*T+A*S,L=M*T+P*S,g=A*S,E=P*S;l-- >0;)this.vertex(R,D,p),R+=I,D+=V,I+=N,V+=L,N+=g,L+=E,this.vertex(R,D,p);this.vertex(R,D,p),this.vertex(c,o,p)},t.prototype.vertex=function(n,r,i){var u=this.vertexIndex,h=this.mesh.getVertices();h[u++]=n,h[u++]=r,h[u++]=i.r,h[u++]=i.g,h[u++]=i.b,h[u++]=i.a,this.vertexIndex=u},t.prototype.end=function(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush(),this.context.gl.disable(this.context.gl.BLEND),this.isDrawing=!1},t.prototype.flush=function(){this.vertexIndex!=0&&(this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0)},t.prototype.check=function(n,r){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType==n)if(this.mesh.maxVertices()-this.mesh.numVertices()<r)this.flush();else return;else this.flush(),this.shapeType=n},t.prototype.dispose=function(){this.mesh.dispose()},t}();e.ShapeRenderer=v;var a;(function(t){t[t.Point=0]="Point",t[t.Line=1]="Line",t[t.Filled=4]="Filled"})(a=e.ShapeType||(e.ShapeType={}))})(s.webgl||(s.webgl={}))})(B||(B={}));var B;(function(s){(function(e){var v=function(){function a(t){this.boneLineColor=new s.Color(1,0,0,1),this.boneOriginColor=new s.Color(0,1,0,1),this.attachmentLineColor=new s.Color(0,0,1,.5),this.triangleLineColor=new s.Color(1,.64,0,.5),this.pathColor=new s.Color().setFromString("FF7F00"),this.clipColor=new s.Color(.8,0,0,2),this.aabbColor=new s.Color(0,1,0,.5),this.drawBones=!0,this.drawRegionAttachments=!0,this.drawBoundingBoxes=!0,this.drawMeshHull=!0,this.drawMeshTriangles=!0,this.drawPaths=!0,this.drawSkeletonXY=!1,this.drawClipping=!0,this.premultipliedAlpha=!1,this.scale=1,this.boneWidth=2,this.bounds=new s.SkeletonBounds,this.temp=new Array,this.vertices=s.Utils.newFloatArray(2048),this.context=t instanceof e.ManagedWebGLRenderingContext?t:new e.ManagedWebGLRenderingContext(t)}return a.prototype.draw=function(t,n,r){r===void 0&&(r=null);var i=n.x,u=n.y,h=this.context.gl,d=this.premultipliedAlpha?h.ONE:h.SRC_ALPHA;t.setBlendMode(d,h.ONE_MINUS_SRC_ALPHA);var c=n.bones;if(this.drawBones){t.setColor(this.boneLineColor);for(var o=0,l=c.length;o<l;o++){var p=c[o];if(!(r&&r.indexOf(p.data.name)>-1)&&p.parent!=null){var f=i+p.data.length*p.a+p.worldX,m=u+p.data.length*p.c+p.worldY;t.rectLine(!0,i+p.worldX,u+p.worldY,f,m,this.boneWidth*this.scale)}}this.drawSkeletonXY&&t.x(i,u,4*this.scale)}if(this.drawRegionAttachments){t.setColor(this.attachmentLineColor);for(var C=n.slots,o=0,l=C.length;o<l;o++){var y=C[o],w=y.getAttachment();if(w instanceof s.RegionAttachment){var T=w,S=this.vertices;T.computeWorldVertices(y.bone,S,0,2),t.line(S[0],S[1],S[2],S[3]),t.line(S[2],S[3],S[4],S[5]),t.line(S[4],S[5],S[6],S[7]),t.line(S[6],S[7],S[0],S[1])}}}if(this.drawMeshHull||this.drawMeshTriangles)for(var C=n.slots,o=0,l=C.length;o<l;o++){var y=C[o];if(y.bone.active){var w=y.getAttachment();if(w instanceof s.MeshAttachment){var x=w,S=this.vertices;x.computeWorldVertices(y,0,x.worldVerticesLength,S,0,2);var M=x.triangles,A=x.hullLength;if(this.drawMeshTriangles){t.setColor(this.triangleLineColor);for(var P=0,R=M.length;P<R;P+=3){var D=M[P]*2,I=M[P+1]*2,V=M[P+2]*2;t.triangle(!1,S[D],S[D+1],S[I],S[I+1],S[V],S[V+1])}}if(this.drawMeshHull&&A>0){t.setColor(this.attachmentLineColor),A=(A>>1)*2;for(var N=S[A-2],L=S[A-1],P=0,R=A;P<R;P+=2){var f=S[P],m=S[P+1];t.line(f,m,N,L),N=f,L=m}}}}}if(this.drawBoundingBoxes){var g=this.bounds;g.update(n,!0),t.setColor(this.aabbColor),t.rect(!1,g.minX,g.minY,g.getWidth(),g.getHeight());for(var E=g.polygons,F=g.boundingBoxes,o=0,l=E.length;o<l;o++){var _=E[o];t.setColor(F[o].color),t.polygon(_,0,_.length)}}if(this.drawPaths)for(var C=n.slots,o=0,l=C.length;o<l;o++){var y=C[o];if(y.bone.active){var w=y.getAttachment();if(w instanceof s.PathAttachment){var G=w,R=G.worldVerticesLength,Y=this.temp=s.Utils.setArraySize(this.temp,R,0);G.computeWorldVertices(y,0,R,Y,0,2);var Z=this.pathColor,W=Y[2],U=Y[3],O=0,k=0;if(G.closed){t.setColor(Z);var z=Y[0],j=Y[1],H=Y[R-2],q=Y[R-1];O=Y[R-4],k=Y[R-3],t.curve(W,U,z,j,H,q,O,k,32),t.setColor(a.LIGHT_GRAY),t.line(W,U,z,j),t.line(O,k,H,q)}R-=4;for(var P=4;P<R;P+=6){var z=Y[P],j=Y[P+1],H=Y[P+2],q=Y[P+3];O=Y[P+4],k=Y[P+5],t.setColor(Z),t.curve(W,U,z,j,H,q,O,k,32),t.setColor(a.LIGHT_GRAY),t.line(W,U,z,j),t.line(O,k,H,q),W=O,U=k}}}}if(this.drawBones){t.setColor(this.boneOriginColor);for(var o=0,l=c.length;o<l;o++){var p=c[o];r&&r.indexOf(p.data.name)>-1||t.circle(!0,i+p.worldX,u+p.worldY,3*this.scale,a.GREEN,8)}}if(this.drawClipping){var C=n.slots;t.setColor(this.clipColor);for(var o=0,l=C.length;o<l;o++){var y=C[o];if(y.bone.active){var w=y.getAttachment();if(w instanceof s.ClippingAttachment){var Q=w,R=Q.worldVerticesLength,Y=this.temp=s.Utils.setArraySize(this.temp,R,0);Q.computeWorldVertices(y,0,R,Y,0,2);for(var rt=0,K=Y.length;rt<K;rt+=2){var f=Y[rt],m=Y[rt+1],O=Y[(rt+2)%Y.length],k=Y[(rt+3)%Y.length];t.line(f,m,O,k)}}}}}},a.prototype.dispose=function(){},a.LIGHT_GRAY=new s.Color(.7529411764705882,.7529411764705882,.7529411764705882,1),a.GREEN=new s.Color(0,1,0,1),a}();e.SkeletonDebugRenderer=v})(s.webgl||(s.webgl={}))})(B||(B={}));var B;(function(s){(function(e){var v=function(){function t(n,r,i){this.vertices=n,this.numVertices=r,this.numFloats=i}return t}(),a=function(){function t(n,r){r===void 0&&(r=!0),this.premultipliedAlpha=!1,this.vertexEffect=null,this.tempColor=new s.Color,this.tempColor2=new s.Color,this.vertexSize=8,this.twoColorTint=!1,this.renderable=new v(null,0,0),this.clipper=new s.SkeletonClipping,this.temp=new s.Vector2,this.temp2=new s.Vector2,this.temp3=new s.Color,this.temp4=new s.Color,this.twoColorTint=r,r&&(this.vertexSize+=4),this.vertices=s.Utils.newFloatArray(this.vertexSize*1024)}return t.prototype.draw=function(n,r,i,u){i===void 0&&(i=-1),u===void 0&&(u=-1);var h=this.clipper,d=this.premultipliedAlpha,c=this.twoColorTint,o=null,l=this.temp,p=this.temp2,f=this.temp3,m=this.temp4,C=this.renderable,y=null,w=null,T=r.drawOrder,S=null,x=r.color,M=c?12:8,A=!1;i==-1&&(A=!0);for(var P=0,R=T.length;P<R;P++){var D=h.isClipping()?2:M,I=T[P];if(!I.bone.active){h.clipEndWithSlot(I);continue}if(i>=0&&i==I.data.index&&(A=!0),!A){h.clipEndWithSlot(I);continue}u>=0&&u==I.data.index&&(A=!1);var V=I.getAttachment(),N=null;if(V instanceof s.RegionAttachment){var L=V;C.vertices=this.vertices,C.numVertices=4,C.numFloats=D<<2,L.computeWorldVertices(I.bone,C.vertices,0,D),w=t.QUAD_TRIANGLES,y=L.uvs,N=L.region.renderObject.texture,S=L.color}else if(V instanceof s.MeshAttachment){var g=V;C.vertices=this.vertices,C.numVertices=g.worldVerticesLength>>1,C.numFloats=C.numVertices*D,C.numFloats>C.vertices.length&&(C.vertices=this.vertices=s.Utils.newFloatArray(C.numFloats)),g.computeWorldVertices(I,0,g.worldVerticesLength,C.vertices,0,D),w=g.triangles,N=g.region.renderObject.texture,y=g.uvs,S=g.color}else if(V instanceof s.ClippingAttachment){var E=V;h.clipStart(I,E);continue}else{h.clipEndWithSlot(I);continue}if(N!=null){var F=I.color,_=this.tempColor;_.r=x.r*F.r*S.r,_.g=x.g*F.g*S.g,_.b=x.b*F.b*S.b,_.a=x.a*F.a*S.a,d&&(_.r*=_.a,_.g*=_.a,_.b*=_.a);var G=this.tempColor2;I.darkColor==null?G.set(0,0,0,1):(d?(G.r=I.darkColor.r*_.a,G.g=I.darkColor.g*_.a,G.b=I.darkColor.b*_.a):G.setFromColor(I.darkColor),G.a=d?1:0);var Y=I.data.blendMode;if(Y!=o&&(o=Y,n.setBlendMode(e.WebGLBlendModeConverter.getSourceGLBlendMode(o,d),e.WebGLBlendModeConverter.getDestGLBlendMode(o))),h.isClipping()){h.clipTriangles(C.vertices,C.numFloats,w,w.length,y,_,G,c);var Z=new Float32Array(h.clippedVertices),W=h.clippedTriangles;if(this.vertexEffect!=null){var U=this.vertexEffect,O=Z;if(c)for(var k=0,j=Z.length;k<j;k+=M)l.x=O[k],l.y=O[k+1],f.set(O[k+2],O[k+3],O[k+4],O[k+5]),p.x=O[k+6],p.y=O[k+7],m.set(O[k+8],O[k+9],O[k+10],O[k+11]),U.transform(l,p,f,m),O[k]=l.x,O[k+1]=l.y,O[k+2]=f.r,O[k+3]=f.g,O[k+4]=f.b,O[k+5]=f.a,O[k+6]=p.x,O[k+7]=p.y,O[k+8]=m.r,O[k+9]=m.g,O[k+10]=m.b,O[k+11]=m.a;else for(var k=0,z=Z.length;k<z;k+=M)l.x=O[k],l.y=O[k+1],f.set(O[k+2],O[k+3],O[k+4],O[k+5]),p.x=O[k+6],p.y=O[k+7],m.set(0,0,0,0),U.transform(l,p,f,m),O[k]=l.x,O[k+1]=l.y,O[k+2]=f.r,O[k+3]=f.g,O[k+4]=f.b,O[k+5]=f.a,O[k+6]=p.x,O[k+7]=p.y}n.draw(N,Z,W)}else{var O=C.vertices;if(this.vertexEffect!=null){var U=this.vertexEffect;if(c)for(var k=0,H=0,Q=C.numFloats;k<Q;k+=M,H+=2)l.x=O[k],l.y=O[k+1],p.x=y[H],p.y=y[H+1],f.setFromColor(_),m.setFromColor(G),U.transform(l,p,f,m),O[k]=l.x,O[k+1]=l.y,O[k+2]=f.r,O[k+3]=f.g,O[k+4]=f.b,O[k+5]=f.a,O[k+6]=p.x,O[k+7]=p.y,O[k+8]=m.r,O[k+9]=m.g,O[k+10]=m.b,O[k+11]=m.a;else for(var k=0,H=0,q=C.numFloats;k<q;k+=M,H+=2)l.x=O[k],l.y=O[k+1],p.x=y[H],p.y=y[H+1],f.setFromColor(_),m.set(0,0,0,0),U.transform(l,p,f,m),O[k]=l.x,O[k+1]=l.y,O[k+2]=f.r,O[k+3]=f.g,O[k+4]=f.b,O[k+5]=f.a,O[k+6]=p.x,O[k+7]=p.y}else if(c)for(var k=2,H=0,K=C.numFloats;k<K;k+=M,H+=2)O[k]=_.r,O[k+1]=_.g,O[k+2]=_.b,O[k+3]=_.a,O[k+4]=y[H],O[k+5]=y[H+1],O[k+6]=G.r,O[k+7]=G.g,O[k+8]=G.b,O[k+9]=G.a;else for(var k=2,H=0,rt=C.numFloats;k<rt;k+=M,H+=2)O[k]=_.r,O[k+1]=_.g,O[k+2]=_.b,O[k+3]=_.a,O[k+4]=y[H],O[k+5]=y[H+1];var ht=C.vertices.subarray(0,C.numFloats);n.draw(N,ht,w)}}h.clipEndWithSlot(I)}h.clipEnd()},t.QUAD_TRIANGLES=[0,1,2,2,3,0],t}();e.SkeletonRenderer=a})(s.webgl||(s.webgl={}))})(B||(B={}));var B;(function(s){(function(e){var v=function(){function a(t,n,r){t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=0),this.x=0,this.y=0,this.z=0,this.x=t,this.y=n,this.z=r}return a.prototype.setFrom=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},a.prototype.set=function(t,n,r){return this.x=t,this.y=n,this.z=r,this},a.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},a.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},a.prototype.scale=function(t){return this.x*=t,this.y*=t,this.z*=t,this},a.prototype.normalize=function(){var t=this.length();return t==0?this:(t=1/t,this.x*=t,this.y*=t,this.z*=t,this)},a.prototype.cross=function(t){return this.set(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},a.prototype.multiply=function(t){var n=t.values;return this.set(this.x*n[e.M00]+this.y*n[e.M01]+this.z*n[e.M02]+n[e.M03],this.x*n[e.M10]+this.y*n[e.M11]+this.z*n[e.M12]+n[e.M13],this.x*n[e.M20]+this.y*n[e.M21]+this.z*n[e.M22]+n[e.M23])},a.prototype.project=function(t){var n=t.values,r=1/(this.x*n[e.M30]+this.y*n[e.M31]+this.z*n[e.M32]+n[e.M33]);return this.set((this.x*n[e.M00]+this.y*n[e.M01]+this.z*n[e.M02]+n[e.M03])*r,(this.x*n[e.M10]+this.y*n[e.M11]+this.z*n[e.M12]+n[e.M13])*r,(this.x*n[e.M20]+this.y*n[e.M21]+this.z*n[e.M22]+n[e.M23])*r)},a.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},a.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},a.prototype.distance=function(t){var n=t.x-this.x,r=t.y-this.y,i=t.z-this.z;return Math.sqrt(n*n+r*r+i*i)},a}();e.Vector3=v})(s.webgl||(s.webgl={}))})(B||(B={}));var B;(function(s){(function(e){var v=function(){function t(n,r){r===void 0&&(r={alpha:"true"}),this.restorables=new Array,n instanceof WebGLRenderingContext||n instanceof WebGL2RenderingContext?(this.gl=n,this.canvas=this.gl.canvas):this.setupCanvas(n,r)}return t.prototype.setupCanvas=function(n,r){var i=this;this.gl=n.getContext("webgl2",r)||n.getContext("webgl",r),this.canvas=n,n.addEventListener("webglcontextlost",function(u){u&&u.preventDefault()}),n.addEventListener("webglcontextrestored",function(u){for(var h=0,d=i.restorables.length;h<d;h++)i.restorables[h].restore()})},t.prototype.addRestorable=function(n){this.restorables.push(n)},t.prototype.removeRestorable=function(n){var r=this.restorables.indexOf(n);r>-1&&this.restorables.splice(r,1)},t}();e.ManagedWebGLRenderingContext=v;var a=function(){function t(){}return t.getDestGLBlendMode=function(n){switch(n){case s.BlendMode.Normal:return t.ONE_MINUS_SRC_ALPHA;case s.BlendMode.Additive:return t.ONE;case s.BlendMode.Multiply:return t.ONE_MINUS_SRC_ALPHA;case s.BlendMode.Screen:return t.ONE_MINUS_SRC_ALPHA;default:throw new Error("Unknown blend mode: "+n)}},t.getSourceGLBlendMode=function(n,r){switch(r===void 0&&(r=!1),n){case s.BlendMode.Normal:return r?t.ONE:t.SRC_ALPHA;case s.BlendMode.Additive:return r?t.ONE:t.SRC_ALPHA;case s.BlendMode.Multiply:return t.DST_COLOR;case s.BlendMode.Screen:return t.ONE;default:throw new Error("Unknown blend mode: "+n)}},t.ZERO=0,t.ONE=1,t.SRC_COLOR=768,t.ONE_MINUS_SRC_COLOR=769,t.SRC_ALPHA=770,t.ONE_MINUS_SRC_ALPHA=771,t.DST_ALPHA=772,t.ONE_MINUS_DST_ALPHA=773,t.DST_COLOR=774,t}();e.WebGLBlendModeConverter=a})(s.webgl||(s.webgl={}))})(B||(B={}));var B;(function(s){var e=function(){function c(o,l,p){this.player=o,this.dom=u(`
				<div class="spine-player-popup spine-player-hidden">
				</div>
			`),this.dom.innerHTML=p,l.appendChild(this.dom)}return c.prototype.show=function(o){var l=this;this.dom.classList.remove("spine-player-hidden");var p=!1,f=function(){p||requestAnimationFrame(f);var y=Math.abs(l.dom.getBoundingClientRect().bottom-l.player.getBoundingClientRect().bottom),w=Math.abs(l.dom.getBoundingClientRect().right-l.player.getBoundingClientRect().right),T=l.player.clientHeight-y-w;l.dom.style.maxHeight=T+"px"};requestAnimationFrame(f);var m=!0,C=function(y){if(m){m=!1;return}n(l.dom,y.target)||(l.dom.remove(),window.removeEventListener("click",C),o(),p=!0)};window.addEventListener("click",C)},c}(),v=function(){function c(o){this.text=o,this.enabled=!1}return c.prototype.render=function(){var o=this;return this.switch=u(`
				<div class="spine-player-switch">
					<span class="spine-player-switch-text">`.concat(this.text,`</span>
					<div class="spine-player-switch-knob-area">
						<div class="spine-player-switch-knob"></div>
					</div>
				</div>
			`)),this.switch.addEventListener("click",function(){o.setEnabled(!o.enabled),o.change&&o.change(o.enabled)}),this.switch},c.prototype.setEnabled=function(o){o?this.switch.classList.add("active"):this.switch.classList.remove("active"),this.enabled=o},c.prototype.isEnabled=function(){return this.enabled},c}(),a=function(){function c(o,l,p){o===void 0&&(o=0),l===void 0&&(l=.1),p===void 0&&(p=!1),this.snaps=o,this.snapPercentage=l,this.big=p}return c.prototype.render=function(){var o=this;this.slider=u(`
				<div class="spine-player-slider `.concat(this.big?"big":"",`">
					<div class="spine-player-slider-value"></div>
					<!--<div class="spine-player-slider-knob"></div>-->
				</div>
			`)),this.value=i(this.slider,"spine-player-slider-value")[0],this.setValue(0);var l=new s.webgl.Input(this.slider),p=!1;return l.addListener({down:function(f,m){p=!0,o.value.classList.add("hovering")},up:function(f,m){p=!1;var C=f/o.slider.clientWidth;C=C=Math.max(0,Math.min(C,1)),o.setValue(f/o.slider.clientWidth),o.change&&o.change(C),o.value.classList.remove("hovering")},moved:function(f,m){if(p){var C=f/o.slider.clientWidth;C=Math.max(0,Math.min(C,1)),C=o.setValue(f/o.slider.clientWidth),o.change&&o.change(C)}},dragged:function(f,m){var C=f/o.slider.clientWidth;C=Math.max(0,Math.min(C,1)),C=o.setValue(f/o.slider.clientWidth),o.change&&o.change(C)}}),this.slider},c.prototype.setValue=function(o){if(o=Math.max(0,Math.min(1,o)),this.snaps>0){var l=o%(1/this.snaps);l<1/this.snaps*this.snapPercentage?o=o-l:l>1/this.snaps-1/this.snaps*this.snapPercentage&&(o=o-l+1/this.snaps),o=Math.max(0,Math.min(1,o))}return this.value.style.width=""+o*100+"%",o},c}(),t=function(){function c(o,l){this.config=l,this.paused=!0,this.playTime=0,this.speed=1,this.time=new s.TimeKeeper,this.animationViewports={},this.currentViewport=null,this.previousViewport=null,this.viewportTransitionStart=0,this.stopRequestAnimationFrame=!1,this.cancelId=0,typeof o=="string"?this.parent=document.getElementById(o):this.parent=o,this.parent.appendChild(this.render())}return c.prototype.validateConfig=function(o){if(!o)throw new Error("Please pass a configuration to new.spine.SpinePlayer().");if(!o.jsonUrl&&!o.skelUrl)throw new Error("Please specify the URL of the skeleton JSON or .skel file.");if(!o.atlasUrl)throw new Error("Please specify the URL of the atlas file.");if(o.alpha||(o.alpha=!1),o.backgroundColor||(o.backgroundColor="#000000"),o.fullScreenBackgroundColor||(o.fullScreenBackgroundColor=o.backgroundColor),typeof o.premultipliedAlpha>"u"&&(o.premultipliedAlpha=!0),o.success||(o.success=function(l){}),o.error||(o.error=function(l,p){}),o.debug||(o.debug={bones:!1,regions:!1,meshes:!1,bounds:!1,clipping:!1,paths:!1,points:!1,hulls:!1}),typeof o.debug.bones>"u"&&(o.debug.bones=!1),typeof o.debug.bounds>"u"&&(o.debug.bounds=!1),typeof o.debug.clipping>"u"&&(o.debug.clipping=!1),typeof o.debug.hulls>"u"&&(o.debug.hulls=!1),typeof o.debug.paths>"u"&&(o.debug.paths=!1),typeof o.debug.points>"u"&&(o.debug.points=!1),typeof o.debug.regions>"u"&&(o.debug.regions=!1),typeof o.debug.meshes>"u"&&(o.debug.meshes=!1),o.animations&&o.animation&&o.animations.indexOf(o.animation)<0)throw new Error("Default animation '"+o.animation+"' is not contained in the list of selectable animations "+d(JSON.stringify(this.config.animations))+".");if(o.skins&&o.skin&&o.skins.indexOf(o.skin)<0)throw new Error("Default skin '"+o.skin+"' is not contained in the list of selectable skins "+d(JSON.stringify(this.config.skins))+".");return o.controlBones||(o.controlBones=[]),typeof o.showControls>"u"&&(o.showControls=!0),typeof o.defaultMix>"u"&&(o.defaultMix=.25),o},c.prototype.showError=function(o){var l=i(this.dom,"spine-player-error")[0];l.classList.remove("spine-player-hidden"),l.innerHTML='<p style="text-align: center; align-self: center;">'.concat(o,"</p>"),this.config.error(this,o)},c.prototype.render=function(){var o=this,l=this.config,p=this.dom=u(`
				<div class="spine-player">
					<canvas class="spine-player-canvas"></canvas>
					<div class="spine-player-error spine-player-hidden"></div>
					<div class="spine-player-controls spine-player-popup-parent spine-player-controls-hidden">
						<div class="spine-player-timeline">
						</div>
						<div class="spine-player-buttons">
							<button id="spine-player-button-play-pause" class="spine-player-button spine-player-button-icon-pause"></button>
							<div class="spine-player-button-spacer"></div>
							<button id="spine-player-button-speed" class="spine-player-button spine-player-button-icon-speed"></button>
							<button id="spine-player-button-animation" class="spine-player-button spine-player-button-icon-animations"></button>
							<button id="spine-player-button-skin" class="spine-player-button spine-player-button-icon-skins"></button>
							<button id="spine-player-button-settings" class="spine-player-button spine-player-button-icon-settings"></button>
							<button id="spine-player-button-fullscreen" class="spine-player-button spine-player-button-icon-fullscreen"></button>
							<img id="spine-player-button-logo" class="spine-player-button-icon-spine-logo" src="data:image/svg+xml,%3Csvg%20id%3D%22Spine_Logo%22%20data-name%3D%22Spine%20Logo%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20104%2031.16%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill%3A%23fff%3B%7D.cls-2%7Bfill%3A%23ff4000%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Espine-logo-white%3C%2Ftitle%3E%3Cpath%20id%3D%22e%22%20class%3D%22cls-1%22%20d%3D%22M104%2C12.68a1.31%2C1.31%2C0%2C0%2C1-.37%2C1%2C1.28%2C1.28%2C0%2C0%2C1-.85.31H91.57a10.51%2C10.51%2C0%2C0%2C0%2C.29%2C2.55%2C4.92%2C4.92%2C0%2C0%2C0%2C1%2C2A4.27%2C4.27%2C0%2C0%2C0%2C94.5%2C19.8a6.89%2C6.89%2C0%2C0%2C0%2C2.6.44%2C10.66%2C10.66%2C0%2C0%2C0%2C2.17-.2%2C12.81%2C12.81%2C0%2C0%2C0%2C1.64-.44q.69-.25%2C1.14-.44a1.87%2C1.87%2C0%2C0%2C1%2C.68-.2A.44.44%2C0%2C0%2C1%2C103%2C19a.43.43%2C0%2C0%2C1%2C.16.2%2C1.38%2C1.38%2C0%2C0%2C1%2C.09.37%2C4.89%2C4.89%2C0%2C0%2C1%2C0%2C.58%2C4.14%2C4.14%2C0%2C0%2C1%2C0%2C.43v.32a.83.83%2C0%2C0%2C1-.09.26%2C1.1%2C1.1%2C0%2C0%2C1-.17.22%2C2.77%2C2.77%2C0%2C0%2C1-.61.34%2C8.94%2C8.94%2C0%2C0%2C1-1.32.46%2C18.54%2C18.54%2C0%2C0%2C1-1.88.41%2C13.78%2C13.78%2C0%2C0%2C1-2.28.18%2C10.55%2C10.55%2C0%2C0%2C1-3.68-.59%2C6.82%2C6.82%2C0%2C0%2C1-2.66-1.74%2C7.44%2C7.44%2C0%2C0%2C1-1.63-2.89%2C13.48%2C13.48%2C0%2C0%2C1-.55-4%2C12.76%2C12.76%2C0%2C0%2C1%2C.57-3.94%2C8.35%2C8.35%2C0%2C0%2C1%2C1.64-3%2C7.15%2C7.15%2C0%2C0%2C1%2C2.58-1.87%2C8.47%2C8.47%2C0%2C0%2C1%2C3.39-.65%2C8.19%2C8.19%2C0%2C0%2C1%2C3.41.64%2C6.46%2C6.46%2C0%2C0%2C1%2C2.32%2C1.73A7%2C7%2C0%2C0%2C1%2C103.59%2C9a11.17%2C11.17%2C0%2C0%2C1%2C.43%2C3.13Zm-3.14-.93a5.69%2C5.69%2C0%2C0%2C0-1.09-3.86%2C4.17%2C4.17%2C0%2C0%2C0-3.42-1.4%2C4.52%2C4.52%2C0%2C0%2C0-2%2C.44%2C4.41%2C4.41%2C0%2C0%2C0-1.47%2C1.15A5.29%2C5.29%2C0%2C0%2C0%2C92%2C9.75a7%2C7%2C0%2C0%2C0-.36%2C2Z%22%2F%3E%3Cpath%20id%3D%22n%22%20class%3D%22cls-1%22%20d%3D%22M80.68%2C21.94a.42.42%2C0%2C0%2C1-.08.26.59.59%2C0%2C0%2C1-.25.18%2C1.74%2C1.74%2C0%2C0%2C1-.47.11%2C6.31%2C6.31%2C0%2C0%2C1-.76%2C0%2C6.5%2C6.5%2C0%2C0%2C1-.78%2C0%2C1.74%2C1.74%2C0%2C0%2C1-.47-.11.59.59%2C0%2C0%2C1-.25-.18.42.42%2C0%2C0%2C1-.08-.26V12a9.8%2C9.8%2C0%2C0%2C0-.23-2.35%2C4.86%2C4.86%2C0%2C0%2C0-.66-1.53%2C2.88%2C2.88%2C0%2C0%2C0-1.13-1%2C3.57%2C3.57%2C0%2C0%2C0-1.6-.34%2C4%2C4%2C0%2C0%2C0-2.35.83A12.71%2C12.71%2C0%2C0%2C0%2C69.11%2C10v11.9a.42.42%2C0%2C0%2C1-.08.26.59.59%2C0%2C0%2C1-.25.18%2C1.74%2C1.74%2C0%2C0%2C1-.47.11%2C6.51%2C6.51%2C0%2C0%2C1-.78%2C0%2C6.31%2C6.31%2C0%2C0%2C1-.76%2C0%2C1.88%2C1.88%2C0%2C0%2C1-.48-.11.52.52%2C0%2C0%2C1-.25-.18.46.46%2C0%2C0%2C1-.07-.26v-17A.53.53%2C0%2C0%2C1%2C66%2C4.69a.5.5%2C0%2C0%2C1%2C.23-.19%2C1.28%2C1.28%2C0%2C0%2C1%2C.44-.11%2C8.53%2C8.53%2C0%2C0%2C1%2C1.39%2C0%2C1.12%2C1.12%2C0%2C0%2C1%2C.43.11.6.6%2C0%2C0%2C1%2C.22.19.47.47%2C0%2C0%2C1%2C.07.26V7.2a10.46%2C10.46%2C0%2C0%2C1%2C2.87-2.36%2C6.17%2C6.17%2C0%2C0%2C1%2C2.88-.75%2C6.41%2C6.41%2C0%2C0%2C1%2C2.87.58%2C5.16%2C5.16%2C0%2C0%2C1%2C1.88%2C1.54%2C6.15%2C6.15%2C0%2C0%2C1%2C1%2C2.26%2C13.46%2C13.46%2C0%2C0%2C1%2C.31%2C3.11Z%22%2F%3E%3Cg%20id%3D%22i%22%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M43.35%2C2.86c.09%2C2.6%2C1.89%2C4%2C5.48%2C4.61%2C3%2C.48%2C5.79.24%2C6.69-2.37%2C1.75-5.09-2.4-3.82-6-4.39S43.21-1.32%2C43.35%2C2.86Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M44.43%2C13.55c.33%2C1.94%2C2.14%2C3.06%2C4.91%2C3s4.84-1.16%2C5.13-3.25c.53-3.88-2.53-2.38-5.3-2.3S43.77%2C9.74%2C44.43%2C13.55Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M48%2C22.44c.55%2C1.45%2C2.06%2C2.06%2C4.1%2C1.63s3.45-1.11%2C3.33-2.76c-.21-3.06-2.22-2.1-4.26-1.66S47%2C19.6%2C48%2C22.44Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M49.78%2C29.22c.16%2C1.22%2C1.22%2C2%2C2.88%2C1.93s2.92-.67%2C3.13-2c.4-2.43-1.46-1.53-3.12-1.51S49.5%2C26.82%2C49.78%2C29.22Z%22%2F%3E%3C%2Fg%3E%3Cpath%20id%3D%22p%22%20class%3D%22cls-1%22%20d%3D%22M35.28%2C13.16a15.33%2C15.33%2C0%2C0%2C1-.48%2C4%2C8.75%2C8.75%2C0%2C0%2C1-1.42%2C3%2C6.35%2C6.35%2C0%2C0%2C1-2.32%2C1.91%2C7.14%2C7.14%2C0%2C0%2C1-3.16.67%2C6.1%2C6.1%2C0%2C0%2C1-1.4-.15%2C5.34%2C5.34%2C0%2C0%2C1-1.26-.47A7.29%2C7.29%2C0%2C0%2C1%2C24%2C21.31q-.61-.49-1.29-1.15v8.51a.47.47%2C0%2C0%2C1-.08.26.56.56%2C0%2C0%2C1-.25.19%2C1.74%2C1.74%2C0%2C0%2C1-.47.11%2C6.47%2C6.47%2C0%2C0%2C1-.78%2C0%2C6.26%2C6.26%2C0%2C0%2C1-.76%2C0%2C1.89%2C1.89%2C0%2C0%2C1-.48-.11.49.49%2C0%2C0%2C1-.25-.19.51.51%2C0%2C0%2C1-.07-.26V4.91a.57.57%2C0%2C0%2C1%2C.06-.27.46.46%2C0%2C0%2C1%2C.23-.18%2C1.47%2C1.47%2C0%2C0%2C1%2C.44-.1%2C7.41%2C7.41%2C0%2C0%2C1%2C1.3%2C0%2C1.45%2C1.45%2C0%2C0%2C1%2C.43.1.52.52%2C0%2C0%2C1%2C.24.18.51.51%2C0%2C0%2C1%2C.07.27V7.2a18.06%2C18.06%2C0%2C0%2C1%2C1.49-1.38%2C9%2C9%2C0%2C0%2C1%2C1.45-1%2C6.82%2C6.82%2C0%2C0%2C1%2C1.49-.59%2C7.09%2C7.09%2C0%2C0%2C1%2C4.78.52%2C6%2C6%2C0%2C0%2C1%2C2.13%2C2%2C8.79%2C8.79%2C0%2C0%2C1%2C1.2%2C2.9A15.72%2C15.72%2C0%2C0%2C1%2C35.28%2C13.16ZM32%2C13.52a15.64%2C15.64%2C0%2C0%2C0-.2-2.53%2C7.32%2C7.32%2C0%2C0%2C0-.69-2.17%2C4.06%2C4.06%2C0%2C0%2C0-1.3-1.51%2C3.49%2C3.49%2C0%2C0%2C0-2-.57%2C4.1%2C4.1%2C0%2C0%2C0-1.2.18%2C4.92%2C4.92%2C0%2C0%2C0-1.2.57%2C8.54%2C8.54%2C0%2C0%2C0-1.28%2C1A15.77%2C15.77%2C0%2C0%2C0%2C22.76%2C10v6.77a13.53%2C13.53%2C0%2C0%2C0%2C2.46%2C2.4%2C4.12%2C4.12%2C0%2C0%2C0%2C2.44.83%2C3.56%2C3.56%2C0%2C0%2C0%2C2-.57A4.28%2C4.28%2C0%2C0%2C0%2C31%2C18a7.58%2C7.58%2C0%2C0%2C0%2C.77-2.12A11.43%2C11.43%2C0%2C0%2C0%2C32%2C13.52Z%22%2F%3E%3Cpath%20id%3D%22s%22%20class%3D%22cls-1%22%20d%3D%22M12%2C17.3a5.39%2C5.39%2C0%2C0%2C1-.48%2C2.33%2C4.73%2C4.73%2C0%2C0%2C1-1.37%2C1.72%2C6.19%2C6.19%2C0%2C0%2C1-2.12%2C1.06%2C9.62%2C9.62%2C0%2C0%2C1-2.71.36%2C10.38%2C10.38%2C0%2C0%2C1-3.21-.5%2C7.63%2C7.63%2C0%2C0%2C1-1.11-.45%2C3.25%2C3.25%2C0%2C0%2C1-.66-.43%2C1.09%2C1.09%2C0%2C0%2C1-.3-.53A3.59%2C3.59%2C0%2C0%2C1%2C0%2C19.93a4.06%2C4.06%2C0%2C0%2C1%2C0-.61%2C2%2C2%2C0%2C0%2C1%2C.09-.4.42.42%2C0%2C0%2C1%2C.16-.22.43.43%2C0%2C0%2C1%2C.24-.07%2C1.35%2C1.35%2C0%2C0%2C1%2C.61.26q.41.26%2C1%2C.56A9.22%2C9.22%2C0%2C0%2C0%2C3.51%2C20a6.25%2C6.25%2C0%2C0%2C0%2C1.87.26%2C5.62%2C5.62%2C0%2C0%2C0%2C1.44-.17%2C3.48%2C3.48%2C0%2C0%2C0%2C1.12-.5%2C2.23%2C2.23%2C0%2C0%2C0%2C.73-.84%2C2.68%2C2.68%2C0%2C0%2C0%2C.26-1.21%2C2%2C2%2C0%2C0%2C0-.37-1.21%2C3.55%2C3.55%2C0%2C0%2C0-1-.87A8.09%2C8.09%2C0%2C0%2C0%2C6.2%2C14.8l-1.56-.61a16%2C16%2C0%2C0%2C1-1.57-.73%2C6%2C6%2C0%2C0%2C1-1.37-1%2C4.52%2C4.52%2C0%2C0%2C1-1-1.4%2C4.69%2C4.69%2C0%2C0%2C1-.37-2A4.88%2C4.88%2C0%2C0%2C1%2C.72%2C7.19%2C4.46%2C4.46%2C0%2C0%2C1%2C1.88%2C5.58%2C5.83%2C5.83%2C0%2C0%2C1%2C3.82%2C4.47%2C8.06%2C8.06%2C0%2C0%2C1%2C6.53%2C4a8.28%2C8.28%2C0%2C0%2C1%2C1.36.11%2C9.36%2C9.36%2C0%2C0%2C1%2C1.23.28%2C5.92%2C5.92%2C0%2C0%2C1%2C.94.37%2C4.09%2C4.09%2C0%2C0%2C1%2C.59.35%2C1%2C1%2C0%2C0%2C1%2C.26.26.83.83%2C0%2C0%2C1%2C.09.26%2C1.32%2C1.32%2C0%2C0%2C0%2C.06.35%2C3.87%2C3.87%2C0%2C0%2C1%2C0%2C.51%2C4.76%2C4.76%2C0%2C0%2C1%2C0%2C.56%2C1.39%2C1.39%2C0%2C0%2C1-.09.39.5.5%2C0%2C0%2C1-.16.22.35.35%2C0%2C0%2C1-.21.07%2C1%2C1%2C0%2C0%2C1-.49-.21%2C7%2C7%2C0%2C0%2C0-.83-.44%2C9.26%2C9.26%2C0%2C0%2C0-1.2-.44A5.49%2C5.49%2C0%2C0%2C0%2C6.5%2C6.48a4.93%2C4.93%2C0%2C0%2C0-1.4.18%2C2.69%2C2.69%2C0%2C0%2C0-1%2C.51A2.16%2C2.16%2C0%2C0%2C0%2C3.51%2C8a2.43%2C2.43%2C0%2C0%2C0-.2%2C1%2C2%2C2%2C0%2C0%2C0%2C.38%2C1.24%2C3.6%2C3.6%2C0%2C0%2C0%2C1%2C.88%2C8.25%2C8.25%2C0%2C0%2C0%2C1.38.68l1.58.62q.8.32%2C1.59.72a6%2C6%2C0%2C0%2C1%2C1.39%2C1%2C4.37%2C4.37%2C0%2C0%2C1%2C1%2C1.36A4.46%2C4.46%2C0%2C0%2C1%2C12%2C17.3Z%22%2F%3E%3C%2Fsvg%3E"/>
						</div>
					</div>
				</div>
			`);try{this.config=this.validateConfig(l)}catch(I){return this.showError(I),p}try{this.canvas=i(p,"spine-player-canvas")[0];var f={alpha:l.alpha};this.context=new s.webgl.ManagedWebGLRenderingContext(this.canvas,f),this.sceneRenderer=new s.webgl.SceneRenderer(this.canvas,this.context,!0),this.loadingScreen=new s.webgl.LoadingScreen(this.sceneRenderer)}catch{return this.showError("Sorry, your browser does not support WebGL.<br><br>Please use the latest version of Firefox, Chrome, Edge, or Safari."),p}if(this.assetManager=new s.webgl.AssetManager(this.context),l.rawDataURIs)for(var m in l.rawDataURIs){var C=l.rawDataURIs[m];this.assetManager.setRawDataURI(m,C)}l.jsonUrl?this.assetManager.loadText(l.jsonUrl):this.assetManager.loadBinary(l.skelUrl),this.assetManager.loadTextureAtlas(l.atlasUrl),l.backgroundImage&&l.backgroundImage.url&&this.assetManager.loadTexture(l.backgroundImage.url),requestAnimationFrame(function(){return o.drawFrame()}),this.playerControls=i(p,"spine-player-controls")[0];var y=i(p,"spine-player-timeline")[0];this.timelineSlider=new a,y.appendChild(this.timelineSlider.render()),this.playButton=r(p,"spine-player-button-play-pause")[0];var w=r(p,"spine-player-button-speed")[0];this.animationButton=r(p,"spine-player-button-animation")[0],this.skinButton=r(p,"spine-player-button-skin")[0];var T=r(p,"spine-player-button-settings")[0],S=r(p,"spine-player-button-fullscreen")[0],x=r(p,"spine-player-button-logo")[0];this.playButton.onclick=function(){o.paused?o.play():o.pause()},w.onclick=function(){o.showSpeedDialog(w)},this.animationButton.onclick=function(){o.showAnimationsDialog(o.animationButton)},this.skinButton.onclick=function(){o.showSkinsDialog(o.skinButton)},T.onclick=function(){o.showSettingsDialog(T)};var M=this.canvas.clientWidth,A=this.canvas.clientHeight,P=this.canvas.style.width,R=this.canvas.style.height,D=!1;return S.onclick=function(){var I=function(){D=!D,D||(o.canvas.style.width=""+M+"px",o.canvas.style.height=""+A+"px",o.drawFrame(!1),requestAnimationFrame(function(){o.canvas.style.width=P,o.canvas.style.height=R}))},V=document;if(p.onfullscreenchange=I,p.onwebkitfullscreenchange=I,V.fullscreenElement||V.webkitFullscreenElement||V.mozFullScreenElement||V.msFullscreenElement)V.exitFullscreen?V.exitFullscreen():V.mozCancelFullScreen?V.mozCancelFullScreen():V.webkitExitFullscreen?V.webkitExitFullscreen():V.msExitFullscreen&&V.msExitFullscreen();else{M=o.canvas.clientWidth,A=o.canvas.clientHeight,P=o.canvas.style.width,R=o.canvas.style.height;var N=p;N.requestFullscreen?N.requestFullscreen():N.webkitRequestFullScreen?N.webkitRequestFullScreen():N.mozRequestFullScreen?N.mozRequestFullScreen():N.msRequestFullscreen&&N.msRequestFullscreen()}},x.onclick=function(){window.open("http://esotericsoftware.com")},window.onresize=function(){o.drawFrame(!1)},p},c.prototype.showSpeedDialog=function(o){var l=this;if(this.lastPopup&&this.lastPopup.dom.remove(),this.lastPopup&&i(this.lastPopup.dom,"spine-player-popup-title")[0].textContent=="Speed"){this.lastPopup=null,o.classList.remove("spine-player-button-icon-speed-selected");return}var p=new e(this.dom,this.playerControls,`
				<div class="spine-player-popup-title">Speed</div>
				<hr>
				<div class="spine-player-row" style="user-select: none; align-items: center; padding: 8px;">
					<div class="spine-player-column">
						<div class="spine-player-speed-slider" style="margin-bottom: 4px;"></div>
						<div class="spine-player-row" style="justify-content: space-between;">
							<div>0.1x</div>
							<div>1x</div>
							<div>2x</div>
						</div>
					</div>
				</div>
			`),f=i(p.dom,"spine-player-speed-slider")[0],m=new a(2,.1,!0);f.appendChild(m.render()),m.setValue(this.speed/2),m.change=function(C){l.speed=C*2},o.classList.add("spine-player-button-icon-speed-selected"),p.show(function(){o.classList.remove("spine-player-button-icon-speed-selected"),p.dom.remove(),l.lastPopup=null}),this.lastPopup=p},c.prototype.showAnimationsDialog=function(o){var l=this;if(this.lastPopup&&this.lastPopup.dom.remove(),this.lastPopup&&i(this.lastPopup.dom,"spine-player-popup-title")[0].textContent=="Animations"){this.lastPopup=null,o.classList.remove("spine-player-button-icon-animations-selected");return}if(!(!this.skeleton||this.skeleton.data.animations.length==0)){var p=new e(this.dom,this.playerControls,`
				<div class="spine-player-popup-title">Animations</div>
				<hr>
				<ul class="spine-player-list"></ul>
			`),f=i(p.dom,"spine-player-list")[0];this.skeleton.data.animations.forEach(function(m){if(!(l.config.animations&&l.config.animations.indexOf(m.name)<0)){var C=u(`
					<li class="spine-player-list-item selectable">
						<div class="selectable-circle">
						</div>
						<div class="selectable-text">
						</div>
					</li>
				`);m.name==l.config.animation&&C.classList.add("selected"),i(C,"selectable-text")[0].innerText=m.name,f.appendChild(C),C.onclick=function(){h(f.children,"selected"),C.classList.add("selected"),l.config.animation=m.name,l.playTime=0,l.setAnimation(m.name)}}}),o.classList.add("spine-player-button-icon-animations-selected"),p.show(function(){o.classList.remove("spine-player-button-icon-animations-selected"),p.dom.remove(),l.lastPopup=null}),this.lastPopup=p}},c.prototype.showSkinsDialog=function(o){var l=this;if(this.lastPopup&&this.lastPopup.dom.remove(),this.lastPopup&&i(this.lastPopup.dom,"spine-player-popup-title")[0].textContent=="Skins"){this.lastPopup=null,o.classList.remove("spine-player-button-icon-skins-selected");return}if(!(!this.skeleton||this.skeleton.data.animations.length==0)){var p=new e(this.dom,this.playerControls,`
				<div class="spine-player-popup-title">Skins</div>
				<hr>
				<ul class="spine-player-list"></ul>
			`),f=i(p.dom,"spine-player-list")[0];this.skeleton.data.skins.forEach(function(m){if(!(l.config.skins&&l.config.skins.indexOf(m.name)<0)){var C=u(`
					<li class="spine-player-list-item selectable">
						<div class="selectable-circle">
						</div>
						<div class="selectable-text">
						</div>
					</li>
				`);m.name==l.config.skin&&C.classList.add("selected"),i(C,"selectable-text")[0].innerText=m.name,f.appendChild(C),C.onclick=function(){h(f.children,"selected"),C.classList.add("selected"),l.config.skin=m.name,l.skeleton.setSkinByName(l.config.skin),l.skeleton.setSlotsToSetupPose()}}}),o.classList.add("spine-player-button-icon-skins-selected"),p.show(function(){o.classList.remove("spine-player-button-icon-skins-selected"),p.dom.remove(),l.lastPopup=null}),this.lastPopup=p}},c.prototype.showSettingsDialog=function(o){var l=this;if(this.lastPopup&&this.lastPopup.dom.remove(),this.lastPopup&&i(this.lastPopup.dom,"spine-player-popup-title")[0].textContent=="Debug"){this.lastPopup=null,o.classList.remove("spine-player-button-icon-settings-selected");return}if(!(!this.skeleton||this.skeleton.data.animations.length==0)){var p=new e(this.dom,this.playerControls,`
				<div class="spine-player-popup-title">Debug</div>
				<hr>
				<ul class="spine-player-list">
				</li>
			`),f=i(p.dom,"spine-player-list")[0],m=function(C,y){var w=u('<li class="spine-player-list-item"></li>'),T=new v(C);w.appendChild(T.render()),T.setEnabled(l.config.debug[y]),T.change=function(S){l.config.debug[y]=S},f.appendChild(w)};m("Bones","bones"),m("Regions","regions"),m("Meshes","meshes"),m("Bounds","bounds"),m("Paths","paths"),m("Clipping","clipping"),m("Points","points"),m("Hulls","hulls"),o.classList.add("spine-player-button-icon-settings-selected"),p.show(function(){o.classList.remove("spine-player-button-icon-settings-selected"),p.dom.remove(),l.lastPopup=null}),this.lastPopup=p}},c.prototype.drawFrame=function(o){var l=this;o===void 0&&(o=!0),o&&!this.stopRequestAnimationFrame&&requestAnimationFrame(function(){return l.drawFrame()});var p=this.context,f=p.gl,m=document,C=m.fullscreenElement||m.webkitFullscreenElement||m.mozFullScreenElement||m.msFullscreenElement,y=new s.Color().setFromString(C?this.config.fullScreenBackgroundColor:this.config.backgroundColor);if(f.clearColor(y.r,y.g,y.b,y.a),f.clear(f.COLOR_BUFFER_BIT),this.loadingScreen.backgroundColor.setFromColor(y),this.loadingScreen.draw(this.assetManager.isLoadingComplete()),this.assetManager.isLoadingComplete()&&this.skeleton==null&&this.loadSkeleton(),this.sceneRenderer.resize(s.webgl.ResizeMode.Expand),this.loaded){if(!this.paused&&this.config.animation){this.time.update();var w=this.time.delta*this.speed,T=this.animationState.getCurrent(0).animation.duration;for(this.playTime+=w;this.playTime>=T&&T!=0;)this.playTime-=T;this.playTime=Math.max(0,Math.min(this.playTime,T)),this.timelineSlider.setValue(this.playTime/T),this.animationState.update(w),this.animationState.apply(this.skeleton)}this.skeleton.updateWorldTransform();var S={x:this.currentViewport.x-this.currentViewport.padLeft,y:this.currentViewport.y-this.currentViewport.padBottom,width:this.currentViewport.width+this.currentViewport.padLeft+this.currentViewport.padRight,height:this.currentViewport.height+this.currentViewport.padBottom+this.currentViewport.padTop},x=(performance.now()-this.viewportTransitionStart)/1e3/this.config.viewport.transitionTime;if(this.previousViewport&&x<1){var M={x:this.previousViewport.x-this.previousViewport.padLeft,y:this.previousViewport.y-this.previousViewport.padBottom,width:this.previousViewport.width+this.previousViewport.padLeft+this.previousViewport.padRight,height:this.previousViewport.height+this.previousViewport.padBottom+this.previousViewport.padTop};S={x:M.x+(S.x-M.x)*x,y:M.y+(S.y-M.y)*x,width:M.width+(S.width-M.width)*x,height:M.height+(S.height-M.height)*x}}var A=this.scale(S.width,S.height,this.canvas.width,this.canvas.height);if(this.sceneRenderer.camera.zoom=S.width/A.x,this.sceneRenderer.camera.position.x=S.x+S.width/2,this.sceneRenderer.camera.position.y=S.y+S.height/2,this.sceneRenderer.begin(),this.config.backgroundImage&&this.config.backgroundImage.url){var P=this.assetManager.get(this.config.backgroundImage.url);this.config.backgroundImage.hasOwnProperty("x")&&this.config.backgroundImage.hasOwnProperty("y")&&this.config.backgroundImage.hasOwnProperty("width")&&this.config.backgroundImage.hasOwnProperty("height")?this.sceneRenderer.drawTexture(P,this.config.backgroundImage.x,this.config.backgroundImage.y,this.config.backgroundImage.width,this.config.backgroundImage.height):this.sceneRenderer.drawTexture(P,S.x,S.y,S.width,S.height)}this.sceneRenderer.drawSkeleton(this.skeleton,this.config.premultipliedAlpha),this.sceneRenderer.skeletonDebugRenderer.drawBones=this.config.debug.bones,this.sceneRenderer.skeletonDebugRenderer.drawBoundingBoxes=this.config.debug.bounds,this.sceneRenderer.skeletonDebugRenderer.drawClipping=this.config.debug.clipping,this.sceneRenderer.skeletonDebugRenderer.drawMeshHull=this.config.debug.hulls,this.sceneRenderer.skeletonDebugRenderer.drawPaths=this.config.debug.paths,this.sceneRenderer.skeletonDebugRenderer.drawRegionAttachments=this.config.debug.regions,this.sceneRenderer.skeletonDebugRenderer.drawMeshTriangles=this.config.debug.meshes,this.sceneRenderer.drawSkeletonDebug(this.skeleton,this.config.premultipliedAlpha);var R=this.config.controlBones,D=this.selectedBones,I=this.skeleton;f.lineWidth(2);for(var V=0;V<R.length;V++){var N=I.findBone(R[V]);if(N){var L=D[V]!==null?c.HOVER_COLOR_INNER:c.NON_HOVER_COLOR_INNER,g=D[V]!==null?c.HOVER_COLOR_OUTER:c.NON_HOVER_COLOR_OUTER;this.sceneRenderer.circle(!0,I.x+N.worldX,I.y+N.worldY,20,L),this.sceneRenderer.circle(!1,I.x+N.worldX,I.y+N.worldY,20,g)}}f.lineWidth(1),this.config.viewport.debugRender&&(this.sceneRenderer.rect(!1,this.currentViewport.x,this.currentViewport.y,this.currentViewport.width,this.currentViewport.height,s.Color.GREEN),this.sceneRenderer.rect(!1,S.x,S.y,S.width,S.height,s.Color.RED)),this.sceneRenderer.end(),this.sceneRenderer.camera.zoom=0}},c.prototype.scale=function(o,l,p,f){var m=f/p,C=l/o,y=m>C?p/o:f/l,w=new s.Vector2;return w.x=o*y,w.y=l*y,w},c.prototype.loadSkeleton=function(){var o=this;if(!this.loaded){if(this.assetManager.hasErrors()){this.showError("Error: assets could not be loaded.<br><br>"+d(JSON.stringify(this.assetManager.getErrors())));return}var l=this.assetManager.get(this.config.atlasUrl),p;if(this.config.jsonUrl){var f=this.assetManager.get(this.config.jsonUrl),m=new s.SkeletonJson(new s.AtlasAttachmentLoader(l));try{p=m.readSkeletonData(f)}catch(T){this.showError("Error: could not load skeleton .json.<br><br>"+T.toString());return}}else{var C=this.assetManager.get(this.config.skelUrl),y=new s.SkeletonBinary(new s.AtlasAttachmentLoader(l));try{p=y.readSkeletonData(C)}catch(T){this.showError("Error: could not load skeleton .skel.<br><br>"+T.toString());return}}this.skeleton=new s.Skeleton(p);var w=new s.AnimationStateData(p);if(w.defaultMix=this.config.defaultMix,this.animationState=new s.AnimationState(w),this.config.controlBones&&this.config.controlBones.forEach(function(T){p.findBone(T)||o.showError("Error: control bone '".concat(T,"' does not exist in skeleton."))}),this.config.skin||p.skins.length>0&&(this.config.skin=p.skins[0].name),this.config.skins&&this.config.skin.length>0&&this.config.skins.forEach(function(T){if(!o.skeleton.data.findSkin(T)){o.showError("Error: skin '".concat(T,"' in selectable skin list does not exist in skeleton."));return}}),this.config.skin){if(!this.skeleton.data.findSkin(this.config.skin)){this.showError("Error: skin '".concat(this.config.skin,"' does not exist in skeleton."));return}this.skeleton.setSkinByName(this.config.skin),this.skeleton.setSlotsToSetupPose()}if(this.config.viewport||(this.config.viewport={animations:{},debugRender:!1,transitionTime:.2}),typeof this.config.viewport.debugRender>"u"&&(this.config.viewport.debugRender=!1),typeof this.config.viewport.transitionTime>"u"&&(this.config.viewport.transitionTime=.2),this.config.viewport.animations?Object.getOwnPropertyNames(this.config.viewport.animations).forEach(function(T){if(!p.findAnimation(T)){o.showError("Error: animation '".concat(T,"' for which a viewport was specified does not exist in skeleton."));return}}):this.config.viewport.animations={},this.config.animations&&this.config.animations.length>0&&(this.config.animations.forEach(function(T){if(!o.skeleton.data.findAnimation(T)){o.showError("Error: animation '".concat(T,"' in selectable animation list does not exist in skeleton."));return}}),this.config.animation||(this.config.animation=this.config.animations[0])),this.config.animation||p.animations.length>0&&(this.config.animation=p.animations[0].name),this.config.animation){if(!p.findAnimation(this.config.animation)){this.showError("Error: animation '".concat(this.config.animation,"' does not exist in skeleton."));return}this.play(),this.timelineSlider.change=function(T){o.pause();var S=o.animationState.getCurrent(0).animation.duration,x=S*T;o.animationState.update(x-o.playTime),o.animationState.apply(o.skeleton),o.skeleton.updateWorldTransform(),o.playTime=x}}this.setupInput(),(p.skins.length==1||this.config.skins&&this.config.skins.length==1)&&this.skinButton.classList.add("spine-player-hidden"),(p.animations.length==1||this.config.animations&&this.config.animations.length==1)&&this.animationButton.classList.add("spine-player-hidden"),this.config.success(this),this.loaded=!0}},c.prototype.setupInput=function(){var o=this,l=this.config.controlBones,p=this.selectedBones=new Array(this.config.controlBones.length),f=this.canvas,m=new s.webgl.Input(f),C=null,y=new s.webgl.Vector3,w=new s.webgl.Vector3,T=new s.Vector2,S=this.skeleton,x=this.sceneRenderer;m.addListener({down:function(D,I){for(var V=0;V<l.length;V++){var N=S.findBone(l[V]);N&&(x.camera.screenToWorld(y.set(D,I,0),f.width,f.height),w.set(S.x+N.worldX,S.y+N.worldY,0).distance(y)<30&&(C=N))}},up:function(D,I){if(C)C=null;else{if(!o.config.showControls)return;o.paused?o.play():o.pause()}},dragged:function(D,I){C!=null&&(x.camera.screenToWorld(y.set(D,I,0),f.width,f.height),C.parent!==null?(C.parent.worldToLocal(T.set(y.x-S.x,y.y-S.y)),C.x=T.x,C.y=T.y):(C.x=y.x-S.x,C.y=y.y-S.y))},moved:function(D,I){for(var V=0;V<l.length;V++){var N=S.findBone(l[V]);N&&(x.camera.screenToWorld(y.set(D,I,0),f.width,f.height),w.set(S.x+N.worldX,S.y+N.worldY,0).distance(y)<30?p[V]=N:p[V]=null)}}});var M=!0,A=!1;document.addEventListener("mousemove",function(D){D instanceof MouseEvent&&P(D.clientX,D.clientY)}),document.addEventListener("touchmove",function(D){if(D instanceof TouchEvent){var I=D.changedTouches;if(I.length>0){var V=I[0];P(V.clientX,V.clientY)}}});var P=function(D,I){if(o.config.showControls){var V=i(o.dom,"spine-player-popup");M=R(D,I,o.playerControls.getBoundingClientRect()),A=R(D,I,o.canvas.getBoundingClientRect()),clearTimeout(o.cancelId);var N=V.length==0&&!M&&!A&&!o.paused;if(N?o.playerControls.classList.add("spine-player-controls-hidden"):o.playerControls.classList.remove("spine-player-controls-hidden"),!M&&V.length==0&&!o.paused){var L=function(){o.paused||o.playerControls.classList.add("spine-player-controls-hidden")};o.cancelId=setTimeout(L,1e3)}}},R=function(D,I,V){var N=D-V.left,L=I-V.top;return N>=0&&N<=V.width&&L>=0&&L<=V.height}},c.prototype.play=function(){var o=this;this.paused=!1;var l=function(){o.paused||o.playerControls.classList.add("spine-player-controls-hidden")};this.cancelId=setTimeout(l,1e3),this.playButton.classList.remove("spine-player-button-icon-play"),this.playButton.classList.add("spine-player-button-icon-pause"),this.config.animation&&(this.animationState.getCurrent(0)||this.setAnimation(this.config.animation))},c.prototype.pause=function(){this.paused=!0,this.playerControls.classList.remove("spine-player-controls-hidden"),clearTimeout(this.cancelId),this.playButton.classList.remove("spine-player-button-icon-pause"),this.playButton.classList.add("spine-player-button-icon-play")},c.prototype.setAnimation=function(o,l){l===void 0&&(l=!0),this.previousViewport=this.currentViewport;var p=this.calculateAnimationViewport(o),f={x:p.x,y:p.y,width:p.width,height:p.height,padLeft:"10%",padRight:"10%",padTop:"10%",padBottom:"10%"},m=this.config.viewport;typeof m.x<"u"&&typeof m.y<"u"&&typeof m.width<"u"&&typeof m.height<"u"&&(f.x=m.x,f.y=m.y,f.width=m.width,f.height=m.height),typeof m.padLeft<"u"&&(f.padLeft=m.padLeft),typeof m.padRight<"u"&&(f.padRight=m.padRight),typeof m.padTop<"u"&&(f.padTop=m.padTop),typeof m.padBottom<"u"&&(f.padBottom=m.padBottom);var C=this.config.viewport.animations[o];C&&(typeof C.x<"u"&&typeof C.y<"u"&&typeof C.width<"u"&&typeof C.height<"u"&&(f.x=C.x,f.y=C.y,f.width=C.width,f.height=C.height),typeof C.padLeft<"u"&&(f.padLeft=C.padLeft),typeof C.padRight<"u"&&(f.padRight=C.padRight),typeof C.padTop<"u"&&(f.padTop=C.padTop),typeof C.padBottom<"u"&&(f.padBottom=C.padBottom)),f.padLeft=this.percentageToWorldUnit(f.width,f.padLeft),f.padRight=this.percentageToWorldUnit(f.width,f.padRight),f.padBottom=this.percentageToWorldUnit(f.height,f.padBottom),f.padTop=this.percentageToWorldUnit(f.height,f.padTop),this.currentViewport=f,this.viewportTransitionStart=performance.now(),this.animationState.clearTracks(),this.skeleton.setToSetupPose(),this.animationState.setAnimation(0,o,l)},c.prototype.percentageToWorldUnit=function(o,l){return typeof l=="string"?o*parseFloat(l.substr(0,l.length-1))/100:l},c.prototype.calculateAnimationViewport=function(o){var l=this.skeleton.data.findAnimation(o);this.animationState.clearTracks(),this.skeleton.setToSetupPose(),this.animationState.setAnimationWith(0,l,!0);for(var p=100,f=l.duration>0?l.duration/p:0,m=1e8,C=-1e8,y=1e8,w=-1e8,T=new s.Vector2,S=new s.Vector2,x=0;x<p;x++)this.animationState.update(f),this.animationState.apply(this.skeleton),this.skeleton.updateWorldTransform(),this.skeleton.getBounds(T,S),!isNaN(T.x)&&!isNaN(T.y)&&!isNaN(S.x)&&!isNaN(S.y)?(m=Math.min(T.x,m),C=Math.max(T.x+S.x,C),y=Math.min(T.y,y),w=Math.max(T.y+S.y,w)):console.log("Bounds of animation "+o+" are NaN");return T.x=m,T.y=y,S.x=C-m,S.y=w-y,{x:T.x,y:T.y,width:S.x,height:S.y}},c.prototype.stopRendering=function(){this.stopRequestAnimationFrame=!0},c.HOVER_COLOR_INNER=new s.Color(.478,0,0,.25),c.HOVER_COLOR_OUTER=new s.Color(1,1,1,1),c.NON_HOVER_COLOR_INNER=new s.Color(.478,0,0,.5),c.NON_HOVER_COLOR_OUTER=new s.Color(1,0,0,.8),c}();s.SpinePlayer=t;function n(c,o){if(c===o)return!0;var l=function(p,f){for(var m=0;m<p.children.length;m++){var C=p.children[m];if(C===f||l(C,f))return!0}return!1};return l(c,o)}function r(c,o){var l=new Array,p=function(f,m,C){for(var y=0;y<f.children.length;y++){var w=f.children[y];w.id===m&&C.push(w),p(w,m,C)}};return p(c,o,l),l}function i(c,o){var l=new Array,p=function(f,m,C){for(var y=0;y<f.children.length;y++){var w=f.children[y];w.classList.contains(m)&&C.push(w),p(w,m,C)}};return p(c,o,l),l}function u(c){var o=document.createElement("div");return o.innerHTML=c,o.children[0]}function h(c,o){for(var l=0;l<c.length;l++)c[l].classList.remove(o)}function d(c){return c?c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&#34;").replace(/'/g,"&#39;"):""}})(B||(B={}));var B;(function(s){var e=function(){function v(a){this.prefix=`<html>
<head>
<style>
body {
	margin: 0px;
}
</style>
</head>
<body>`.trim(),this.postfix="</body>",this.timerId=0,this.render(a)}return v.prototype.render=function(a){var t=this,n=`
				<div class="spine-player-editor-container">
					<div class="spine-player-editor-code"></div>
					<iframe class="spine-player-editor-player"></iframe>
				</div>
			`;a.innerHTML=n;var r=a.getElementsByClassName("spine-player-editor-code")[0];this.player=a.getElementsByClassName("spine-player-editor-player")[0],requestAnimationFrame(function(){t.code=CodeMirror(r,{lineNumbers:!0,tabSize:3,indentUnit:3,indentWithTabs:!0,scrollBarStyle:"native",mode:"htmlmixed",theme:"monokai"}),t.code.on("change",function(){t.startPlayer()}),t.setCode(v.DEFAULT_CODE)})},v.prototype.setPreAndPostfix=function(a,t){this.prefix=a,this.postfix=t,this.startPlayer()},v.prototype.setCode=function(a){this.code.setValue(a),this.startPlayer()},v.prototype.startPlayer=function(){var a=this;clearTimeout(this.timerId),this.timerId=setTimeout(function(){var t=a.code.getDoc().getValue();t=a.prefix+t+a.postfix,t=window.btoa(t),a.player.src="",a.player.src="data:text/html;base64,"+t},500)},v.DEFAULT_CODE=`
<script src="https://esotericsoftware.com/files/spine-player/3.7/spine-player.js"><\/script>
<link rel="stylesheet" href="https://esotericsoftware.com/files/spine-player/3.7/spine-player.css">

<div id="player-container" style="width: 100%; height: 100vh;"></div>

<script>
new spine.SpinePlayer("player-container", {
	jsonUrl: "https://esotericsoftware.com/files/examples/spineboy/export/spineboy-pro.json",
	atlasUrl: "https://esotericsoftware.com/files/examples/spineboy/export/spineboy-pma.atlas"
});
<\/script>
		`.trim(),v}();s.SpinePlayerEditor=e})(B||(B={}));const ga={key:0,class:"chatdialog-container"},ya={class:"chatdialog"},xa={__name:"index",setup(s){const{state:e}=Lt(),a=xt().theme.value.spineVoiceLang,t={arona:{skelUrl:"/spine_assets/arona/arona_spr.skel",atlasUrl:"/spine_assets/arona/arona_spr.atlas",idleAnimationName:"Idle_01",eyeCloseAnimationName:"Eye_Close_01",rightEyeBone:"R_Eye_01",leftEyeBone:"L_Eye_01",frontHeadBone:"Head_01",backHeadBone:"Head_Back",eyeRotationAngle:76.307,voiceConfig:[{audio:`/spine_assets/arona/audio/${a}/arona_01.ogg`,animation:"12",text:"您回来了？我等您很久啦！"},{audio:`/spine_assets/arona/audio/${a}/arona_02.ogg`,animation:"03",text:"嗯，不错，今天也是个好天气。"},{audio:`/spine_assets/arona/audio/${a}/arona_03.ogg`,animation:"02",text:`天空真是广啊……
另一边会有些什么呢？`},{audio:`/spine_assets/arona/audio/${a}/arona_04.ogg`,animation:"18",text:`偶尔也要为自己的健康着想啊，
老师，我会很担心的。`},{audio:`/spine_assets/arona/audio/${a}/arona_05.ogg`,animation:"25",text:"来，加油吧，老师！"},{audio:`/spine_assets/arona/audio/${a}/arona_06.ogg`,animation:"11",text:"今天又会有什么事情在等着我呢？"}]},plana:{skelUrl:"/spine_assets/plana/plana_spr.skel",atlasUrl:"/spine_assets/plana/plana_spr.atlas",idleAnimationName:"Idle_01",eyeCloseAnimationName:"Eye_Close_01",rightEyeBone:"R_Eye_01",leftEyeBone:"L_Eye_01",frontHeadBone:"Head_Rot",backHeadBone:"Head_Back",eyeRotationAngle:97.331,voiceConfig:[{audio:`/spine_assets/plana/audio/${a}/plana_02.ogg`,animation:"06",text:`我明白了，
老师现在无事可做，很无聊。`},{audio:`/spine_assets/plana/audio/${a}/plana_01.ogg`,animation:"13",text:`混乱，该行动无法理解。
请不要戳我，会出现故障。`},{audio:`/spine_assets/plana/audio/${a}/plana_03.ogg`,animation:"15",text:"确认连接。"},{audio:`/spine_assets/plana/audio/${a}/plana_04.ogg`,animation:"99",text:`正在待命，
需要解决的任务还有很多。`},{audio:`/spine_assets/plana/audio/${a}/plana_05.ogg`,animation:"17",text:"等您很久了。"}]}},n=lt(null);let r=null,i=null,u=lt(!1),h=null,d=lt("arona"),c=[];const o=lt(!1),l={context:null,buffers:new Map,currentSource:null,gainNode:null,initialize(){o.value&&(this.context||(this.context=new(window.AudioContext||window.webkitAudioContext),this.gainNode=this.context.createGain(),this.gainNode.gain.value=.5,this.gainNode.connect(this.context.destination)))},async loadAudioFile(E){if(this.buffers.has(E)){const F=this.buffers.get(E);return F.lastUsed=Date.now(),F.buffer}try{const _=await(await fetch(E)).arrayBuffer(),G=await this.context.decodeAudioData(_);return this.buffers.set(E,{buffer:G,lastUsed:Date.now()}),G}catch(F){return console.error("音频加载失败:",F),null}},async playAudio(E){return this.currentSource&&this.currentSource.stop(),new Promise(F=>{const _=this.context.createBufferSource();_.buffer=E,_.connect(this.gainNode),_.onended=()=>{this.currentSource===_&&(this.currentSource=null),F()},this.currentSource=_,_.start()})},clear(){this.currentSource&&(this.currentSource.stop(),this.currentSource=null),this.buffers.clear()},gc(){const E=Date.now();for(const[F,_]of this.buffers.entries())E-_.lastUsed>3e5&&this.buffers.delete(F)}},p=async()=>{if(!I.value)return!1;l.initialize(),l.gc();const E=I.value.voiceConfig.map(F=>l.loadAudioFile(F.audio));return Promise.all(E).catch(F=>(console.error("音频预加载失败:",F),!1))},f=()=>{if(!o.value||!n.value)return;const E=window.innerHeight+window.scrollY+1>=document.body.offsetHeight,F=document.querySelector(".chatdialog");m()&&(E?(n.value.style.left="-50%",F&&(F.style.left="-50%")):n.value.style.left="0%")},m=()=>o.value?/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent):!1;let C=!1;const y=lt(!1),w=lt("");let T=-1;const S=(E,F)=>{let _=null;return function(...G){_&&clearTimeout(_),_=setTimeout(()=>{E.apply(this,G),_=null},F)}},x=lt(null),M=S(async E=>{var F;if(E.preventDefault(),E.stopPropagation(),!C){C=!0,u.value=!0,(F=x.value)==null||F.call(x);const _=t[d.value].voiceConfig;let G;do G=Math.floor(Math.random()*_.length);while(G===T&&_.length>1);T=G;const Y=_[G];try{const Z=await l.loadAudioFile(Y.audio);if(!Z)throw new Error("音频加载失败");w.value=Y.text,y.value=!0,h.addAnimation(2,Y.animation,!1,0),await l.playAudio(Z),C=!1,u.value=!1,h.setEmptyAnimation(2,0),y.value=!1}catch(Z){console.error("音频播放失败:",Z),C=!1,u.value=!1,y.value=!1}}},300);let A=null;const P=async E=>{try{i&&clearTimeout(i),n.value&&(n.value.innerHTML=""),r=new B.SpinePlayer(n.value,{skelUrl:E.skelUrl,atlasUrl:E.atlasUrl,premultipliedAlpha:!0,backgroundColor:"#00000000",alpha:!0,showControls:!1,success:function(F){F.setAnimation(E.idleAnimationName,!0);const _=F.skeleton,G=F.animationState;h=G;const Y=_.findBone(E.rightEyeBone),Z=_.findBone(E.leftEyeBone),W=_.findBone(E.frontHeadBone),U=_.findBone(E.backHeadBone),O=Y?Y.data.x:0,k=Y?Y.data.y:0,z=Z?Z.data.x:0,j=Z?Z.data.y:0,H=W?W.data.x:0,q=W?W.data.y:0,Q=U?U.data.x:0,rt=U?U.data.y:0,K=15,ht=2,ot=1;function vt(st,at,it){const Et=Math.cos(it),yt=Math.sin(it);return{x:st*Et-at*yt,y:st*yt+at*Et}}function pt(st){if(u.value)return;const at=n.value.getBoundingClientRect(),it=st.clientX-(at.right-at.width/2),Et=st.clientY-(at.bottom-at.height*4/5),yt=E.eyeRotationAngle*(Math.PI/180),Dt=vt(it,Et,-yt),St=Dt.x,Pt=Dt.y,dt=Math.sqrt(St*St+Pt*Pt),Tt=Math.atan2(Pt,St),Ut=Math.min(dt,K),ke=-Ut*Math.cos(Tt),Ve=Ut*Math.sin(Tt);Y&&(Y.x=O+ke,Y.y=k+Ve),Z&&(Z.x=z+ke,Z.y=j+Ve);const gr=Math.min(dt,ht)*Math.cos(Tt),yr=Math.min(dt,ht)*Math.sin(Tt),xr=Math.min(dt,ot)*Math.cos(Tt),Ar=Math.min(dt,ot)*Math.sin(Tt);W&&(W.x=H-gr,W.y=q+yr),U&&(U.x=Q+xr,U.y=rt-Ar),_.updateWorldTransform()}function ct(){Y&&(Y.x=O,Y.y=k),Z&&(Z.x=z,Z.y=j),W&&(W.x=H,W.y=q),U&&(U.x=Q,U.y=rt),_.updateWorldTransform()}x.value=ct;function mt(){const st=Math.random()*3+3,at=Math.random()>.5;G.setAnimation(1,E.eyeCloseAnimationName,!1),at&&G.addAnimation(1,E.eyeCloseAnimationName,!1,.1),i=setTimeout(mt,st*1e3)}m()||(A=pt,window.addEventListener("mousemove",A)),mt()},error:function(F,_){console.error("Spine加载失败: "+_)}})}catch(F){console.error("Failed to initialize spine player:",F)}},R=Vt(()=>e.darkMode==="dark"),D=Vt(()=>e.SpinePlayerEnabled),I=Vt(()=>t[d.value]),V=E=>{E.type==="scroll"?f():["mousemove","touchmove"].includes(E.type)&&(A==null||A(E))},N=()=>{i&&clearTimeout(i),window.removeEventListener("scroll",V),A&&!m()&&(window.removeEventListener("mousemove",A),A=null),n.value&&(n.value.innerHTML=""),r&&(l.clear(),r=null,h=null),o.value&&window.WeakRef&&(c=c.filter(E=>new WeakRef(E).deref()!==null))},g=S(async()=>{if(N(),!(!D.value||!n.value)){d.value=R.value?"plana":"arona";try{await Promise.all([p(),P(I.value)])}catch(E){console.error("初始化失败:",E)}}},300);return bt([R,D],async([E,F],[_,G])=>{F!==G?F?g():N():F&&E!==_&&g()},{immediate:!0}),At(()=>{o.value=!0;const E={passive:!0};window.addEventListener("scroll",V,E),m()||window.addEventListener("mousemove",V,E),e.SpinePlayerEnabled&&g()}),(E,F)=>tt(e).SpinePlayerEnabled?(b(),$(It,{key:0},[X("div",{ref_key:"playerContainer",ref:n,class:"playerContainer",onClick:F[0]||(F[0]=(..._)=>tt(M)&&tt(M)(..._)),onTouchstart:F[1]||(F[1]=(..._)=>tt(M)&&tt(M)(..._))},null,544),Mt(Kt,{name:"fade"},{default:Wt(()=>[y.value?(b(),$("div",ga,[F[2]||(F[2]=X("div",{class:"chatdialog-triangle"},null,-1)),X("div",ya,ut(w.value),1)])):Rt("",!0)]),_:1})],64)):Rt("",!0)}},Aa=gt(xa,[["__scopeId","data-v-07ccf4e1"]]),Ea={style:{"min-height":"100vh"}},Sa=ft({__name:"Layout",setup(s){const{page:e}=xt(),{state:v}=Lt();return(a,t)=>{const n=ze("ClientOnly");return b(),$(It,null,[Mt(cn),tt(e).isNotFound?(b(),Ot(aa,{key:1})):(b(),$(It,{key:0},[X("main",Ea,[Mt(qn),Mt(ei,null,{default:Wt(()=>[Mt(Kt,{name:"fade",mode:"out-in"},{default:Wt(()=>[!tt(v).splashLoading&&tt(e).filePath==="index.md"?(b(),Ot(hi,{key:0})):tt(e).filePath==="tags/index.md"?(b(),Ot(Ni,{key:1})):(b(),Ot($i,{key:2}))]),_:1})]),_:1}),Mt(Kt,{name:"fade",mode:"out-in"},{default:Wt(()=>[tt(e).filePath==="index.md"||tt(e).filePath==="tags/index.md"?(b(),Ot(Fi,{key:0})):(b(),Ot(bi,{key:1}))]),_:1})]),Mt(Ca),tt(v).fireworksEnabled?(b(),Ot(ca,{key:0})):Rt("",!0),Mt(n,null,{default:Wt(()=>[Mt(Aa)]),_:1}),Mt(ha),t[0]||(t[0]=X("audio",{id:"background-music",loop:""},[X("source",{src:Vr,type:"audio/mpeg"})],-1))],64))],64)}}}),Ra={Layout:Sa,enhanceApp({app:s,router:e,siteData:v}){}};export{Ra as R};
